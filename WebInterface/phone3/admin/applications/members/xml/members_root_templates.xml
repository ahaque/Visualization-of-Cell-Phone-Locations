<?xml version="1.0" encoding="utf-8"?>
<templates application="members" templategroups="a:5:{s:14:&quot;skin_messaging&quot;;s:5:&quot;exact&quot;;s:10:&quot;skin_mlist&quot;;s:5:&quot;exact&quot;;s:11:&quot;skin_online&quot;;s:5:&quot;exact&quot;;s:12:&quot;skin_profile&quot;;s:5:&quot;exact&quot;;s:8:&quot;skin_ucp&quot;;s:5:&quot;exact&quot;;}">
  <templategroup group="skin_messaging">
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[{parse js_module="messenger"}
<h2>{$this->lang->words['m_messenger']}</h2>
<div id='messenger_utilities' class='left'>
	<!-- Show topic participants -->
	<if test="hasParticipants:|:is_array( $topicParticipants ) and count( $topicParticipants )">
		<div class='general_box alt' id='participants'>
			<h3 class='bar'>{$this->lang->words['participants']}</h3>
			{parse striping="participants" classes="row1,row2"}
			<ul id='participants_list'>
				<foreach loop="participants:$topicParticipants as $memberID => $memberData">
					<li class='{parse striping="participants"}'>
						<a href='{parse url="showuser={$memberData['member_id']}" seotitle="{$memberData['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' ><img src='{$memberData['pp_thumb_photo']}' width='{$memberData['pp_thumb_width']}' height='{$memberData['pp_thumb_height']}' alt='{$this->lang->words['photo']}' class='photo' /></a>
						<if test="notification:|:$memberData['map_ignore_notification']">
							{parse replacement="msg_notify_off"}
						<else />
							{parse replacement="msg_notify_on"}
						</if>
						<if test="userIsActive:|:$memberData['map_user_active']">
							<if test="userIsStarter:|:$memberData['map_is_starter']">
								<span class='name starter'><a href='{parse url="showuser={$memberData['member_id']}" seotitle="{$memberData['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'><strong>{$memberData['members_display_name_short']}</strong></a></span>{parse template="user_popup" group="global" params="$memberData['member_id'], $memberData['members_seo_name']"}
							<else />
								<span class='name'><a href='{parse url="showuser={$memberData['member_id']}" seotitle="{$memberData['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'>{$memberData['members_display_name_short']}</a></span>{parse template="user_popup" group="global" params="$memberData['member_id'], $memberData['members_seo_name']"}
							</if>
							<br />
							<span class='desc'>
								<if test="messageIsDeleted:|:$memberData['_topicDeleted']">
									<em>{$this->lang->words['topic_deleted']}</em>
								<else />
									{$this->lang->words['last_read']}
									<if test="lastReadTime:|:$memberData['map_read_time']">
										{parse date="$memberData['map_read_time']" format="short"}
									<else />
										<em>{$this->lang->words['not_yet_read']}</em>
									</if>
								</if>							
							</span>
							<if test="blockUserLink:|:! $memberData['map_is_starter'] AND $memberData['_canBeBlocked'] AND ($topicParticipants[ $this->memberData['member_id'] ]['map_is_starter'] OR $this->memberData['g_is_supmod']) AND ( $memberData['map_user_id'] != $this->memberData['member_id'] ) AND !$memberData['_topicDeleted']">
								<br /><a href="{parse url="module=messaging&amp;section=view&amp;do=blockParticipant&amp;topicID={$this->request['topicID']}&amp;memberID={$memberData['map_user_id']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}" title='{$this->lang->words['block_this_user']}' class='cancel'>{$this->lang->words['block']}</a>
							</if>
						<else />
							<if test="userIsBanned:|:$memberData['map_user_banned']">
								<span class='name blocked'><a href='{parse url="showuser={$memberData['member_id']}" seotitle="{$memberData['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'><strong>{$memberData['members_display_name_short']}</strong></a></span>{parse template="user_popup" group="global" params="$memberData['member_id'], $memberData['members_seo_name']"}
								<br />
								<span class='desc'>{$this->lang->words['user_is_blocked']}</span>
								<br />
								<if test="unbanUserLink:|:$memberData['_canBeBlocked'] AND ($topicParticipants[ $this->memberData['member_id'] ]['map_is_starter'] OR $this->memberData['g_is_supmod'])">
									<a href="{parse url="module=messaging&amp;section=view&amp;do=unblockParticipant&amp;topicID={$this->request['topicID']}&amp;memberID={$memberData['map_user_id']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}" title='{$this->lang->words['unblock_this_user']}' class='cancel'>{$this->lang->words['unblock']}</a>
								</if>
							<else />
								<span class='name left_convo'><a href='{parse url="showuser={$memberData['member_id']}" seotitle="{$memberData['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'><strong>{$memberData['members_display_name_short']}</strong></a></span>{parse template="user_popup" group="global" params="$memberData['member_id'], $memberData['members_seo_name']"}
								<br />
								<span class='desc'>
									<if test="topicUnavailable:|:$memberData['_topicDeleted']">
									<em>{$this->lang->words['topic_deleted']}</em>
									<else />
										<if test="systemMessage:|:$memberData['map_is_system']">
											{$this->lang->words['is_unable_part']}
										<else />
											{$this->lang->words['has_left_convo']}
										</if>
									</if>
								</span>
							</if>
						</if>
					</li>
				</foreach>					
			</ul>
			<ul class='post_controls'>
				<li>
					<a href='{parse url="module=messaging&amp;section=view&amp;do=toggleNotifications&amp;topicID={$this->request['topicID']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}' title='{$this->lang->words['toggle_noti_title']}'>
					<if test="changeNotifications:|:$topicParticipants[ $this->memberData['member_id'] ]['map_ignore_notification']">
						{parse replacement="msg_notify_on"} {$this->lang->words['turn_noti_on']}
					<else />
						{parse replacement="msg_notify_on"} {$this->lang->words['turn_noti_off']}
					</if>
					</a>
				</li>
			</ul>
		</div>
		<if test="inviteMoreParticipants:|:$this->memberData['g_max_mass_pm'] && count( $topicParticipants ) < $this->memberData['g_max_mass_pm'] && ! $deletedTopic">
			<div id='invite_more' class='general_box alt'>
				<h3>{$this->lang->words['invite_part']}</h3>
				<div id='invite_more_dialogue'>
					<form method='post' action='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=addParticipants" base="public"}'>
					<input type='hidden' name='authKey' value='{$this->member->form_hash}' />
					<input type='hidden' name='topicID' value='{$this->request['topicID']}' />
					<input type='hidden' name='st' value='{$this->request['st']}' />
					<ul><li><label for='invite_more_autocomplete'>{$this->lang->words['enter_member_names']}</label> 
					<input type='text' class='input_text' name='inviteNames' id='invite_more_autocomplete' value='{$this->request['inviteNames']}' size='38' /> 
					<br /><span class='desc'>[x]{$this->lang->words['separated_with_commas']}</span> 
					</li></ul><fieldset class='submit'><input type='submit' class='input_submit' value='{$this->lang->words['part_add']}' />  
					{$this->lang->words['or']} <a href='#' id='invite_more_cancel' class='cancel' title='{$this->lang->words['cancel']}'>{$this->lang->words['cancel']}</a></fieldset></form>
				</div>
				<div id='invite_more_default'>
					<if test="unlimitedInvites:|:$this->memberData['g_max_mass_pm'] == 0">
						<p class='desc'>{$this->lang->words['can_invite_unlimited']}</p>
						<script type='text/javascript'>
							ipb.messenger.invitesLeft = parseInt( 0 );
							ipb.messenger.nameText = ipb.lang['enter_unlimited_names'];
						</script>
					<else />
						<p class='desc'>{$this->lang->words['may_invite_upto']} <strong>{parse expression="( $this->memberData['g_max_mass_pm'] - count( $topicParticipants ) )"}</strong> {$this->lang->words['more_members']}</p>
						<script type='text/javascript'>
							ipb.messenger.invitesLeft = parseInt( {parse expression="( $this->memberData['g_max_mass_pm'] - count( $topicParticipants ) )"} );
							ipb.messenger.nameText = ipb.lang['enter_x_names'].gsub(/\[x\]/, ipb.messenger.invitesLeft);
						</script>
					</if>
					<ul class='post_controls'>
						<li id='add_participants'><a href='#' title='{$this->lang->words['add_participants']}'>{parse replacement="add_participants"}&nbsp; {$this->lang->words['part_add']}</a></li>
					</ul>
				</div>
			</div>
		</if>
	</if>
	<div id='folder_list' class='general_box alt'>
		<h3>{$this->lang->words['folders']}</h3>
		<ol id='folders'>
			<if test="myDirectories:|:count($dirData)">
				<foreach loop="dirs:$dirData as $id => $data">
					<if test="protectedFolder:|:$data['protected']">
						<li class='folder protected' id='f_{$id}'>{parse replacement="folder_{$id}"}
					<else />
						<li class='folder' id='f_{$id}'>{parse replacement="folder_generic"}
					</if>
					<a href="{parse url="module=messaging&amp;section=view&amp;do=showFolder&amp;folderID={$id}" base="publicWithApp"}" title="{$this->lang->words['go_to_folder']}" rel="folder_name">{$data['real']}</a>
					<span class='total rounded'>
						<if test="allFolder:|:$id == 'all'">
							{parse expression="intval($this->memberData['msg_count_total'])"}
						<else />
							{parse expression="intval($data['count'])"}
						</if>
					</span>
					<if test="unprotectedFolder:|:! $data['protected']">
						<span class='edit_folders' style='display: none'><a href='#' id='delete_{$id}' class='f_delete' title="{$this->lang->words['delete_folder_title']}">{parse replacement="folder_delete"}</a> <a href='#' id='empty_{$id}' class='f_empty' title="{$this->lang->words['empty_folder_title']}">{parse replacement="folder_empty"}</a></span></li>
					<else />
						<span class='edit_folders' style='display: none'><a href='#' id='empty_{$id}' class='f_empty' title="{$this->lang->words['empty_folder_title']}">{parse replacement="folder_empty"}</a></span></li>
					</if>
				</foreach>
			</if>
		</ol>
		<div class='clearfix post_controls'>
			<ul class='post_controls'>
				<!-- SKINNOTE: We need a static way to add/edit folders -->
				<li id='add_folder'><a href='#' title='{$this->lang->words['add_folder']}'>{parse replacement="add_folder"} {$this->lang->words['folder_add']}</a></li>
				<li id='edit_folders'><a href='#' title='{$this->lang->words['edit_folders']}'>{parse replacement="edit_folder"} {$this->lang->words['folders_edit']}</a></li>
			</ul>
		</div>
		<script type='text/javascript'>
		//<!#^#|CDATA|
			ipb.messenger.folderTemplate = "<li class='folder' id='f_[id]'>{parse replacement="folder_generic"} <a href='{parse url="module=messaging&amp;section=view&amp;do=showFolder&amp;folderID=[id]" base="publicWithApp"}' title='{$this->lang->words['go_to_folder']}' rel='folder_name'>[name]</a> <span class='total'>[total]</span><span class='edit_folders' style='display: none'><a href='#' id='delete_[id]' class='f_delete' title='{$this->lang->words['delete_folder_title']}'>{parse replacement="folder_delete"}</a> <a href='#' id='empty_[id]' class='f_empty' title='{$this->lang->words['empty_folder_title']}'>{parse replacement="folder_empty"}</a></span></li>";
		//|#^#]>
		</script>
	</div>
	<if test="storageBar:|:$this->memberData['g_max_messages'] > 0">
		<div id='space_allowance' class='general_box'>
			<h3>{$this->lang->words['storage']}</h3>
			<p>{$this->lang->words['your_messenger_storage']}</p>
			<p class='progress_bar' title='{parse expression="sprintf( $this->lang->words['pmpc_full_string'], $totalData['full_percent'] )"}' <if test="almostFull:|:$totalData['full_percent'] > 80">class='limit'</if>>
				<span style='width: {$totalData['full_percent']}%'>{$totalData['full_percent']}%</span>
			</p>
			<p>
				<span class='desc'>{$totalData['full_percent']}% {$this->lang->words['of_your_quota']} ({$this->memberData['g_max_messages']} {$this->lang->words['messages']})</span>
			</p>
		</div>
	</if>
	<div id='message_search' class='general_box'>
		<h3>{$this->lang->words['search_messages']}</h3>
		<form action='{$this->settings['base_url']}app=members&amp;module=messaging&amp;section=search' method='post'>
			<fieldset>
				<input type='text' name='searchFor' class='input_text' size='15' style='width: 60%' /> <input type='submit' class='input_submit' value='{$this->lang->words['jmp_go']}' />
			</fieldset>
		</form>
	</div>
</div>
<div id='messenger_content' class='right'>
	<if test="inlineError:|:$inlineError">
	<div class='message error'>
		<h4>{$inlineError}</h4>
	</div>
	<br />
	</if>
	{$html}
</div>
<!-- end -->]]></template_content>
      <template_name>messengerTemplate</template_name>
      <template_data><![CDATA[$html, $jumpmenu, $dirData, $totalData=array(), $topicParticipants=array(), $inlineError='', $deletedTopic=0]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<form id='pm_to_member_{$toMemberData['member_id']}'>
	<input type='hidden' name='toMemberID' value='{$toMemberData['member_id']}' />
	
	<fieldset class='row1'>
		<h3>{$this->lang->words['quick_send_to']} {$toMemberData['members_display_name']}</h3>
		<div id='pm_error_{$toMemberData['member_id']}'>
			<br />
			<p class='message error'></p></div>
			<script type='text/javascript'>
				$('pm_error_{$toMemberData['member_id']}').hide();
			</script>
		<ul>
			<li class='field'>
				<label for='pm_subject_{$toMemberData['member_id']}'>{$this->lang->words['quick_subject']}</label>
				<input type='text' class='input_text' id='pm_subject_{$toMemberData['member_id']}' name='msg_title' size='50' tabindex='0' />
			</li>
			<li class='field'>
				<label for='pm_textarea_{$toMemberData['member_id']}'>{$this->lang->words['quick_message']}</label>
				<textarea class='input_text' name='Post' tabindex='0' id='pm_textarea_{$toMemberData['member_id']}' cols='70' rows='8'></textarea>
			</li>
		</ul>
	</fieldset>
	<fieldset class='submit'>
		<input type='submit' class='input_submit' name='send_msg' value='{$this->lang->words['quick_send_button']}' accesskey='s' tabindex='0' /> {$this->lang->words['or']} <a href='#' class='cancel' title='{$this->lang->words['cancel']}' id='pm_cancel_{$toMemberData['member_id']}' tabindex='0'>{$this->lang->words['cancel']}</a>
	</fieldset>
</form>]]></template_content>
      <template_name>PMQuickForm</template_name>
      <template_data>$toMemberData</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<div id='message_compose' class='post_form'>
	<form id='msgForm' style='display:block' action="{parse url="module=messaging&amp;section=send&amp;do=send" base="publicWithApp"}" method="post" enctype='multipart/form-data'>
	
<if test="newTopicPreview:|:$displayData['preview']">
	<h2 class='maintitle'>{$this->lang->words['pm_preview']}</h2>
	<div class='post_wrap' id='post_preview'>
		<div class='row2' style='padding:8px'>
			<div class='post entry-content'>{$displayData['preview']}</div>
		</div>
	</div>
	<br />
</if>
<h2 class='maintitle'>{$this->lang->words['mess_new']}</h2>
<if test="newTopicError:|:$displayData['errors']">
<div class='message error'>
	<h4>{$this->lang->words['err_errors']}</h4>
	<p>{$displayData['errors']}</p>
	<p>{$this->lang->words['pme_none_sent']}</p>
</div>
</if>
<div class='generic_bar'></div>
<fieldset>
	<h3 class='bar'>{$this->lang->words['pro_recips']}</h3>
	<ul>
		<li class='field'>
			<label for='entered_name'>{$this->lang->words['to_whom']}</label>
			<input type="text" class='input_text' id='entered_name' name="entered_name" size="30" value="{$displayData['name']}" tabindex="0" />
		</li>
		<if test="newTopicInvite:|:intval($this->memberData['g_max_mass_pm'])">
			<li class='field'>
				<label for='more_members'>{$this->lang->words['other_recipients']}</label>
				<input type='text' size="50" class='input_text' name='inviteUsers' value='{$displayData['inviteUsers']}' id='more_members' tabindex='0' />
				<span class='desc'>{$this->lang->words['youmay_add_to']} <strong>{$this->memberData['g_max_mass_pm']}</strong> {$this->lang->words['youmay_suffix']}</span>
			</li>
			<li class='field'>
				<label for='send_type'>{$this->lang->words['send_to_as']}</label>
				<select name='sendType' id='send_type' tabindex='0'>
					<option value='invite'<if test="formReloadInvite:|:$this->request['sendType']=='invite'"> selected='selected'</if>>{$this->lang->words['send__invite']}</option>
					<option value='copy'<if test="formReloadCopy:|:$this->request['sendType']=='copy'"> selected='selected'</if>>{$this->lang->words['send__copy']}</option>
				</select>
				<span class='desc'>
					<strong>{$this->lang->words['send__invite']}</strong> {$this->lang->words['invite__desc']}<br />
					<strong>{$this->lang->words['send__copy']}</strong> {$this->lang->words['copy__desc']}
				</span>
			</li>				
		</if>
	</ul>
</fieldset>
<fieldset>
	<h3 class='bar'>{$this->lang->words['pro_message']}</h3>
	<ul>
		<li class='field'>
			<label for='message_subject'>{$this->lang->words['message_subject_send']}</label>
			<input type="text" name="msg_title" id='message_subject' class='input_text' size="40" tabindex="0" maxlength="40" value="{$displayData['title']}" />
		</li>
		<li>
			{$displayData['editor']}
		</li>
	</ul>
</fieldset>
<if test="newTopicUploads:|:$displayData['uploadData']['canUpload']">
<fieldset class='attachments'>
	{parse template="uploadForm" group="post" params="$displayData['postKey'], 'msg', $displayData['uploadData']['attach_stats'], 0"}
</fieldset>
</if>
<input type='hidden' name='topicID' value="{$displayData['topicID']}" />
<input type='hidden' name="postKey" value="{$displayData['postKey']}" />
<input type="hidden" name="auth_key" value="{$this->member->form_hash}" />
<fieldset class='submit'>
	<input class='input_submit' name="dosubmit" type="submit" value="{$this->lang->words['submit_send']}" tabindex="0" accesskey="s" />
	<input class='input_submit alt' type="submit" value="{$this->lang->words['pm_pre_button']}" tabindex="0" name="preview" />
	<input class='input_submit alt' type="submit" value="{$this->lang->words['pms_send_later']}" tabindex="0" name="save" />
	{$this->lang->words['or']} <a href='{parse url="app=members&amp;module=messaging" base="public"}' title='{$this->lang->words['cancel']}' class='cancel' tabindex='0'>{$this->lang->words['cancel']}</a>
</fieldset>
</form>
</div>
{parse template="include_highlighter" group="global" params=""}
<br />]]></template_content>
      <template_name>sendNewPersonalTopicForm</template_name>
      <template_data>$displayData</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<div id='message_compose' class='post_form'>
	<if test="replyForm:|:$displayData['type'] == 'reply'">
		<form id='msgForm' style='display:block' action="{parse url="module=messaging&amp;section=send&amp;do=sendReply" base="publicWithApp"}" method="post" name="REPLIER">
	<else />
		<form id='msgForm' style='display:block' action="{parse url="module=messaging&amp;section=send&amp;do=sendEdit" base="publicWithApp"}" method="post" name="REPLIER">
	</if>
		<input type="hidden" name="msgID" value="{$displayData['msgID']}" />
	<input type='hidden' name='topicID' value="{$displayData['topicID']}" />
	<input type='hidden' name="postKey" value="{$displayData['postKey']}" />
	<input type="hidden" name="authKey" value="{$this->member->form_hash}" />
	{$data['upload']}	
<if test="previewPm:|:$displayData['preview']">
	<h2 class='maintitle'>{$this->lang->words['pm_preview']}</h2>
	<div class='post_wrap' id='post_preview'>
		<div class='row2' style='padding:8px'>
			<div class='post entry-content'>{$displayData['preview']}</div>
		</div>
	</div>
	<br />
</if>
<if test="formErrors:|:$displayData['errors']">
	<h4>{$this->lang->words['err_errors']}</h4>
	<p>
		{$displayData['errors']}
		<br />
		<br />
		{$this->lang->words['pme_none_sent']}
	</p>
</if>
<h2 class='maintitle'>
	<if test="formHeaderText:|:$displayData['type'] == 'reply'">
		{$this->lang->words['compose_reply']}
	<else />
		{$this->lang->words['editing_message']}
	</if>
</h2>
<div class='generic_bar'></div>
<fieldset>
	<h3 class='bar'>{$this->lang->words['pro_message']}</h3>
	<ul>
		<li>
			{$displayData['editor']}
		</li>
	</ul>
</fieldset>
<if test="attachmentForm:|:$displayData['uploadData']['canUpload']">
<fieldset class='attachments'>
	{parse template="uploadForm" group="post" params="$displayData['postKey'], 'msg', $displayData['uploadData']['attach_stats'], $displayData['msgID'], 0"}
</fieldset>
</if>
<fieldset id='pm_options'>
	<!-- nothing here now... so you can remove that 'pm_options' class, if there is one -->
</fieldset>
<fieldset class='submit'>
	<if test="replyOptions:|:$displayData['type'] == 'reply'">
		<input class='input_submit' type="submit" value="{$this->lang->words['submit_send']}" tabindex="0" accesskey="s" />
		<input class='input_submit alt' type="submit" value="{$this->lang->words['pm_pre_button']}" tabindex="0" name="previewReply" />
		{$this->lang->words['or']} <a href='{parse url="app=members&amp;module=messaging&amp;do=showConversation&amp;topicID={$displayData['topicID']}" base="public"}' title='{$this->lang->words['cancel']}' class='cancel' tabindex='0'>{$this->lang->words['cancel']}</a>
	<else />
		<input class='input_submit' type="submit" value="{$this->lang->words['save_message_button']}" tabindex="0" accesskey="s" />
		<input class='input_submit alt' type="submit" value="{$this->lang->words['pm_pre_button']}" tabindex="0" name="previewReply" />
		{$this->lang->words['or']} <a href='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$displayData['topicID']}" base="public"}' title='{$this->lang->words['cancel']}' class='cancel' tabindex='0'>{$this->lang->words['cancel']}</a>
	</if>
	
</fieldset>
</form>
</div>
<br />]]></template_content>
      <template_name>sendReplyForm</template_name>
      <template_data>$displayData</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<if test="disablelightbox:|:!$this->settings['disable_lightbox']">
{parse template="include_lightbox" group="global" params=""}
</if>
{parse template="include_highlighter" group="global" params="1"}
<div id='conversation'>
	
<div class='topic_controls'>
	{$topic['_pages']}
	<ul class='topic_buttons'>
		<li><a href='{parse url="module=messaging&amp;section=send&amp;do=form" base="publicWithApp"}' title='{$this->lang->words['go_to_compose']}'>{parse replacement="compose_icon"} {$this->lang->words['compose_new']}</a></li>
		<if test="canReply:|:$topic['_canReply']">
			<li><a href='{parse url="module=messaging&amp;section=send&amp;do=replyForm&amp;topicID={$topic['mt_id']}" base="publicWithApp"}'>{parse replacement="reply_icon"} {$this->lang->words['add_reply']}</a></li>
		<else />
			<li class='disabled'><span>{$this->lang->words['you_cannot_reply']}</span></li>
		</if>
		<!-- SKINNOTE: Can probably do with some kind of 'are you sure' dialogue here.. -->
		<li><a id='pm_delete_t_{$topic['mt_id']}' href='{parse url="module=messaging&amp;section=view&amp;do=deleteConversation&amp;topicID={$topic['mt_id']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}'>{parse replacement="delete_msg_icon"} {$this->lang->words['option__delete']}</a></li>
	</ul>
	<script type='text/javascript'>
		$('pm_delete_t_{$topic['mt_id']}').observe('click', ipb.messenger.deletePM.bindAsEventListener( this, {$topic['mt_id']} ) );
	</script>
</div>
<br />
<h2 class='maintitle'>{$topic['mt_title']}</h2>
<div class='generic_bar'></div>
<foreach loop="replies:$replies as $msg_id => $msg">
	<a id='msg{$msg['msg_id']}'></a>
	<div class='post_block first hentry <if test="queued:|:$post['post']['queued']==1">moderated</if> <if test="reputation:|:$this->settings['reputation_enabled']">with_rep</if>' id='post_id_{$msg['msg_id']}'>
		<div class='post_wrap'>
			<if test="hasAuthorId:|:$members[ $msg['msg_author_id'] ]['member_id']">
				<h3>
			<else />
				<h3 class='guest'>
			</if>
					<if test="authorOnline:|:$members[ $msg['msg_author_id'] ]['member_id']">
						<if test="$members[ $msg['msg_author_id'] ]['_online']">
							{parse replacement="user_online"}
						<else />
							{parse replacement="user_offline"}
						</if> &nbsp;
								<span class="author vcard"><a class="url fn" href='{parse url="showuser={$members[ $msg['msg_author_id'] ]['member_id']}" base="public" template="showuser" seotitle="{$members[ $msg['msg_author_id'] ]['members_seo_name']}"}'>{$members[ $msg['msg_author_id'] ]['members_display_name']}</a>{parse template="user_popup" group="global" params="$members[ $msg['msg_author_id'] ]['member_id'], $members[ $msg['msg_author_id'] ]['members_seo_name']"}</span>
					<else />
						{$members[ $msg['msg_author_id'] ]['members_display_name']}
					</if>
					<if test="authorIpAddress:|:$msg['_ip_address'] != ''">
						<span class='ip'>({$this->lang->words['ip']}:
						<if test="authorPrivateIp:|:$members[ $msg['msg_author_id'] ]['g_access_cp']">
							<em>{$this->lang->words['ip_private']}</em>
						<else />
							<a href="{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=mod_ipaddress&amp;do=custom&amp;ip={$msg['_ip_address']}" base="public"}" title='{$this->lang->words['find_info_about_ip']}'>{$msg['_ip_address']}</a>
						</if>
						)</span>
					</if>
				</h3>
			<div class='author_info'>
				{parse template="userInfoPane" group="global" params="$members[ $msg['msg_author_id'] ], $msg_id, array()"}
			</div>
			<div class='post_body'>
				<p class='posted_info'>{$this->lang->words['pc_sent']} {parse date="$msg['msg_date']" format="long"}</p>
				<div class='post entry-content'>
					{$msg['msg_post']}
					{$msg['attachmentHtml']}
				</div>
				<if test="viewSigs:|:$this->memberData['view_sigs'] AND $members[ $msg['msg_author_id'] ]['signature']">
					{parse template="signature_separator" group="global" params="$members[ $msg['msg_author_id'] ]['signature']"}
				</if>
			</div>
			<ul class='post_controls'>
				<if test="reportPm:|:($this->settings['disable_reportpost'] != 1) and ( $this->memberData['member_id'] )">
					<li class='report'>
						<a href='{parse url="app=core&amp;module=reports&amp;rcom=messages&amp;topicID={$this->request['topicID']}&amp;st={$this->request['st']}&amp;msg={$msg['msg_id']}" base="public"}'>{parse replacement="report_post_icon"} {$this->lang->words['pc_report']}</a>
					</li>
				</if>
				<if test="quickReply:|:$topic['_canReply']">
					<li>
						<a href="{parse url="module=messaging&amp;section=send&amp;do=replyForm&amp;topicID={$topic['mt_id']}&amp;msgID={$msg['msg_id']}" base="publicWithApp"}" title="{$this->lang->words['tt_reply_to_post']}">{parse replacement="reply_post_icon"} {$this->lang->words['pc_reply']}</a>
					</li>
				</if>
				<if test="canEdit:|:$msg['_canEdit'] === TRUE">
					<li class='post_edit' id='edit_post_{$msg['msg_id']}'>
						<a href='{parse url="module=messaging&amp;section=send&amp;do=editMessage&amp;topicID={$topic['mt_id']}&amp;msgID={$msg['msg_id']}" base="publicWithApp"}' title='{$this->lang->words['edit_this_post']}'>{parse replacement="edit_post_icon"} {$this->lang->words['pc_edit']}</a>
					</li>
				</if>
				<if test="canDelete:|:$msg['_canDelete'] === TRUE && $msg['msg_is_first_post'] != 1">
					<li class='post_del' id='del_post_{$msg['msg_id']}'>
						<a href='{parse url="module=messaging&amp;section=send&amp;do=deleteReply&amp;topicID={$topic['mt_id']}&amp;msgID={$msg['msg_id']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}' title='{$this->lang->words['delete_this_post']}' class='delete_post'>{parse replacement="delete_post_icon"} {$this->lang->words['pc_delete']}</a>
					</li>
				</if>
			</ul>
		</div>		
	</div>
</foreach>
<br />
<div class='topic_controls clear'>
	{$topic['_pages']}
	<ul class='topic_buttons'>
		<li><a href='{parse url="module=messaging&amp;section=send&amp;do=form" base="publicWithApp"}' title='{$this->lang->words['go_to_compose']}'>{parse replacement="compose_icon"} {$this->lang->words['compose_new']}</a></li>
		<if test="canReplyBottom:|:$topic['_canReply']">
			<li><a href='{parse url="module=messaging&amp;section=send&amp;do=replyForm&amp;topicID={$topic['mt_id']}" base="publicWithApp"}'>{parse replacement="reply_icon"} {$this->lang->words['add_reply']}</a></li>
		<else />
			<li class='disabled'><span>{$this->lang->words['you_cannot_reply']}</span></li>
		</if>
		<!-- SKINNOTE: Can probably do with some kind of 'are you sure' dialogue here.. -->
		<li><a id='pm_delete_b_{$topic['mt_id']}' href='{parse url="module=messaging&amp;section=view&amp;do=deleteConversation&amp;topicID={$topic['mt_id']}&amp;authKey={$this->member->form_hash}" base="publicWithApp"}'>{parse replacement="delete_msg_icon"} {$this->lang->words['pc_delete']}</a></li>
	</ul>
	<script type='text/javascript'>
		$('pm_delete_b_{$topic['mt_id']}').observe('click', ipb.messenger.deletePM.bindAsEventListener( this, {$topic['mt_id']} ) );
	</script>
</div>
<br />
<if test="canReplyEditor:|:$topic['_canReply']">
	{parse js_module="editor"}
	<script type='text/javascript'>
		//<!#^#|CDATA|
		{parse template="editorJS" group="editors" params=""}
		//|#^#]>
	</script>
	
	<br />
	<div id='fast_reply' style='display: {$displayData['fast_reply']}'>
		<h3 class='maintitle'>{$this->lang->words['pc_fast_reply']}</h3>
		<div class='generic_bar'></div>
		<div class='general_box alt'>
			<form action='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=sendReply&amp;topicID={$topic['mt_id']}" base="public"}' method='post'>
				{parse template="editorShell" group="editors" params="'fast-reply', 'msgContent', '', 1"}
				<fieldset class='submit'>
					<input type="hidden" name="authKey" value="{$this->member->form_hash}" />
					<input type="hidden" name="fast_reply_used" value="1" />
					<input type="hidden" name="enableemo" value="yes" />
					<input type="hidden" name="enablesig" value="yes" />
					<input type='submit' name="submit" class='input_submit' value='{$this->lang->words['pc_post_button']}' accesskey='s' />&nbsp;&nbsp;<input type='submit' name="previewReply" class='input_submit alt' value='{$this->lang->words['pc_use_full_reply']}' />
				</fieldset>
			</form>
		</div>
	</div>
	<script type="text/javascript">
	//<!#^#|CDATA|
		if( $('fast-reply_textarea') ){
			$('fast-reply_textarea').setStyle('height: 70px');
		}
		
		ipb.editor_values.set( 'emoticons', \$H({ {parse expression="IPSLib::fetchEmoticonsAsJson()"} }) );
		ipb.vars['emoticon_url'] = "{$this->settings['emoticons_url']}";
		ipb.editors[ 'fast-reply' ] = new ipb.editor( 'fast-reply', USE_RTE );
		in_use = 0;
		<if test="rteOn:|:$rte_mode != 1">
			obj = ipb.editors['fast-reply'].editor_document;
		<else />
			obj = $( ipb.editors['fast-reply'].items['text_obj'] );
		</if>
		Event.observe( obj, 'click', function(){
			if( in_use != 1 ){
				$( ipb.editors['fast-reply'] ).resize_to( 250 );
				in_use = 1;
			}
		}, true);
	//|#^#]>
	</script>	
</if>
</div>
{parse template="include_highlighter" group="global" params=""}]]></template_content>
      <template_name>showConversation</template_name>
      <template_data><![CDATA[$topic, $replies, $members, $jump=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<script type='text/javascript'>
	ipb.messenger.curFolder = '{$currentFolderID}';
</script>
<div class='topic_controls'>
{$pages}
<if test="folderNotDrafts:|:$currentFolderID != 'drafts'">
	{parse variable="folder_all" default=""}
	{parse variable="folder_all" oncondition="$this->request['folderFilter'] == 'all' OR ! $this->request['folderFilter']" value="selected='selected'"}
	{parse variable="folder_in" default=""}
	{parse variable="folder_in" oncondition="$this->request['folderFilter'] == 'in'" value="selected='selected'"}
	{parse variable="folder_sent" default=""}
	{parse variable="folder_sent" oncondition="$this->request['folderFilter'] == 'sent'" value="selected='selected'"}
</if>
<ul class='topic_buttons'>
	<li><a href='{parse url="module=messaging&amp;section=send&amp;do=form" base="publicWithApp"}' title='{$this->lang->words['go_to_compose']}'>{parse replacement="compose_icon"} {$this->lang->words['compose_new']}</a></li>
</ul>
</div>
<div id='message_list'>
	<form action="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=multiFile&amp;cFolderID={$currentFolderID}" base="public"}" id='msgFolderForm' method="post">
		<input type="hidden" name="sort" value="{$this->request['sort']}" />
		<input type="hidden" name="st" value="{$this->request['st']}" />
		<input type="hidden" name="auth_key" value="{$this->member->form_hash}" />
		<table class='ipb_table' id='message_table'>
			<caption class='maintitle'>{$dirname}</caption>
			<tr class='header'>
				<th scope='col' class='col_m_status'>&nbsp;</th>
				<th scope='col' class='col_m_subject'>{$this->lang->words['col_topic']}</th>
				<th scope='col' class='col_m_from short'>{$this->lang->words['col_starter']}</th>
				<th scope='col' class='col_m_to short'><a href="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showFolder&amp;folderID={$currentFolderID}&amp;sort=nameTo&amp;st={$this->request['st']}" base="public"}">{$this->lang->words['col_to']}</a></th>
				<th scope='col' class='col_m_replies short'>{$this->lang->words['col_replies']}</th>
				<th scope='col' class='col_m_date'>{$this->lang->words['col_last_message']}</th>
				<th scope='col' class='col_m_status'>&nbsp;</th>
				<th scope='col' class='col_mod short'><input type='checkbox' class='input_check' id='msg_checkall' value='1' /></th>
			</tr>
			<if test="folderMessages:|:count( $messages )">
				{parse striping="msg_stripe" classes="row1,row2"}
				<foreach loop="folderMessages:$messages as $id => $msg">
					<tr id='{$msg['mt_id']}' class='{parse striping="msg_stripe"}'>
						<td class='altrow short'>
							<if test="folderDeleted:|:$msg['mt_is_deleted'] OR $msg['map_user_banned']">
								{parse replacement="msg_deleted"}
							<else />
								<if test="folderUnread:|:$msg['map_has_unread'] == 1">
									{parse replacement="msg_icon_new"}
								<else />
									{parse replacement="msg_icon"}
								</if>
							</if>
						</td>
						<td>
							<if test="folderAttachments:|:$msg['mt_hasattach']">
								{parse replacement="t_attach"}
							</if>
							<span class='m_title'>
								<if test="folderUnreadLink:|:$msg['map_has_unread'] == 1">
								<a href='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=findMessage&amp;topicID={$msg['mt_id']}&amp;msgID=__firstUnread__" base="public"}' title='{$this->lang->words['first_unread_reply']}'>{parse replacement="f_newpost"}</a>
									<strong>
								</if>
								<if test="folderDrafts:|:$currentFolderID == 'drafts'">
									<a href="{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;topicID={$msg['mt_id']}" base="public"}">{$msg['mt_title']}</a>
								<else />
									<a href="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$msg['mt_id']}" base="public"}">{$msg['mt_title']}</a>
								</if>
								<if test="folderEndUnread:|:$msg['map_has_unread'] == 1">
									</strong>
								</if>
								<if test="folderPages:|:is_array( $msg['pages'] ) AND count( $msg['pages'] )">
									<ul class='mini_pagination'>
									<foreach loop="messagePages:$msg['pages'] as $page">
											<if test="folderLastPage:|:$page['last']">
												<li><a href="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$msg['mt_id']}&amp;st={$page['st']}" base="public"}" title='{$this->lang->words['goto_page']} {$page['page']}'>{$page['page']} &rarr;</a></li>
											<else />
												<li><a href="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$msg['mt_id']}&amp;st={$page['st']}" base="public"}" title='{$this->lang->words['goto_page']} {$page['page']}'>{$page['page']}</a></li>
											</if>
									</foreach>
									</ul>
								</if>
								<if test="folderNew:|:in_array( $currentFolderID, array( 'new' ) )">
									<p>{$this->lang->words['folder_prefix']} {$msg['_folderName']}</p>
								</if>
							</span>
						</td>
						<td class='altrow short'>
							<if test="folderStarter:|:$msg['_starterMemberData']['members_display_name']">
								<a href='{parse url="showuser={$msg['_starterMemberData']['member_id']}" base="public" seotitle="{$msg['_starterMemberData']['members_seo_name']}" template="showuser"}'>{$msg['_starterMemberData']['members_display_name']}</a>{parse template="user_popup" group="global" params="$msg['_starterMemberData']['member_id'], $msg['_starterMemberData']['members_seo_name']"}
								<!-- SKINNOTE: Add block user back in -->
							<else />
								<span class='desc'>{$this->lang->words['deleted_user']}</span>
							</if>
						</td>
						<td class='short'>
							<if test="folderToMember:|:$msg['_toMemberData']['members_display_name']">
								<a href='{parse url="showuser={$msg['_toMemberData']['member_id']}" base="public" seotitle="{$msg['_toMemberData']['members_seo_name']}" template="showuser"}'>{$msg['_toMemberData']['members_display_name']}</a>{parse template="user_popup" group="global" params="$msg['_toMemberData']['member_id'], $msg['_toMemberData']['members_seo_name']"}
								<!-- SKINNOTE: Add block user back in -->
							<else />
								<span class='desc'>{$this->lang->words['deleted_user']}</span>
							</if>
							<if test="folderMultipleUsers:|:$msg['_otherInviteeCount'] > 0">
								<if test="folderFixPlural:|:$msg['_otherInviteeCount'] > 1">
									<p title='{parse expression="implode( ', ', $msg['_invitedMemberNames'] )"}'>({$this->lang->words['pc_and']} {$msg['_otherInviteeCount']} {$this->lang->words['pc_others']})</p>
								<else />
									<p title='{parse expression="implode( ', ', $msg['_invitedMemberNames'] )"}'>({$this->lang->words['pc_and']} {$msg['_otherInviteeCount']} {$this->lang->words['pc_other']})</p>
								</if>
							</if>
						</td>
						<td  class='altrow short'>
							<span class='desc'><if test="folderBannedIndicator:|:$msg['map_user_banned']">-<else />{parse expression="intval( $msg['mt_replies'] )"}</if></span>
						</td>
						<td>
							<ul class='last_post'>
								<if test="folderBannedUser:|:$msg['map_user_banned']">
									<li><em>{$this->lang->words['info_not_available']}</em></li>
								<else />
									<li><a href='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=findMessage&amp;topicID={$msg['mt_id']}&amp;msgID={$msg['mt_last_msg_id']}" base="public"}' title='{$this->lang->words['goto_last_post']}'>{parse replacement="f_lastpost"}</a> {parse date="$msg['mt_last_post_time']" format="long"}</li>
									<li>{$this->lang->words['pc_by']} <a href="{parse url="showuser={$msg['_lastMsgAuthor']['member_id']}" base="public" seotitle="{$msg['_lastMsgAuthor']['members_seo_name']}" template="showuser"}">{$msg['_lastMsgAuthor']['members_display_name']}</a>{parse template="user_popup" group="global" params="$msg['_lastMsgAuthor']['member_id'], $msg['_lastMsgAuthor']['members_seo_name']"}</li>
								</if>
							</ul>
						</td>
						<td class='altrow short'>
							<if test="folderNotifications:|:$msg['map_ignore_notification']">
								{parse replacement="msg_notify_off"}
							<else />
								{parse replacement="msg_notify_on"}
							</if>
						</td>
						<td class='short'>
							<input type='checkbox' class='input_check msg_check' name='msgid[{$msg['mt_id']}]' id='msg_check_{$msg['mt_id']}' />
						</td>
					</tr>
				</foreach>
			<else />
				<tr>
					<td colspan='8' class='no_messages row1'>
						{$this->lang->words['folder_no_messages_row']}
					</td>
				</tr>
			</if>
		</table>
		<div id='messenger_mod' class='moderation_bar rounded with_action'>
			<select id='pm_multifile' name='method' class='input_select'>
				<optgroup label="{$this->lang->words['with_selected_opt']}">
					<option value="delete">{$this->lang->words['option__delete']}</option>
					<if test="folderMultiOptions:|:$currentFolderID != 'drafts'">
						<option value="markread">{$this->lang->words['option__markread']}</option>
						<option value="markunread">{$this->lang->words['option__markunread']}</option>
						<option value="notifyon">{$this->lang->words['option__turnon']}</option>
						<option value="notifyoff">{$this->lang->words['option__turnoff']}</option>
					</if>
				</optgroup>
				<if test="folderJumpHtml:|:$jumpFolderHTML AND $currentFolderID != 'drafts' AND $currentFolderID != 'new'">
					<optgroup label="{$this->lang->words['move_to_opt']}">
						{$jumpFolderHTML}
					</optgroup>
				</if>
			</select>
			<input type="submit" class='input_submit alt' id='folder_moderation' value="{$this->lang->words['jmp_go']}" />
		</div>
	</form>
	<div id='messenger_filter' class='filter_bar rounded'>
		<form method='post' action='{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showFolder&amp;folderID={$currentFolderID}" base="public"}'>
			<label for='conversation_filter'>{$this->lang->words['filter__show']} </label>
			<select id='conversation_filter' name='folderFilter' class='input_select'>
				<option value='' {parse variable="folder_all"}>{$this->lang->words['filter__all']}</option>
				<option value='in' {parse variable="folder_in"}>{$this->lang->words['filter__others']}</option>
				<option value='sent' {parse variable="folder_sent"}>{$this->lang->words['filters__i']}</option>
			</select>
			<input type='submit' class='input_submit alt' value='{$this->lang->words['filters__update']}' />
		</form>
	</div>
</div>
<br />
<div class='topic_controls'>
{$pages}
<ul class='topic_buttons'>
	<li><a href='{parse url="module=messaging&amp;section=send&amp;do=form" base="publicWithApp"}' title='{$this->lang->words['go_to_compose']}'>{parse replacement="compose_icon"} {$this->lang->words['compose_new']}</a></li>
</ul>
</div>]]></template_content>
      <template_name>showFolder</template_name>
      <template_data>$messages, $dirname, $pages, $currentFolderID, $jumpFolderHTML</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_messaging</template_group>
      <template_content><![CDATA[<script type='text/javascript'>
//<!#^#|CDATA|
	ipb.messenger.curFolder = 'in';
//|#^#]>
</script>
<if test="searchError:|:$error">
	<p class='message error'>
		{$error}
	</p>
	<br />
</if>
<div class='topic_controls'>
{$pages}
</div>
<br />
<h2 class='maintitle clear'>{$this->lang->words['your_search_results']}</h2>
<div id='message_list'>
		<table class='ipb_table' id='message_table'>
			<tr class='header'>
				<th scope='col' class='col_m_status'>&nbsp;</th>
				<th scope='col' class='col_m_subject'>{$this->lang->words['col_subject']}</th>
				<th scope='col' class='col_m_replies short'>{$this->lang->words['col_replies']}</th>
				<th scope='col' class='col_m_sender'>{$this->lang->words['col_recipient']}</th>
				<th scope='col' class='col_m_date'>{$this->lang->words['col_date']}</th>
			</tr>
		
			<if test="searchMessages:|:count( $messages )">
				{parse striping="msg_stripe" classes="row1,row2"}
				<foreach loop="messages:$messages as $id => $msg">
					<tr id='{$msg['mt_id']}' class='{parse striping="msg_stripe"}'>
						<td class='altrow short'>
							<if test="searchUnread:|:$msg['map_has_unread'] != 1">
								{parse replacement="msg_read"}
							<else />
								{parse replacement="msg_unread"}
							</if>
							<if test="searchDeleted:|:$msg['mt_is_deleted']">
								{parse replacement="msg_deleted"}
							</if>
						</td>
						<td>
							<if test="searchAttachment:|:$msg['mt_hasattach']">
								{parse replacement="t_attach"}
							</if>
							<span class='m_title'>
								<if test="searchHasUnread:|:$msg['map_has_unread'] == 1">
									<strong>
								</if>
								<a href="{parse url="app=members&amp;module=messaging&amp;section=view&amp;do=showConversation&amp;topicID={$msg['mt_id']}" base="public"}">{$msg['mt_title']}</a>
								<if test="searchEndHasUnread:|:$msg['map_has_unread'] == 1">
									</strong>
								</if>
								<p>{$this->lang->words['label_pc']} {$msg['_folderName']}</p>
							</span>
						</td>
						<td>
							<span class='desc'>{parse expression="intval( $msg['mt_replies'] )"}</span>
						</td>
						<td class='altrow'>
							<if test="searchToMember:|:$msg['_toMemberData']['member_id']">
								<a href='{parse url="showuser={$msg['_toMemberData']['member_id']}" base="public"}'>{$msg['_toMemberData']['members_display_name']}</a>
								<if test="searchInvitedCount:|:$msg['mt_invited_count']">
									<if test="searchFixPlural:|:$msg['mt_invited_count'] > 1">
										<p>({$this->lang->words['pc_and']} {$msg['mt_invited_count']} {$this->lang->words['pc_others']})</p>
									<else />
										<p>({$this->lang->words['pc_and']} {$msg['mt_invited_count']} {$this->lang->words['pc_other']})</p>
									</if>
								</if>
								<!-- SKINNOTE: Add block user back in -->
							<else />
								<span class='desc'>{$this->lang->words['deleted_user']}</span>
							</if>
						</td>
						<td>
							{parse date="$msg['mt_last_post_time']" format="long"}
						</td>
					</tr>
				</foreach>
			<else />
				<tr>
					<td colspan='5' class='no_messages row1'>
						{$this->lang->words['no_messages_row']}
					</td>
				</tr>
			</if>
		</table>
	</form>
</div>]]></template_content>
      <template_name>showSearchResults</template_name>
      <template_data>$messages, $pages, $error</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
  </templategroup>
  <templategroup group="skin_mlist">
    <template>
      <template_group>skin_mlist</template_group>
      <template_content><![CDATA[<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/calendar_date_select/calendar_date_select.js'></script>
{parse js_module="memberlist"}
<!-- SEARCH FORM -->
<h2>{$this->lang->words['mlist_header']}</h2>
<div class='topic_controls'>
	{$pages}
	
	<ul class='topic_buttons'>
		<li><a href='#filters' title='{$this->lang->words['mlist_adv_filt']}' id='use_filters'><img src='{$this->settings['img_url']}/cog.png' alt='{$this->lang->words['icon']}' /> {$this->lang->words['mlist_adv_filt']}</a></li>
	</ul>
</div>
<div id='member_filters' class='general_box alt clear'>
	<form action="{parse url="app=members&amp;section=view&amp;module=list" base="public"}" method="post">
		<h3 class='bar'>{$this->lang->words['mlist_adv_filt_opt']}</h3>
	
		<ul id='filters_1' class=''>
			<li class='field'>
				<label for='member_name'>{$this->lang->words['s_name']}</label>
				<select name="name_box" class='input_select'>
					<option value="begins">{$this->lang->words['s_begins']}</option>
					<option value="contains">{$this->lang->words['s_contains']}</option>
				</select>&nbsp;&nbsp;
				<input type="text" size="15" name="name" id='member_name' class='input_text' value="{$this->request['name']}" />
			</li>
			<li class='field'>
				<label for='photo_only'>{$this->lang->words['photo_only']}</label>
				<input class='input_check' id='photo_only' type="checkbox" value="1" name="photoonly" <if test="photoonly:|:$defaults['photoonly']">checked='checked'</if> />
			</li>
			<li class='field'>
				<label for='rating'>{$this->lang->words['m_rating_morethan']}</label>
				<select name='pp_rating_real' id='rating'>
					<if test="rating0:|:! $this->request['pp_rating_real']">
						<option value='0' selected='selected'>0</option>
					<else />
						<option value='0'>0</option>
					</if>
					<if test="rating1:|:$this->request['pp_rating_real'] == 1">
						<option value='1' selected='selected'>1</option>
					<else />
						<option value='1'>1</option>
					</if>
					<if test="rating2:|:$this->request['pp_rating_real'] == 2">
						<option value='2' selected='selected'>2</option>
					<else />
						<option value='2'>2</option>
					</if>
					<if test="rating3:|:$this->request['pp_rating_real'] == 3">
						<option value='3' selected='selected'>3</option>
					<else />
						<option value='3'>3</option>
					</if>
					<if test="rating4:|:$this->request['pp_rating_real'] == 4">
						<option value='4' selected='selected'>4</option>
					<else />
						<option value='4'>4</option>
					</if>
				</select>
				{$this->lang->words['m_stars']}
			</li>
			
			<if test="hascfields:|:count( $custom_fields->out_fields )">
				<foreach loop="customfields:$custom_fields->out_fields as $id => $field">
			<li class='field custom'>
				<label for='field_{$id}'>{$custom_fields->field_names[$id]}</label>
				{$field}
			</li>
				</foreach>
			</if>			
		</ul>
		<ul id='filters_2' class=''>
			<li class='field'>
				<label for='signature'>{$this->lang->words['s_signature']}</label>
				<input type="text" class='input_text' size="28" id='signature' name="signature" value="{$this->request['signature']}" />
			</li>
			<li class='field'>
				<label for='posts'>{$this->lang->words['s_posts']}</label>
				<select class="dropdown" name="posts_ltmt">
					<option value="lt">{$this->lang->words['s_lessthan']}</option>
					<option value="mt">{$this->lang->words['s_morethan']}</option>
				</select>
				&nbsp;<input type="text" class='input_text' id='posts' size="15" name="posts" value="{$this->request['posts']}" />
			</li>
			<li class='field'>
				<label for='joined'>{$this->lang->words['s_joined']}</label>
				<select class="dropdown" name="joined_ltmt">
					<option value="lt">{$this->lang->words['s_before']}</option>
					<option value="mt">{$this->lang->words['s_after']}</option>
				</select>
				&nbsp;<input type="text" class='input_text' id='joined' size="10" name="joined" value="{$this->request['joined']}" /> <img src='{$this->settings['img_url']}/date.png' alt='{$this->lang->words['generic_date']}' id='joined_date_icon' class='clickable' /> 
				<span class="desc">{$this->lang->words['s_dateformat']}</span>
			</li>
			<li class='field'>
				<label for='last_post'>{$this->lang->words['s_lastpost']}</label>
				<select class="dropdown" name="lastpost_ltmt">
					<option value="lt">{$this->lang->words['s_before']}</option>
					<option value="mt">{$this->lang->words['s_after']}</option>
				</select>
				&nbsp;<input type="text" class='input_text' id='last_post' size="10" name="lastpost" value="{$this->request['lastpost']}" /> <img src='{$this->settings['img_url']}/date.png' alt='{$this->lang->words['generic_date']}' id='last_post_date_icon' class='clickable' /> 
				<span class="desc">{$this->lang->words['s_dateformat']}</span>
			</li>
			<li class='field'>
				<label for='last_visit'>{$this->lang->words['s_lastvisit']}</label>
				<select class="dropdown" name="lastvisit_ltmt">
					<option value="lt">{$this->lang->words['s_before']}</option>
					<option value="mt">{$this->lang->words['s_after']}</option>
				</select>
				&nbsp;<input type="text" class='input_text' id='last_visit' size="10" name="lastvisit" value="{$this->request['lastvisit']}" /> <img src='{$this->settings['img_url']}/date.png' alt='{$this->lang->words['generic_date']}' id='last_visit_date_icon' class='clickable' />
				<span class="desc">{$this->lang->words['s_dateformat']}</span>
			</li>			
		</ul>
		<fieldset class='other_filters row2 altrow'>
			<select name='filter' class='input_select'>
				<foreach loop="filter:$dropdowns['filter'] as $k => $v">
					<option value='{$k}'<if test="filterdefault:|:$k == $defaults['filter']"> selected='selected'</if>>{$v}</option>
				</foreach>
			</select>
			{$this->lang->words['sorting_text_by']}
			<select name='sort_key' class='input_select'>
				<foreach loop="sort_key:$dropdowns['sort_key'] as $k => $v">
					<option value='{$k}'<if test="sortdefault:|:$k == $defaults['sort_key']"> selected='selected'</if>>{$this->lang->words[ $v ]}</option>
				</foreach>
			</select>
			{$this->lang->words['sorting_text_in']}
			<select name='sort_order' class='input_select'>
				<foreach loop="sort_order:$dropdowns['sort_order'] as $k => $v">
					<option value='{$k}'<if test="orderdefault:|:$k == $defaults['sort_order']"> selected='selected'</if>>{$this->lang->words[ $v ]}</option>
				</foreach>
			</select>
			{$this->lang->words['sorting_text_with']}
			<select name='max_results' class='input_select'>
				<foreach loop="max_results:$dropdowns['max_results'] as $k => $v">
					<option value='{$k}'<if test="limitdefault:|:$k == $defaults['max_results']"> selected='selected'</if>>{$v}</option>
				</foreach>
			</select>
			{$this->lang->words['sorting_text_results']}
		</fieldset>
		<fieldset class='submit clear'>
			<input type="submit" value="{$this->lang->words['sort_submit']}" class="input_submit" /> {$this->lang->words['or']} <a href='#j_memberlist' title='{$this->lang->words['cancel']}' id='close_filters' class='cancel'>{$this->lang->words['cancel']}</a>
		</fieldset>
	</form>
</div>
<script type='text/javascript'>
	$('member_filters').hide();
</script>
<br />
<div id='member_list' class='clear block_wrap'>
	<ol id='member_alpha' class='tab_bar'>
		<if test="letterquickjump:|:!$this->request['quickjump']">
			<li class='active'><a href='{parse url="app=members&amp;section=view&amp;module=list" base="public"}' title='{$this->lang->words['members_start_with']}{$letter}'>{$this->lang->words['mlist_view_all_txt']}</a></li>
		<else />
			<li><a href='{parse url="app=members&amp;section=view&amp;module=list" base="public"}' title='{$this->lang->words['mlist_view_all_title']}'>{$this->lang->words['mlist_view_all_txt']}</a></li>
		</if>
<foreach loop="chars:range(65,90) as $char">
	<if test="letterdefault:|:$letter = strtoupper(chr($char))">
		<li <if test="selected:|:strtoupper( $this->request['quickjump'] ) == $letter">class='active'</if>><a href='{parse url="app=members&amp;section=view&amp;module=list&amp;{$url}&amp;quickjump={$letter}" base="public"}' title='{$this->lang->words['mlist_view_start_title']} {$letter}'>{$letter}</a></li>
	</if>
</foreach>
	</ol>
	<div class='tab_filters'>
		<ul class='right'>
			<li <if test="filtermembers:|:$this->request['sort_key'] == 'members_display_name' || !$this->request['sort_key']">class='active'</if>>
				<a href='{parse url="app=members&amp;section=view&amp;module=list&amp;{$url}&amp;sort_key=members_display_name&amp;sort_order=asc" base="public"}' title='{$this->lang->words['sort_by_mname']}'>{$this->lang->words['s_name']}</a>
			</li>
			<li <if test="filterposts:|:$this->request['sort_key'] == 'posts'">class='active'</if>>
				<a href='{parse url="app=members&amp;section=view&amp;module=list&amp;{$url}&amp;sort_key=posts&amp;sort_order=desc" base="public"}' title='{$this->lang->words['sort_by_posts']}'>{$this->lang->words['pcount']}</a>
			</li>
			<li <if test="filterjoined:|:$this->request['sort_key'] == 'joined'">class='active'</if>>
				<a href='{parse url="app=members&amp;section=view&amp;module=list&amp;{$url}&amp;sort_key=joined" base="public"}' title='{$this->lang->words['sorty_by_jdate']}'>{$this->lang->words['sort_by_joined']}</a>
			</li>
		</ul>
	</div>
	
	<div id='member_wrap'>
		<ul class='members'>
			<if test="showmembers:|:is_array( $members ) and count( $members )">
				{parse striping="memberStripe" classes="row1,row2"}
				<foreach loop="members:$members as $member">
					<li id='member_id_{$member['member_id']}' class='general_box clear member_entry {parse striping="memberStripe"}'>
						<h3 class='bar'><a href='{parse url="showuser={$member['member_id']}" template="showuser" seotitle="{$member['members_seo_name']}" base="public"}' title='{$this->lang->words['view_profile']}'>{$member['members_display_name']}</a>{parse template="user_popup" group="global" params="$member['member_id'], $member['members_seo_name']"}</h3>
						<a href='{parse url="showuser={$member['member_id']}" template="showuser" seotitle="{$member['members_seo_name']}" base="public"}' title='{$this->lang->words['view_profile']}'><img src='{$member['pp_thumb_photo']}' width='{$member['pp_thumb_width']}' height='{$member['pp_thumb_height']}' alt="{$member['members_display_name']}{$this->lang->words['users_photo']}" class='photo' /></a>	
					
						<dl class='info'>
							<dt class='clear'>{$this->lang->words['member_joined']}:</dt>
							<dd>{parse date="$member['joined']" format="joined"}</dd>
							<dt class='clear'>{$this->lang->words['member_group']}:</dt>
							<dd>{IPSLib::makeNameFormatted( $member['group'], $member['member_group_id'] )}</dd>
							<dt class='clear'>{$this->lang->words['member_posts']}:</dt>
							<dd>{parse format_number="$member['posts']"}</dd>
							<dt class='clear'>{$this->lang->words['m_views']}:</dt>
							<dd>{parse format_number="$member['members_profile_views']"}</dd>
						</dl>
						
						<ul class='user_controls clear'>
							<if test="notus:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $member['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
								<if test="addfriend:|:IPSMember::checkFriendStatus( $member['member_id'] )">
									<li class='mini_friend_toggle is_friend' id='friend_mlist_{$member['member_id']}'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=remove&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['remove_friend']}'>{parse replacement="remove_friend"}</a></li>
								<else />
									<li class='mini_friend_toggle is_not_friend' id='friend_mlist_{$member['member_id']}'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=add&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['add_friend']}'>{parse replacement="add_friend"}</a></li>								
								</if>
							</if>
							<if test="sendpm:|:$this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' ) && $member['member_id'] != $this->memberData['member_id']">
								<li class='pm_button' id='pm_xxx_{$member['pp_member_id']}'><a href='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$member['pp_member_id']}" base="public"}' title='{$this->lang->words['pm_member']}'>{parse replacement="send_msg"}</a></li>
							</if>
							<li><a href='{parse url="app=core&amp;module=search&amp;do=user_posts&amp;mid={$member['member_id']}&amp;view_by_title=1&amp;search_filter_app[forums]=1" base="public"}'>{parse replacement="find_topics_link"} {$this->lang->words['find_topics']}</a></li>
							<li><a href='{parse url="app=core&amp;module=search&amp;do=user_posts&amp;mid={$member['member_id']}<if test="findposts:|:! in_array( $this->settings['search_method'], array( 'traditional', 'sphinx' ) )">&amp;search_filter_app[forums]=1</if>" base="public"}'>{parse replacement="find_posts_link"} {$this->lang->words['find_posts']}</a></li>
							<if test="blog:|:$member['has_blog'] AND IPSLib::appIsInstalled( 'blog' )">
								<li><a href='{parse url="app=blog&amp;module=display&amp;section=blog&amp;mid={$member['member_id']}" base="public"}' title='{$this->lang->words['view_blog']}'>{parse replacement="blog_link"}</a></li>
							</if>
							<if test="gallery:|:$member['has_gallery'] AND IPSLib::appIsInstalled( 'gallery' )">
								<li><a href='{parse url="app=gallery&amp;module=user&amp;section=user&amp;user={$member['member_id']}" base="public"}' title='{$this->lang->words['view_gallery']}'>{parse replacement="gallery_link"}</a></li>
							</if>
						</ul>
						<if test="rating:|:$this->settings['pp_allow_member_rate']">
							<p class='rating'> 
								<if test="rate1:|:$member['pp_rating_real'] >= 1">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate2:|:$member['pp_rating_real'] >= 2">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate3:|:$member['pp_rating_real'] >= 3">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate4:|:$member['pp_rating_real'] >= 4">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate5:|:$member['pp_rating_real'] >= 5">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if>
							</p>
						</if>
						
						<if test="repson:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile']">
							<if test="norep:|:$member['pp_reputation_points'] == 0 || !$member['pp_reputation_points']">
								<p class='reputation zero'>
							</if>
							<if test="posrep:|:$member['pp_reputation_points'] > 0">
								<p class='reputation positive'>
							</if>
							<if test="negrep:|:$member['pp_reputation_points'] < 0">
								<p class='reputation negative'>
							</if>							
									<span class='number'>{$this->lang->words['reputation']}: {$member['pp_reputation_points']}</span>
								</p>
						</if>						
					</li>
				</foreach>
			<else />
				<p class='no_messages'>{$this->lang->words['no_results']}</p>
			</if>
		</ul>
	</div>
</div>
<div class='topic_controls'>
	{$pages}
</div>]]></template_content>
      <template_name>member_list_show</template_name>
      <template_data><![CDATA[$members, $pages="", $dropdowns=array(), $defaults=array(), $custom_fields=null, $url='']]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
  </templategroup>
  <templategroup group="skin_online">
    <template>
      <template_group>skin_online</template_group>
      <template_content><![CDATA[<div class='topic_controls'>
	{$links}
</div>
<h2 class='maintitle'>{$this->lang->words['page_title']}</h2>
<table class='ipb_table' summary="{$this->lang->words['users_online']}">
	<tr class='header'>
		<th scope='col' width='55'>&nbsp;</th>
		<th scope='col'>{$this->lang->words['member_name']}</th>
		<th scope='col'>{$this->lang->words['where']}</th>
		<th scope='col'>{$this->lang->words['time']}</th>
		<th scope='col'>&nbsp;</th>
	</tr>
	<if test="onlineusers:|:count($rows)">
		{parse striping="online" classes="row1,row2"}
		<foreach loop="online:$rows as $session">
			<tr>
				<td class='row1'>
					<img src='{$session['_memberData']['pp_thumb_photo']}' alt="{$session['_memberData']['members_display_name']}{$this->lang->words['users_photo']}" width='{$session['_memberData']['pp_thumb_width']}' height='{$session['_memberData']['pp_thumb_height']}' class='photo' />
				</td>
				<td class='{parse striping="online"}'>
					<if test="username:|:$session['member_name']">
						<if test="userid:|:$session['member_id']">
							<a href='{parse url="showuser={$session['member_id']}" template="showuser" seotitle="{$session['seo_name']}" base="public"}' title='{$this->lang->words['view_profile']}'>{IPSLib::makeNameFormatted( $session['member_name'], $session['member_group'] )}</a>{parse template="user_popup" group="global" params="$session['member_id'],$session['seo_name']"}
						<else />
							{IPSLib::makeNameFormatted( $session['member_name'], $session['member_group'] )}
						</if>
					<else />
						{$this->lang->words['global_guestname']}
					</if>
					<if test="spider:|:$session['is_bot'] AND $this->settings['spider_anon']">
						<if test="weareadmin:|:$this->memberData['g_access_cp']">
							*
						</if>
					<else />
						<if test="anonymous:|:$session['login_type'] == 1">
							<if test="viewanon:|:!$this->settings['disable_admin_anon'] AND $this->memberData['g_access_cp']">
								*
							</if>
						</if>
					</if>
					<if test="showip:|:$this->memberData['g_access_cp'] AND !$this->settings['disable_online_ip']">
						<span class='ip'>( {$session['ip_address']} )</span>
					</if>
				</td>
				<td class='{parse striping="online"}'>
					<if test="nowhere:|:!$session['where_line']">
						{$this->lang->words['board_index']}
					<else />
						<if test="wheretext:|:$session['where_link'] AND !$session['where_line_more']">
							<a href='{parse url="{$session['where_link']}" base="public"}'>
						</if>
						{$session['where_line']} 
						<if test="moredetails:|:$session['where_line_more']">
							&nbsp;
							<if test="wheretextseo:|:$session['_whereLinkSeo']">
								<a href='{$session['_whereLinkSeo']}'>
							<else />
								<if test="detailslink:|:$session['where_link']"><a href='{parse url="{$session['where_link']}" base="public"}'></if>
							</if>
							{$session['where_line_more']}
							<if test="enddetailslink:|:$session['where_link']"></a></if>
						<else />
							<if test="nomoreenddetailslink:|:$session['where_link']"></a></if>
						</if>
					</if>
				</td>
				<td class='{parse striping="online"}'>
					{parse date="$session['running_time']" format="long" relative="false"}
				</td>
				<td class='{parse striping="online"}'>
					<if test="options:|:$session['member_id'] AND $session['member_name']">
						<ul class='user_controls clear'>
							<if test="notus:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $session['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
								<if test="addfriend:|:IPSMember::checkFriendStatus( $session['member_id'] )">
									<li class='mini_friend_toggle is_friend' id='friend_online_{$session['member_id']}'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=remove&amp;member_id={$session['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['remove_friend']}'>{parse replacement="remove_friend"}</a></li>
								<else />
									<li class='mini_friend_toggle is_not_friend' id='friend_online_{$session['member_id']}'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=add&amp;member_id={$session['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['add_friend']}'>{parse replacement="add_friend"}</a></li>								
								</if>
							</if>
							<if test="sendpm:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $session['member_id'] AND $this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' )">
								<li class='pm_button' id='pm_online_{$session['member_id']}'><a href='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$session['member_id']}" base="public"}' title='{$this->lang->words['pm_member']}'>{parse replacement="send_msg"}</a></li>
							</if>
							<if test="blog:|:$session['memberData']['has_blog'] AND IPSLib::appIsInstalled( 'blog' )">
								<li><a href='{parse url="app=blog&amp;module=display&amp;section=blog&amp;mid={$session['member_id']}" base="public"}' title='{$this->lang->words['view_blog']}'>{parse replacement="blog_link"}</a></li>
							</if>
							<if test="gallery:|:$session['memberData']['has_gallery'] AND IPSLib::appIsInstalled( 'gallery' )">
								<li><a href='{parse url="app=gallery&amp;module=user&amp;section=user&amp;user={$session['member_id']}" base="public"}' title='{$this->lang->words['view_gallery']}'>{parse replacement="gallery_link"}</a></li>
							</if>
						</ul>
					<else />
						<span class='desc'>{$this->lang->words['no_options_available']}</span>
					</if>
				</td>
			</tr>
		</foreach>
	</if>
</table>
<div id='forum_filter' class='filter_bar rounded'>
	<form method="post" action="{parse url="app=members&amp;section=online&amp;module=online" base="public"}">
		<label for='sort_key'>{$this->lang->words['s_by']}</label>
		<select name="sort_key" id='sort_key' class='input_select'>
			<foreach loop="sort_key:array( 'click', 'name' ) as $sort">
				<option value='{$sort}'<if test="defaultsort:|:$defaults['sort_key'] == $sort"> selected='selected'</if>>{$this->lang->words['s_sort_key_' . $sort ]}</option>
			</foreach>
		</select>
		<select name="show_mem" class='input_select'>
			<foreach loop="show_mem:array( 'reg', 'guest', 'all' ) as $filter">
				<option value='{$filter}'<if test="defaultfilter:|:$defaults['show_mem'] == $filter"> selected='selected'</if>>{$this->lang->words['s_show_mem_' . $filter ]}</option>
			</foreach>
		</select>
		<select name="sort_order" class='input_select'>
			<foreach loop="sort_order:array( 'desc', 'asc' ) as $order">
				<option value='{$order}'<if test="defaultorder:|:$defaults['sort_order'] == $order"> selected='selected'</if>>{$this->lang->words['s_sort_order_' . $order ]}</option>
			</foreach>
		</select>
		<input type="submit" value="{$this->lang->words['s_go']}" class="input_submit alt" />
	</form>
</div>
<br />
<div class='topic_controls'>
	{$links}
</div>]]></template_content>
      <template_name>showOnlineList</template_name>
      <template_data><![CDATA[$rows, $links="", $defaults=array(), $our_mgroups=array()]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
  </templategroup>
  <templategroup group="skin_profile">
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<if test="contact_field:|:$f->parsed">
<dt>{$f->raw_data['pf_title']}:</dt>
<dd>
	<if test="cf_icon:|:$f->raw_data['pf_icon']"><img src='{$this->settings['public_dir']}{$f->raw_data['pf_icon']}' alt='{$f->raw_data['pf_title']}' />&nbsp;</if>
	<if test="cf_array:|:is_array( $f->parsed )">
		<foreach loop="cfieldgroups:$f->parsed as $value">
			{$value}
		</foreach>
	<else />
		<if test="cf_aim:|:$f->raw_data['pf_key'] == 'aim'">
			<a class='url' href='aim:goim?screenname={$f->parsed}'>{$f->parsed}</a>
		<else />
			<if test="cf_msn:|:$f->raw_data['pf_key'] == 'msn'">
				<a class='url' href='msnim:chat?contact={$f->parsed}'>{$f->parsed}</a>
			<else />
				<if test="cf_yahoo:|:$f->raw_data['pf_key'] == 'yahoo'">
					<a class='url' href='ymsgr:sendIM?{$f->parsed}'>{$f->parsed}</a>
				<else />
					<if test="cf_icq:|:$f->raw_data['pf_key'] == 'icq'">
						<a class='url' type="application/x-icq" href='http://www.icq.com/people/cmd.php?uin={$f->parsed}&amp;action=message'>{$f->parsed}</a>
					<else />
						<if test="cf_website:|:$f->raw_data['pf_key'] == 'website'">
							<a class='url uid' rel="me" href='{$f->parsed}'>{$f->parsed}</a>
						<else />
							<if test="cf_jabber:|:$f->raw_data['pf_key'] == 'jabber'">
								<a class='url' href='xmpp:{$f->parsed}'>{$f->parsed}</a>
							<else />
								<if test="cf_skype:|:$f->raw_data['pf_key'] == 'skype'">
									<a class='url' href='skype:{$f->parsed}?call'>{$f->parsed}</a>
								<else />
									{$f->parsed}
								</if>
							</if>
						</if>
					</if>
				</if>
			</if>
		</if>
	</if>
</dd>
</if>]]></template_content>
      <template_name>customFieldGroup__contact</template_name>
      <template_data>$f</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<dt>{$f->raw_data['pf_title']}:</dt>
<dd>
<if test="gender_set:|:$f->value">
	<if test="male:|:$f->value == 'm'">
		<img src='{$this->settings['img_url']}/profile/male.png' alt='{$this->lang->words['js_gender_male']}' /> {$this->lang->words['js_gender_male']}
	</if>
	
	<if test="female:|:$f->value == 'f'">
		<img src='{$this->settings['img_url']}/profile/female.png' alt='{$this->lang->words['js_gender_female']}' /> {$this->lang->words['js_gender_female']}
	</if>
	
	<if test="nottelling:|:$f->value =='u'">
		<img src='{$this->settings['img_url']}/profile/mystery.png' alt='{$this->lang->words['js_gender_mystery']}' /> {$this->lang->words['js_gender_mystery']}
	</if>
<else />
	{$this->lang->words['m_no_gender']}
</if>
</dd>]]></template_content>
      <template_name>customField__gender</template_name>
      <template_data>$f</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<if test="$f->parsed != ''">
	<dt>{$f->raw_data['pf_title']}:</dt>
	<dd>
		<if test="genericIsArray:|:is_array($f->parsed)">
			{parse expression="implode( '<br />', $f->parsed )"}
		<else />
			{$f->parsed}
		</if>
	</dd>
</if>]]></template_content>
      <template_name>customField__generic</template_name>
      <template_data>$f</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<if test="$this->request['module']=='ajax'">
	<h3>{$this->lang->words['dname_window_title']} {$member_name}</h3>
<else />
	<h3 class='maintitle'>{$this->lang->words['dname_window_title']} {$member_name}</h3>
</if>
<table class='ipb_table'>
	<tr class='header'>
		<th scope='col' style='width: 33%'>{$this->lang->words['dname_name_from']}</th>
		<th scope='col' style='width: 33%'>{$this->lang->words['dname_name_to']}</th>
		<th scope='col' style='width: 33%'>{$this->lang->words['dname_date']}</th>
	</tr>
	<if test="hasDnameHistory:|:is_array($records) AND count($records)">
		{parse striping="dname" classes="row1,row2"}
    	<foreach loop="records:$records as $row">
		<tr class='{parse striping="dname"}'>
		 	<td>{$row['dname_previous']}</td>
		 	<td><strong>{$row['dname_current']}</strong></td>
		 	<td class='altrow'>{parse date="$row['dname_date']" format="short"}</td>
		</tr>
		</foreach>
	<else />
		<tr>
			<td colspan='3' class='no_messages'>{$this->lang->words['dname_no_history']}</td>
		</tr>
    </if>
</table>]]></template_content>
      <template_name>dnameWrapper</template_name>
      <template_data><![CDATA[$member_name="",$records=array()]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<if test="friendIframeWrapper:|:$showWrapper">
		<div class='friend_list'>
	</if>
		<h3 class='bar'>Friends</h3>
		<if test="friendIframeLoop:|:is_array($friends) and count($friends)">
			<ul>
			<foreach loop="friendsIframe:$friends as $friend">
				<li>
					<a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_display_name_short']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' ><img src='{$friend['pp_thumb_photo']}' width='{$friend['pp_thumb_width']}' height='{$friend['pp_thumb_height']}' alt='Photo' class='photo' /></a><br />
					<span class='name'><a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'>{$friend['members_display_name_short']}</a> {parse template="user_popup" group="global" params="$friend['member_id'], $friend['members_seo_name']"}</span>
				</li>
			</foreach>
			</ul>
		<else />
			<p>
				<em>{$member['members_display_name']} {$this->lang->words['no_friends_yet']}</em>
			</p>
		</if>
	<if test="friendIframeEndWrapper:|:$showWrapper">
		</div>
	</if>]]></template_content>
      <template_name>friendsIframe</template_name>
      <template_data>$member, $friends, $showWrapper=false</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[{parse js_module="friends"}
<h2>{$this->lang->words['m_friends_list']}</h2>
<if test="friendListPages:|:$pages">
	<div class='topic_controls'>
		$pages
	</div>
</if>
<ul class='tab_bar no_title'>
	<if test="tabIsList:|:$this->request['tab'] == 'list' || !$this->request['tab']">
		<li class='active'><strong>{$this->lang->words['m_friends_list']}</strong></li>
		<li><a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=list&amp;tab=pending" base="public"}' title='{$this->lang->words['m_friends_pending']}'>{$this->lang->words['m_friends_pending']}</a></li>
	</if>
	<if test="tabIsPending:|:$this->request['tab'] == 'pending'">
		<li><a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=list&amp;tab=list" base="public"}' title='{$this->lang->words['m_friends_list']}'>{$this->lang->words['m_friends_list']}</a></li>
		<li class='active'><strong>{$this->lang->words['m_friends_pending']}</strong></li>
	</if>
</ul>
<if test="hasFriendsList:|:is_array($friends) and count($friends) && $this->settings['friends_enabled']">
	{parse striping="memberStripe" classes="row1,row2"}
	<ul class='members'>
	<foreach loop="friendsList:$friends as $friend">
		<if test="loopOnPending:|:$this->request['tab'] == 'pending'">
			<li id='member_id_{$friend['member_id']}' class='general_box clear member_entry {parse striping="memberStripe"}'>
				<h3 class='bar'><a href='{parse url="showuser={$friend['friends_member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'>{$friend['members_display_name']}</a>{parse template="user_popup" group="global" params="$friend['member_id'],$friend['members_seo_name']"}</h3>
				<a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'><img src='{$friend['pp_thumb_photo']}' width='{$friend['pp_thumb_width']}' height='{$friend['pp_thumb_height']}' alt="{$friend['members_display_name']}{$this->lang->words['users_photo']}" class='photo' /></a>	
			
				<dl class='info'>
					<dt class='clear'>{$this->lang->words['m_member_since']}</dt>
					<dd>{parse date="$friend['joined']" format="short"}</dd>
					<dt class='clear'>{$this->lang->words['m_group']}</dt>
					<dd>{$friend['_group_formatted']}</dd>
					<dt class='clear'>{$this->lang->words['m_posts']}</dt>
					<dd>{parse format_number="$friend['posts']"}</dd>
					<dt class='clear'>{$this->lang->words['m_last_active']}</dt>
					<dd>{parse date="$friend['last_activity']" format="short"}</dd>
				</dl>
				
				<ul class='user_controls clear'>
					<li class='positive'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=moderate&amp;pp_option=approve&amp;pp_friend_id[{$friend['member_id']}]=1&amp;md5check={$this->member->form_hash}" base="public"}' title='Approve'>{parse replacement="approve"} {$this->lang->words['approve_request']}</a></li>
					<li class='negative'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=moderate&amp;pp_option=delete&amp;pp_friend_id[{$friend['member_id']}]=1&amp;md5check={$this->member->form_hash}" base="public"}' title='Deny'>{parse replacement="deny"} {$this->lang->words['deny_request']}</a></li>
				</ul>
				<if test="friendListRate:|:$this->settings['pp_allow_member_rate']">
					<p class='rating'> 
						<if test="friendListRate1:|:$friend['pp_rating_real'] >= 1">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="friendListRate2:|:$friend['pp_rating_real'] >= 2">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="friendListRate3:|:$friend['pp_rating_real'] >= 3">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="friendListRate4:|:$friend['pp_rating_real'] >= 4">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="friendListRate5:|:$friend['pp_rating_real'] >= 5">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if>
					</p>
				</if>
				
				<if test="friendListRep:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile']">
					<if test="friendListRepPos:|:$friend['pp_reputation_points'] > 0">
						<p class='reputation positive'>
					</if>
					<if test="friendListRepNeg:|:$friend['pp_reputation_points'] < 0">
						<p class='reputation negative'>
					</if>
					<if test="friendListRepZero:|:$friend['pp_reputation_points'] == 0">
						<p class='reputation zero'>
					</if>
							<span class='number'>{$this->lang->words['m_reputation']} {$friend['pp_reputation_points']}</span>
						</p>
				</if>						
			</li>
		<else />
			<li id='member_id_{$friend['friends_friend_id']}' class='general_box clear member_entry {parse striping="memberStripe"}'>
				<h3 class='bar'><a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'>{$friend['members_display_name']}</a>{parse template="user_popup" group="global" params="$friend['member_id'],$friend['members_seo_name']"}</h3>
				<a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'><img src='{$friend['pp_thumb_photo']}' width='{$friend['pp_thumb_width']}' height='{$friend['pp_thumb_height']}' alt="{$friend['members_display_name']}{$this->lang->words['users_photo']}" class='photo' /></a>	
			
				<dl class='info'>
					<dt class='clear'>{$this->lang->words['m_member_since']}</dt>
					<dd>{parse date="$friend['joined']" format="short"}</dd>
					<dt class='clear'>{$this->lang->words['m_group']}</dt>
					<dd>{$friend['_group_formatted']}</dd>
					<dt class='clear'>{$this->lang->words['m_posts']}</dt>
					<dd>{parse format_number="$friend['posts']"}</dd>
					<dt class='clear'>{$this->lang->words['m_last_active']}</dt>
					<dd>{parse date="$friend['last_activity']" format="short"}</dd>
				</dl>
				
				<ul class='user_controls clear'>
					<if test="friendListIsMember:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $friend['friends_friend_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
						<if test="friendListIsFriend:|:IPSMember::checkFriendStatus( $friend['friends_friend_id'] )">
							<li class='mini_friend_toggle is_friend' id='friend_profile_{$friend['friends_friend_id']}'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=remove&amp;member_id={$friend['friends_friend_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='Remove Friend'>{parse replacement="remove_friend"}</a></li>
						<else />
							<li class='mini_friend_toggle is_not_friend' id='friend_profile_{$friend['friends_friend_id']}'><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=add&amp;member_id={$friend['friends_friend_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='Add as friend'>{parse replacement="add_friend"}</a></li>								
						</if>
					</if>
					<if test="friendListSendPm:|:$this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' )">
						<li class='pm_button' id='pm_xxx_{$friend['friends_friend_id']}'><a href='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$friend['friends_member_id']}" base="public"}' title='{$this->lang->words['pm_this_member']}'>{parse replacement="send_msg"}</a></li>
					</if>
					<li><a href='{parse url="app=core&amp;module=search&amp;do=user_posts&amp;mid={$friend['friends_friend_id']}&amp;view_by_title=1&amp;search_filter_app[forums]=1" base="public"}'>{parse replacement="find_posts_link"} {$this->lang->words['find_topics']}</a></li>
					<li><a href='{parse url="app=core&amp;module=search&amp;do=user_posts&amp;mid={$friend['friends_friend_id']}<if test="friendListSearchType:|:! in_array( $this->settings['search_method'], array( 'traditional', 'sphinx' ) )">&amp;search_filter_app[forums]=1</if>" base="public"}'>{parse replacement="find_posts_link"} {$this->lang->words['find_posts']}</a></li>
					<if test="friendListBlog:|:$friend['has_blog'] AND IPSLib::appIsInstalled( 'blog' )">
						<li><a href='{parse url="app=blog&amp;module=display&amp;section=blog&amp;mid={$friend['friends_friend_id']}" base="public"}' title='{$this->lang->words['view_blog']}'>{parse replacement="blog_link"}</a></li>
					</if>
					<if test="friendListGallery:|:$friend['has_gallery'] AND IPSLib::appIsInstalled( 'gallery' )">
						<li><a href='{parse url="app=gallery&amp;module=user&amp;section=user&amp;user={$friend['friends_friend_id']}" base="public"}' title='{$this->lang->words['view_gallery']}'>{parse replacement="gallery_link"}</a></li>
					</if>
				</ul>
				<if test="friendListAllowRate:|:$this->settings['pp_allow_member_rate']">
					<p class='rating'> 
						<if test="friendListRateApp1:|:$friend['pp_rating_real'] >= 1">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="friendListRateApp2:|:$friend['pp_rating_real'] >= 2">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="friendListRateApp3:|:$friend['pp_rating_real'] >= 3">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="friendListRateApp4:|:$friend['pp_rating_real'] >= 4">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="friendListRateApp5:|:$friend['pp_rating_real'] >= 5">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if>
					</p>
				</if>
				
				<if test="friendListAppRep:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile']">
					<if test="friendListAppRepPos:|:$friend['pp_reputation_points'] > 0">
						<p class='reputation positive'>
					</if>
					<if test="friendListAppRepNeg:|:$friend['pp_reputation_points'] < 0">
						<p class='reputation negative'>
					</if>
					<if test="friendListAppRepZero:|:$friend['pp_reputation_points'] == 0">
						<p class='reputation zero'>
					</if>
							<span class='number'>{$this->lang->words['m_reputation']} {$friend['pp_reputation_points']}</span>
						</p>
				</if>						
			</li>
		</if>
		
	</foreach>
	</ul>
<else />
	<p class='no_messages'>
		<if test="friendListNone:|:$this->request['tab'] == 'pending'">
			{$this->lang->words['no_friends_awaiting_approval']}
		<else />
			{$this->lang->words['no_friends_to_display']}
		</if>
	</p>
</if>
<if test="friendListPagesBottom:|:$pages">
	<div class='topic_controls'>
		$pages
	</div>
</if>]]></template_content>
      <template_name>friendsList</template_name>
      <template_data>$friends, $pages</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[{parse js_module="rating"}
{parse js_module="profile"}
<script type='text/javascript'>
//<!#^#|CDATA|
	ipb.profile.viewingProfile = parseInt( {$member['member_id']} );
	ipb.templates['remove_friend'] = "<a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=remove&amp;member_id={$member['member_id']}" base="public"}' title='{$this->lang->words['remove_friend']}'><img src='{$this->settings['img_url']}/user_delete.png' alt='{$this->lang->words['remove_friend']}' /> {$this->lang->words['remove_as_friend']}</a>";
	ipb.templates['add_friend'] = "<a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=add&amp;member_id={$member['member_id']}" base="public"}' title='{$this->lang->words['add_friend']}'><img src='{$this->settings['img_url']}/user_add.png' alt='{$this->lang->words['add_friend']}' /> {$this->lang->words['add_friend']}</a>";
	ipb.templates['edit_status'] = "<span id='edit_status'><input type='text' class='input_text' style='width: 60%' id='updated_status' maxlength='150' /> <input type='submit' value='{$this->lang->words['save']}' class='input_submit' id='save_status' /> &nbsp;<a href='#' id='cancel_status' class='cancel' title='{$this->lang->words['cancel']}'>{$this->lang->words['cancel']}</a></span>";
	
	<if test="friendsEnabled:|:$this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
		<if test="jsIsFriend:|:IPSMember::checkFriendStatus( $member['member_id'] )">
			ipb.profile.isFriend = true;
		<else />
			ipb.profile.isFriend = false;
		</if>
	</if>
//|#^#]>
</script>
<!--SKINNOTE: Added report link - feel free to change around -->
<if test="thisIsNotUs:|:($this->memberData['member_id'] && $member['member_id'] != $this->memberData['member_id'])">
	<ul class='topic_buttons'>
		<li><a href='{parse url="app=core&amp;module=reports&amp;section=reports&amp;rcom=profiles&amp;member_id={$member['member_id']}" base="public"}'>{parse replacement="user_icon"} {$this->lang->words['report_member']}</a></li>
	</ul>
</if>
	
<if test="canEditUser:|:($this->memberData['member_id'] && $member['member_id'] == $this->memberData['member_id']) || $this->memberData['g_is_supmod'] == 1">
	<!--SKINNOTE: If you are a mod and are looking at your own profile, you get two edit links - not really needed -->
	<ul class='topic_buttons'>
		<if test="weAreSupmod:|:$this->memberData['g_is_supmod'] == 1 && $member['member_id'] != $this->memberData['member_id']">
			<li><a href='{parse url="app=forums&amp;module=moderate&amp;section=moderate&amp;do=editmember&amp;auth_key={$this->member->form_hash}&amp;member={$member['member_id']}" base="public"}'>{parse replacement="user_icon"} {$this->lang->words['supmod_edit_member']}</a></li>
		</if>
		<if test="weAreOwner:|:$this->memberData['member_id'] && $member['member_id'] == $this->memberData['member_id']">
			<li><a href='{parse url="app=core&amp;module=usercp&amp;tab=members" base="public"}'>{parse replacement="user_edit_icon"} {$this->lang->words['edit_profile']}</a></li>
		</if>		
	</ul>
</if>
<div class='vcard'>
	<h2 class='maintitle'>
		<span class='left'><span class="fn nickname">{$member['members_display_name']}</span>{$this->lang->words['m_profile_title']}</span>
		<if test="allowRate:|:$this->settings['pp_allow_member_rate']">
			<span class='rating'>
				<if test="noRateYourself:|:$this->memberData['member_id'] == $member['member_id'] || !$this->memberData['member_id']">
					{$this->lang->words['m_rating']} 
						<if test="rate1:|:$member['pp_rating_real'] >= 1">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate2:|:$member['pp_rating_real'] >= 2">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate3:|:$member['pp_rating_real'] >= 3">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate4:|:$member['pp_rating_real'] >= 4">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><if test="rate5:|:$member['pp_rating_real'] >= 5">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if><span id='rating_text' class='desc'></span>
				<else />
					{$this->lang->words['m_rating']} 
						<a href='#' id='user_rate_1' title='{$this->lang->words['m_rate_1']}'><if test="rated1:|:$member['pp_rating_real'] >= 1">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a><a href='#' id='user_rate_2' title='{$this->lang->words['m_rate_2']}'><if test="rated2:|:$member['pp_rating_real'] >= 2">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a><a href='#' id='user_rate_3' title='{$this->lang->words['m_rate_3']}'><if test="rated3:|:$member['pp_rating_real'] >= 3">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a><a href='#' id='user_rate_4' title='{$this->lang->words['m_rate_4']}'><if test="rated4:|:$member['pp_rating_real'] >= 4">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a><a href='#' id='user_rate_5' title='{$this->lang->words['m_rate_5']}'><if test="rated5:|:$member['pp_rating_real'] >= 5">{parse replacement="rate_on"}<else />{parse replacement="rate_off"}</if></a> <span id='rating_text' class='desc'></span>
					<script type='text/javascript'>
						rating = new ipb.rating( 'user_rate_', { 
											url: '{parse url="app=members&module=ajax&section=rate&member_id={$member['member_id']}" base="public"}&md5check=' + ipb.vars['secure_hash'],
											cur_rating: <if test="hasrating:|:isset($member['pp_rating_real'])">{$member['pp_rating_real']}<else />0</if>,
											rated: null,
											allow_rate: ( {$this->memberData['member_id']} != 0 ) ? 1 : 0,
											show_rate_text: false
										  } );
					</script>
				</if>
			</span>
		</if>		
	</h2>
	
	<div id='profile_overview' class='left'>
		<div class='personal_info clear general_box alt'>
			<img class="photo" src='{$member['pp_main_photo']}' alt="{$member['members_display_name']}{$this->lang->words['users_photo']}"  />
			<if test="haswarn:|:$member['warn_percent'] !== NULL">
				<div class='warn_panel clear rounded'>
					<if test="canwarn:|:$member['can_edit_warn']">
						<a href='{parse url="app=members&amp;module=warn&amp;section=warn&amp;type=add&amp;mid={$member['member_id']}&amp;t=0&amp;st=0" base="public"}' title='{$this->lang->words['warn_increase']}'><img src='{$this->settings['img_url']}/warn_add.gif' alt='{$this->lang->words['add']}' class='warn_edit up' /></a><a href='{parse url="app=members&amp;module=warn&amp;section=warn&amp;type=minus&amp;mid={$member['member_id']}&amp;t=0&amp;st=0" base="public"}' title='{$this->lang->words['warn_decrease']}'><img src='{$this->settings['img_url']}/warn_minus.gif' alt='{$this->lang->words['minus']}' class='warn_edit down'  /></a>
					</if>
						<!-- SKINNOTE: Has link to open AJAX popup warn logs  -->
						<strong><a href='{parse url="app=members&amp;module=warn&amp;section=warn&amp;do=view&amp;mid={$member['member_id']}" base="public"}' id='warn_link_xxx_{$member['member_id']}' title='{$this->lang->words['warn_view_history']}' class='warn_link'>{$this->lang->words['warn_status']}</a></strong>
					<if test="highwarn:|:$member['warn_percent'] >= 80">
						<p class='progress_bar user_warn limit' title='{$this->lang->words['warn_level']} {$member['warn_percent']}%'>
					<else />
						<p class='progress_bar user_warn' title='{$this->lang->words['warn_level']} {$member['warn_percent']}%'>
					</if>
							<span style='width: {$member['warn_percent']}%'><span>{$this->lang->words['warn_level']} {$member['warn_percent']}%</span></span>
						</p>
				</div>
			</if>
			<ul>
				<if test="authorspammer:|:$member['spamStatus'] !== NULL && $member['member_id'] != $this->memberData['member_id']">
					<if test="authorspammerinner:|:$member['spamStatus'] === TRUE">
						<li><a href='#' onclick="return ipb.global.toggleFlagSpammer({$member['member_id']}, false)">{parse replacement="spammer_on"} {$this->lang->words['spm_on']}</a></li>
					<else />
						<li><a href='{$this->settings['base_url']}&amp;app=forums&amp;module=moderate&amp;section=moderate&amp;do=setAsSpammer&amp;member_id={$member['member_id']}&amp;auth_key={$this->member->form_hash}' onclick="return ipb.global.toggleFlagSpammer({$member['member_id']}, true)">{parse replacement="spammer_off"} {$this->lang->words['spm_off']}</a></li>
					</if>
				</if>
				<if test="noFriendYourself:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $member['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
					<li id='friend_toggle'>
						<if test="isFriend:|:IPSMember::checkFriendStatus( $member['member_id'] )">
							<a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=remove&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['remove_friend']}'><img src='{$this->settings['img_url']}/user_delete.png' alt='{$this->lang->words['remove_friend']}' /> {$this->lang->words['remove_as_friend']}</a>
						<else />
							<a href='{parse url="app=members&amp;section=friends&amp;module=profile&amp;do=add&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['add_friend']}'><img src='{$this->settings['img_url']}/user_add.png' alt='{$this->lang->words['add_friend']}' /> {$this->lang->words['add_me_friend']}</a>
						</if>
					</li>
				</if>
				<if test="pmlink:|:($member['member_id'] != $this->memberData['member_id']) AND $this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' )">
					<li class='pm_button' id='pm_xxx_{$member['member_id']}'><a href='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$member['member_id']}" base="public"}' title='{$this->lang->words['pm_this_member']}'>{parse replacement="send_msg"} {$this->lang->words['send_message']}</a></li>
				</if>
				<if test="ignoreuser:|:$member['member_id'] != $this->memberData['member_id']">
					<!--<li id='ignore_toggle'>
						<if test="isignored:|:IPSMember::checkIgnoredStatus( $member['member_id'] )">
							<a href='#' title='{$this->lang->words['unignore']}'>{parse replacement="ignore_user"} {$this->lang->words['unignore']}</a>
						<else />
							<a href='#' title='{$this->lang->words['ignore']}'>{parse replacement="ignore_user"} {$this->lang->words['ignore']}</a>
						</if>
					</li>-->
				</if>
				<li><a href='{parse url="app=core&amp;module=search&amp;do=user_posts&amp;mid={$member['member_id']}&amp;search_filter_app[forums]=1&amp;view_by_title=1" base="public"}'>{parse replacement="find_topics_link"} {$this->lang->words['find_topics']}</a></li>
				<li><a href='{parse url="app=core&amp;module=search&amp;do=user_posts&amp;mid={$member['member_id']}<if test="findpostsSearchType:|:! in_array( $this->settings['search_method'], array( 'traditional', 'sphinx' ) )">&amp;search_filter_app[forums]=1</if>" base="public"}'>{parse replacement="find_posts_link"} {$this->lang->words['find_posts']}</a></li>
				<if test="dnameHistory:|:$this->memberData['g_mem_info'] && $this->settings['auth_allow_dnames']">
					<li id='dname_history'><a href='{parse url="app=members&amp;module=profile&amp;section=dname&amp;id={$member['member_id']}" base="public"}' title='{$this->lang->words['view_dname_history']}'>{parse replacement="display_name"} {$this->lang->words['display_name_history']}</a></li>
				</if>
			</ul>
		</div>
		<if test="ourReputation:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile']">
			<if test="RepPositive:|:$member['pp_reputation_points'] > 0">
				<div class='reputation positive'>
			</if>
			<if test="RepNegative:|:$member['pp_reputation_points'] < 0">
				<div class='reputation negative'>
			</if>
			<if test="RepZero:|:$member['pp_reputation_points'] == 0">
				<div class='reputation zero'>
			</if>
					<span class='number'>{$this->lang->words['m_reputation']} {$member['pp_reputation_points']}</span>
					<if test="RepText:|:$member['author_reputation'] && $member['author_reputation']['text']">
						<span class='title'>{$member['author_reputation']['text']}</span>
					</if>
					<if test="RepImage:|:$member['author_reputation'] && $member['author_reputation']['image']">
						<span class='image'><img src='{$member['author_reputation']['image']}' alt='{$this->lang->words['m_reputation']}' /></span>
					</if>
				</div>
		</if>
		<div class='info'>
			<dl>
				<dt>{$this->lang->words['m_group']}</dt>
				<dd>{$member['g_title']}</dd>
				<dt>{$this->lang->words['m_posts']}</dt>
				<dd <if test="showProfileStats:|:!$this->settings['disable_profile_stats']">title='{$member['_total_pct']}% {$this->lang->words['total_percent']}'</if>>{parse format_number="$member['posts']"}<if test="showProfileStats2:|:!$this->settings['disable_profile_stats']"> ({$member['_posts_day']} {$this->lang->words['posts_per_day']})</if></dd>
				<if test="favoriteForum:|:!$this->settings['disable_profile_stats'] AND $member['favorite_id']">
					<dt>{$this->lang->words['m_active_in']}</dt>
					<dd title='{$member['_fav_percent']}% {$this->lang->words['fav_percent']}'>
						<a href='{parse url="showforum={$member['favorite_id']}" seotitle="{$this->registry->class_forums->forum_by_id[ $member['favorite_id'] ]['name_seo']}" template="showforum" base="public"}'>{$this->registry->class_forums->forum_by_id[ $member['favorite_id'] ]['name']}</a> ({$member['_fav_posts']} {$this->lang->words['fav_posts']})
					</dd>
				</if>
				<dt>{$this->lang->words['m_member_since']}</dt>
				<dd>{parse date="$member['joined']" format="joined"}</dd>
				<dt>{$this->lang->words['m_profile_views']}</dt>
				<dd>{parse format_number="$member['members_profile_views']"}</dd>
				<dt>{$this->lang->words['m_last_active']}</dt>
				<dd><if test="memberOnline:|:$member['_online']">{parse replacement="user_online"}<else />{parse replacement="user_offline"}</if> {$member['_last_active']}</dd>
				<dt>{$this->lang->words['m_currently']}</dt>
				<dd><if test="onlineDetails:|:$member['_online']">
						{$member['online_extra']}
					<else />
						{$this->lang->words['online_offline']}
					</if>
				</dd>
			</dl>
		</div>
		
		<if test="pcfieldsOther:|:$member['custom_fields']">
			<foreach loop="pcfieldsOtherLoop:$member['custom_fields'] as $group => $mdata">
				<if test="pcfieldsOtherLoopCheck:|:$group != 'profile_info' AND $group != 'contact'">
					<if test="pcfieldsOtherLoopCheck2:|:is_array( $member['custom_fields'][ $group ] ) AND count( $member['custom_fields'][ $group ] )">
						<div class='other_contact clearfix'>
							<div class='general_box clearfix row2' id='custom_fields_{$group}'>
								<h3 class='bar'>{$member['custom_field_groups'][ $group ]}</h3>
								<dl>
									<foreach loop="pcfieldsOtherLoopCheckInner:$member['custom_fields'][ $group ] as $key => $value">
										{$value}
									</foreach>
								</dl>
							</div>
						</div>
					</if>
				</if>
			</foreach>
		</if>
		
		<if test="latest_visitors:|:$member['pp_setting_count_visitors']">
			<div class='general_box alt' id='latest_visitors'>
				<h3 class='bar'>{$this->lang->words['latest_visitors']}</h3>
				<if test="has_visitors:|:is_array( $visitors ) && count( $visitors )">
					{parse striping="visitors" classes="row1,row2"}
					<ul>
						<foreach loop="latest_visitors_loop:$visitors as $friend">
						<li class='{parse striping="visitors"}'>
							<a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' ><img src='{$friend['pp_mini_photo']}' width='{$friend['pp_mini_width']}' height='{$friend['pp_mini_height']}' alt='{$this->lang->words['photo']}' class='photo' /></a><span class='name'><a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'>{$friend['members_display_name_short']}</a></span>{parse template="user_popup" group="global" params="$friend['member_id'], $friend['members_seo_name']"}<br />
							<span class='desc'>{$friend['_visited_date']}</span>
						</li>				
						</foreach>
					</ul>
				<else />
					<p class='no_messages'>{$this->lang->words['no_latest_visitors']}</p>
				</if>
			</div>
		</if>
	</div>
	<div id='main_profile_body' class='right'>
		<div class='message user_status in_profile' id='status_box'>
			{parse replacement="user_status"}&nbsp;&nbsp; <span class='user'><strong>{$member['members_display_name']}</strong></span> <span class='status' id='status_holder'><if test="memberstatus:|:$member['pp_status']">{$member['pp_status']}<else /><em>{$this->lang->words['not_set_status']}</em></if></span>
			
			<if test="updateStatus:|:$member['member_id'] == $this->memberData['member_id'] AND ! $this->memberData['gbw_no_status_update']">
				<form id='update_status_form' action='{$this->settings['base_url']}app=members&amp;module=profile&amp;section=status' method='post'>
					<fieldset>
					<input type='hidden' name='k' value='{$this->member->form_hash}' />
						{$this->lang->words['update_to']} <input type='text' class='text' name='new_status' /> <input type='submit' value='{$this->lang->words['update']}' />
					</fieldset>
				</form>
			</if>
		</div>
		<br />
		
		<div class='recent_activity'>
			<ol class='tab_bar no_title mini'>
				<foreach loop="tabs:$tabs as $tab">
					<li id='tab_link_{$tab['plugin_key']}' class='tab_toggle <if test="tabactive:|:$tab['plugin_key'] == $default_tab">active</if>'><a href='{parse url="showuser={$member['member_id']}&amp;tab={$tab['plugin_key']}" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view']} {$tab['_lang']}'>{$tab['_lang']}</a></li>
				</foreach>
			</ol>
			<div id='tab_content' class='row1 profile_pane'>
				<div id='tab_{$default_tab}'>
					{$default_tab_content}
				</div>
			</div>
		</div>
		<script type='text/javascript'>
			ipb.profile.activeTab = '$default_tab';
		</script>
	
		<div class='about_contact'>
			<div class='about_info left general_box row2'>
				<h3 class='bar'>{$this->lang->words['my_info']}</h3>
				<dl>
					<if test="member_title:|:$member['title'] != ''">
						<dt>{$this->lang->words['m_member_title']}</dt>
						<dd>{$member['title']}</dd>
					</if>
					<dt>{$this->lang->words['m_age_prefix']}</dt>
					<if test="member_age:|:$member['_age'] > 0">
						<dd>{$member['_age']} {$this->lang->words['m_years_old']}</dd>
					<else />
						<dd>{$this->lang->words['m_age_unknown']}</dd>
					</if>
					<dt>{$this->lang->words['m_birthday_prefix']}</dt>
					<if test="member_birthday:|:$member['bday_day']">
						<!-- SKINNOTE: We should use the localized date formatting for this -->
						<dd>{$member['_bday_month']} {$member['bday_day']}<if test="member_bday_year:|:$member['bday_year']">, {$member['bday_year']}</if></dd>
					<else />
						<dd>{$this->lang->words['m_bday_unknown']}</dd>
					</if>
					<if test="pcfields:|:$member['custom_fields']['profile_info'] != """>
						<foreach loop="pcfieldsLoop:$member['custom_fields']['profile_info'] as $key => $value">
							{$value}
						</foreach>
					</if>
				</dl>
			</div>
	
			<div class='contact_info right general_box row2'>
				<h3 class='bar'>{$this->lang->words['contact_info']}</h3>
				<dl>
					
					<dt>{$this->lang->words['m_email']}</dt>
					<dd class='clearfix'>
						<if test="isadmin:|:$this->memberData['g_access_cp'] == 1">
							<a href='mailto:{$member['email']}'>{$member['email']}</a>
						<else />	
							<if test="member_email:|:!$member['hide_email']">
								<a href='{parse url="app=members&amp;module=messaging&amp;section=contact&amp;do=Mail&amp;MID={$member['member_id']}" base="public"}'>{$this->lang->words['click_to_email']}</a>
							<else />
								<em>{$this->lang->words['private']}</em>
							</if>
						</if>						
					</dd>	
					<if test="member_contact_fields:|:is_array( $member['custom_fields']['contact'])">
						<foreach loop="cfields:$member['custom_fields']['contact'] as $field">
							{$field}
						</foreach>
					</if>
				</dl>
			</div>
		</div>
	<if test="friends:|:$this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends'] AND $member['pp_setting_count_friends']">
		<div class='friend_list clear' id='friend_list'>
			<h3 class='bar'>{$this->lang->words['m_title_friends']}</h3>
			<if test="friends_loop:|:is_array($friends) and count($friends)">
				<ul class='clearfix'>
				<foreach loop="friends:$friends as $friend">
					<li>
						<a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}' ><img src='{$friend['pp_thumb_photo']}' width='{$friend['pp_thumb_width']}' height='{$friend['pp_thumb_height']}' alt='{$this->lang->words['photo']}' class='photo' /></a><br />
						<span class='name'><a href='{parse url="showuser={$friend['member_id']}" seotitle="{$friend['members_seo_name']}" template="showuser" base="public"}' title='{$this->lang->words['view_profile']}'>{$friend['members_display_name_short']}</a> {parse template="user_popup" group="global" params="$friend['member_id'], $friend['members_seo_name']"}</span>
					</li>
				</foreach>
				</ul>
				<if test="total_friends:|:$member['_total_approved_friends'] > $member['_total_displayed_friends']">
				<p class='clear'>
					<em>{$this->lang->words['showing_50_rand_friends']} {$member['_total_approved_friends']}</em>
					<if test="showfriends_link:|:$member['_total_approved_friends'] > 50">
						&nbsp;(<strong><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=view&amp;member_id={$member['member_id']}" base="public"}' id='view-all-friends'>{$this->lang->words['friends_view_all']}</a></strong>)
					</if>
				</p>
				</if>
				
			<else />
				<p>
					<em>{$member['members_display_name']} {$this->lang->words['no_friends_yet']}</em>
				</p>
			</if>
		</div>
	</if>
	
		<if test="comments:|:$member['pp_setting_count_comments'] > 0">
			<div class='comments' id='comment_wrap'>
				<h3 class='bar'>{$this->lang->words['m_title_comments']}</h3>
				<if test="leave_comment:|:$this->memberData['member_id']">
					<form id='commentForm' action='{$this->settings['base_url']}app=members&amp;module=profile&amp;section=comments&amp;do=add_new_comment' method='post'>
						<fieldset>
							<input type='hidden' name='member_id' value='{$member['member_id']}' />
							<div id='post_comment' class='clear row2'>
								<img src='{$this->memberData['pp_mini_photo']}' width='{$this->memberData['pp_mini_width']}' height='{$this->memberData['pp_mini_height']}' alt='{$this->lang->words['your_photo']}' class='photo left clear' />
								<textarea class='input_textarea' cols='50' rows='3' id='comment_text' name='comment_text'></textarea>
								<br />
								<input type='submit' class='clear input_submit' value='{$this->lang->words['comment_submit_post']}' id='comment_submit' />
								<span class='desc' id='char_remain_wrap' style='display: none'>{$this->lang->words['chars_remaining']} <span id='char_remain'>400</span></span>
								<script type='text/javascript'>
									$('char_remain_wrap').show();
									ipb.vars['max_comment_length'] = 400;
								</script>
							</div> 
						</fieldset>
					</form>
					<br />
				</if>
				<if test="comments_html:|:$comments">
					$comments
				<else />
					<p>
						<em>{$member['members_display_name']} {$this->lang->words['no_profile_comments']}</em>
					</p>
				</if>
			</div>
		</if>
	</div>
</div>
{parse template="include_highlighter" group="global" params=""}]]></template_content>
      <template_name>profileModern</template_name>
      <template_data><![CDATA[$tabs=array(), $member=array(), $comments="", $friends=array(), $visitors=array(), $default_tab='posts', $default_tab_content='', $fields=null]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div class='vcard userpopup'>
	<h3><a href="{parse url="showuser={$member['member_id']}" seotitle="{$member['members_seo_name']}" template="showuser" base="public"}" class="fn nickname url">{$member['members_display_name']}</a></h3>
	<div>
		<if test="cardStatus:|:$member['pp_status']">
			<p class='message user_status'>{parse replacement="user_status"}&nbsp; <strong>{$member['members_display_name']}</strong> {$member['pp_status']}</p>
		</if>
		<div class='info'>
			<img class='photo' src="{$member['pp_thumb_photo']}" alt="{$this->lang->words['get_photo']}" width='{$member['pp_thumb_width']}' height='{$member['pp_thumb_height']}' alt='photo' />
			<dl>
				<dt>{$this->lang->words['m_group']}</dt>
				<dd>{$member['g_title']}</dd>
				<dt>{$this->lang->words['m_posts']}</dt>
				<dd title='{$member['_posts_day']} {$this->lang->words['posts_per_day']}'>{parse format_number="$member['posts']"}</dd>
				<dt>{$this->lang->words['m_member_since']}</dt>
				<dd>{parse date="$member['joined']" format="joined"}</dd>
				<dt>{$this->lang->words['m_last_active']}</dt>
				<dd><if test="cardOnline:|:$member['_online']">{parse replacement="user_online"}<else />{parse replacement="user_offline"}</if> {$member['_last_active']}</dd>
				<dt>{$this->lang->words['m_currently']}</dt>
				<dd><if test="cardWhere:|:$member['_online']">
						{$member['online_extra']}
					<else />
						{$this->lang->words['online_offline']}
					</if>
				</dd>
				<if test="isadmin:|:$this->memberData['g_access_cp'] == 1">
					<dt>{$this->lang->words['m_email']}</dt>
					<dd><a href='mailto:{$member['email']}'>{$member['email']}</a></dd>
				</if>
			</dl>
		</div>
		
		<ul class='user_controls clear'>
			<if test="authorspammer:|:$member['spamStatus'] !== NULL && $member['member_id'] != $this->memberData['member_id']">
				<if test="authorspammerinner:|:$member['spamStatus'] === TRUE">
					<li><a href='#' title='{$this->lang->words['spm_on']}' onclick="return ipb.global.toggleFlagSpammer({$member['member_id']}, false)">{parse replacement="spammer_on"}</a></li>
				<else />
					<li><a title='{$this->lang->words['spm_off']}' href='{$this->settings['base_url']}&amp;app=forums&amp;module=moderate&amp;section=moderate&amp;do=setAsSpammer&amp;member_id={$member['member_id']}&amp;auth_key={$this->member->form_hash}' onclick="return ipb.global.toggleFlagSpammer({$member['member_id']}, true)">{parse replacement="spammer_off"}</a></li>
				</if>
			</if>
			<if test="cardFriend:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $member['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
				<if test="cardIsFriend:|:IPSMember::checkFriendStatus( $member['member_id'] )">
					<li><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=remove&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['remove_friend']}'>{parse replacement="remove_friend"}</a></li>
				<else />
					<li><a href='{parse url="app=members&amp;module=profile&amp;section=friends&amp;do=add&amp;member_id={$member['member_id']}&amp;secure_key={$this->member->form_hash}" base="public"}' title='{$this->lang->words['add_friend']}'>{parse replacement="add_friend"}</a></li>								
				</if>
			</if>
			<if test="cardSendPm:|:$this->memberData['member_id'] AND $this->memberData['member_id'] != $member['member_id'] AND $this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' )">
				<li class='pm_button' id='pm_xxx_{$member['member_id']}'><a href='{parse url="app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$member['member_id']}" base="public"}' title='{$this->lang->words['pm_this_member']}'>{parse replacement="send_msg"}</a></li>
			</if>
			
			<li><a href='{parse url="app=core&amp;module=search&amp;do=user_posts&amp;mid={$member['member_id']}&amp;search_filter_app[forums]=1&amp;view_by_title=1" base="public"}' title='{$this->lang->words['find_topics']}'>{parse replacement="find_topics_link"}</a></li>		
			<li><a href='{parse url="app=core&amp;module=search&amp;do=user_posts&amp;mid={$member['member_id']}<if test="cardFindPostsLink:|:! in_array( $this->settings['search_method'], array( 'traditional', 'sphinx' ) )">&amp;search_filter_app[forums]=1</if>" base="public"}' title='{$this->lang->words['find_posts']}'>{parse replacement="find_posts_link"}</a></li>
			<if test="cardBlog:|:$member['has_blog'] AND IPSLib::appIsInstalled( 'blog' )">
				<li><a href='{parse url="app=blog&amp;module=display&amp;section=blog&amp;mid={$member['member_id']}" base="public"}' title='{$this->lang->words['view_blog']}'>{parse replacement="blog_link"}</a></li>
			</if>
			<if test="cardGallery:|:$member['has_gallery'] AND IPSLib::appIsInstalled( 'gallery' )">
				<li><a href='{parse url="app=gallery&amp;module=user&amp;section=user&amp;user={$member['member_id']}" base="public"}' title='{$this->lang->words['view_gallery']}'>{parse replacement="gallery_link"}</a></li>
			</if>
		</ul>
		
		
		<if test="cardRep:|:$this->settings['reputation_enabled'] && $this->settings['reputation_show_profile']">
			<if test="cardRepPos:|:$member['pp_reputation_points'] > 0">
				<div class='reputation positive'>
			</if>
			<if test="cardRepNeg:|:$member['pp_reputation_points'] < 0">
				<div class='reputation negative'>
			</if>
			<if test="cardRepZero:|:$member['pp_reputation_points'] == 0">
				<div class='reputation zero'>
			</if>
					<span class='number'>{$this->lang->words['m_reputation']} {$member['pp_reputation_points']}</span>
				</div>
		</if>
	</div>
</div>]]></template_content>
      <template_name>showCard</template_name>
      <template_data>$member, $download=0</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<if test="hasComments:|:is_array($comments) and count($comments)">
	<div id='comment_innerwrap' class='comment_wrap clearfix'>
		<div class='topic_controls<if test="!$this->memberData['member_id']"> no-form</if>'>
			{$links}
		</div>
		<ol id='comment_list' class='clear'>
		{parse striping="comments" classes="row1,off"}
		<foreach loop="comments:$comments as $comment">
			<if test="commentCheckId:|:$new_id == 0 || $comment['comment_id'] == $new_id">
				<li id='comment_id_{$comment['comment_id']}'>
					<div class='comment clearfix {parse striping="comments"} <if test="commentApproved:|:!$comment['comment_approved']"> moderated</if>'>
						<img src='{$comment['pp_thumb_photo']}' width='{$comment['pp_thumb_width']}' height='{$comment['pp_thumb_height']}' class='photo' alt='{$this->lang->words['photo']}' />
						<h4>
							<a href="{parse url="showuser={$comment['member_id']}" template="showuser" seotitle="{$comment['members_seo_name']}" base="public"}">{$comment['members_display_name']}</a>{parse template="user_popup" group="global" params="$comment['member_id'],$comment['members_seo_name']"}
						</h4>
						<span class='posted_date desc'>
							{$comment['_comment_date']}
						</span>
						<div id='comment_{$comment['comment_id']}' class='comment_content'>
							{$comment['comment_content']}
						</div>
						<if test="commentWeAreOwner:|:$this->memberData['member_id'] == $member['member_id'] OR $this->memberData['g_is_supmod']">
							<ul class='comment_options'>
								<li>
									<a href='{parse url="app=members&amp;module=profile&amp;section=comments&amp;do=delete&amp;comment_id={$comment['comment_id']}&amp;member_id={$member['member_id']}&amp;authKey={$this->member->form_hash}" base="public"}' title='{$this->lang->words['delete_this_comment']}' class='delete_comment'>{$this->lang->words['delete_comment_text']}</a>
								</li>
								<if test="commentApprovLink:|:! $comment['comment_approved']">
									<li>
										<a href='{parse url="app=members&amp;module=profile&amp;section=comments&amp;do=approve&amp;comment_id={$comment['comment_id']}&amp;member_id={$member['member_id']}&amp;authKey={$this->member->form_hash}" base="public"}' title='{$this->lang->words['approve_this_comment']}'>{$this->lang->words['m_approve']}</a>
									</li>
								</if>									
							</ul>
						</if>
					</div>
				</li>
			</if>
		</foreach>
		</ol>
		<div class='topic_controls'>
			{$links}
		</div>
	</div>
	<if test="$new_id != 0">
		<div class='topic_controls'>
			{$links}
		</div>
	</if>
</if>]]></template_content>
      <template_name>showComments</template_name>
      <template_data><![CDATA[$member, $comments=array(), $new_id=0, $return_msg='', $links='']]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div id='pp-iframe-wrap' class='pp-contentbox-back' style='overflow:auto'>
<form onsubmit='check_form()' action='{parse url="app=members&amp;section=comments&amp;module=profile&amp;do=save&amp;member_id={$member['member_id']}&amp;md5check={$this->member->form_hash}" base="public"}' method='POST'>
	<if test="hasIframeComments:|:is_array($comments) and count($comments)">
		<foreach loop="commentsIframe:$comments as $comment">
			<if test="iframeCommentApproved:|:$comment['comment_approved']">
				<div class='pp-contentbox-entry-noheight' id='pp-comment-entry-main-{$comment['comment_id']}'>
			<else />
				<div class='pp-contentbox-entry-noheight-mod' id='pp-comment-entry-main-{$comment['comment_id']}'>
			</if>
				<div class='pp-tiny-text'>
				<div class='pp-image-thumb-wrap-floatright'><img src='{$comment['pp_thumb_photo']}' width='{$comment['pp_thumb_width']}' height='{$comment['pp_thumb_height']}' alt='' /></div>
					<if test="iframeCommentMod:|:( $member['member_id'] == $this->memberData['member_id'] ) OR ( $this->memberData['g_is_supmod'] )">
						<!-- MOD CHECKBOX -->
						<input type='checkbox' class='input-checkbox' id="pp-checked-{$comment['comment_id']}" name="pp-checked[{$comment['comment_id']}]" value='1' onclick="parent.ips_personal_portal.toggle_comment_box('{$comment['comment_id']}', 1)" />
						<!-- / MOD CHECKBOX -->
					</if>
					{$comment['_pp_gender_image']} <strong><if test="iframeCommentMember:|:$comment['member_id']"><a href='{parse url="showuser={$comment['member_id']}" base="public" template="showuser" seotitle="{$comment['members_seo_name']}"}' target='_parent'></if>{$comment['members_display_name']}<if test="iframeEndMemberLink:|:$comment['member_id']"></a></if></strong>
					<br />
					{$comment['comment_content']}
					<br />
					<strong>{$comment['_comment_date']}</strong>
				</div>
			</div>
		</foreach>
		<div class='pp-contentbox-entry-noheight'>
			<div style='float:right'>
				<if test="iframeCommentsMulti:|:( $member['member_id'] == $this->memberData['member_id'] ) OR ( $this->memberData['g_is_supmod'] )">
					<select name='pp-moderation' id='pp-moderation'>
						<option value='approve'>{$this->lang->words['m_comment_app']}</option>
						<option value='unapprove'>{$this->lang->words['m_comment_unapp']}</option>
						<option value='delete'>{$this->lang->words['m_comment_delete']}</option>
					</select>
					<input type='submit' class='button' value='{$this->lang->words['m_go_button']}' />
				</if>
			</div>
			<div style='margin-top:7px'>{$pages}&nbsp;</div>
	<else />
		<div class='post1' style='padding:6px'>
			<em>{$this->lang->words['m_no_comments']} {$member['members_display_name']}.</em>
		</div>
	</if>
</form>
</div>
<br /><br /><br /> <!-- Gotta give room for page jump... -->
<script type='text/javascript'>
//<![CDATA
var _saved = parseInt( "{$this->request['_saved']}" );
if ( _saved )
{
	parent.ips_personal_portal.reload_comments();
}
// Check form
function check_form()
{
	var selectbox = document.getElementById('pp-moderation');
	var chosen    = selectbox.options[ selectbox.selectedIndex ].value;
	
	if ( chosen == 'delete' )
	{
		if ( confirm("{$this->lang->words['m_confirm']}") )
		{
			return true;
		}
		else
		{
			return false;
		}
	}
	else
	{
		return true;
	}
}
//|#^#]>
</script>]]></template_content>
      <template_name>showIframeComments</template_name>
      <template_data>$member, $comments, $pages</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<div id="photowrap">
	<div id="phototitle">{$member['members_display_name']}</div>
	<div id="photoimg"><img src="{$member['pp_main_photo']}" alt="{$this->lang->words['get_photo']}" width='{$member['pp_main_width']}' height='{$member['pp_main_height']}' /></div>
</div>]]></template_content>
      <template_name>showPhoto</template_name>
      <template_data>$member</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<h3 class='bar'>{$this->lang->words['pp_tab_aboutme']}</h3>
<div class='general_box'>
	<if test="tababoutMe:|:$member['pp_about_me'] OR $member['signature']">
		{$member['pp_about_me']}
		
		<if test="tabsignature:|:$member['signature']">
				{$member['signature']}
		</if>
	<else />
		{$this->lang->words['err_no_aboutme_to_show']}
	</if>
</div>]]></template_content>
      <template_name>tabAboutMe</template_name>
      <template_data>$member=array()</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<h3 class='bar'>{$this->lang->words['tab_message_h']}</h3>
<div class='general_box'>
	{$this->lang->words[ $langkey ]}
</div>]]></template_content>
      <template_name>tabNoContent</template_name>
      <template_data>$langkey</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<h3 class='bar'>{$this->lang->words['posts_made']}</h3>
<div class='general_box alt'>
	<ol>
		$content
	</ol>
</div>]]></template_content>
      <template_name>tabPosts</template_name>
      <template_data>$content</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<li style='list-style:none'>
	<if test="singleColumnTitle:|:$title">
		<if test="singleColumnUrl:|:$url">
			<h4><a href="$url" title="View topic">$title</a></h4>
		<else />
			<h4>$title</h4>
		</if>
	</if>
	<p class='posted_info'>{$this->lang->words['posted']} {$row['_date_array']['mday']} {$row['_date_array']['smonth']} {$row['_date_array']['year']}</p>
	<div class='post_body'>
		{$row['post']}
	</div>
</li>]]></template_content>
      <template_name>tabSingleColumn</template_name>
      <template_data><![CDATA[$row=array(), $read_more_link='', $url='', $title='']]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_profile</template_group>
      <template_content><![CDATA[<h3 class='bar'>{$this->lang->words['topics_started']}</h3>
<div class='general_box alt'>
	<ol>
		$content
	</ol>
</div>]]></template_content>
      <template_name>tabTopics</template_name>
      <template_data>$content</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
  </templategroup>
  <templategroup group="skin_ucp">
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<div class='row1'>	
	<if test="hasAttachLimit:|:$info['has_limit'] == 1">
		<div id='space_allowance' class='general_box'>
			<p><strong>{$info['attach_space_used']}</strong></p>
			<p class='progress_bar <if test="attachAlmostFull:|:$info['full_percent'] > 80">limit</if>' title='{$this->lang->words['ucp_attach_allowance']} {$info['full_percent']}% {$this->lang->words['ucp_full']}'>
				<span style='width: {$info['full_percent']}%'>{$info['full_percent']}%</span>
			</p>
			<p class='desc'>{$info['attach_space_count']}</p>
		</div>
	</if>
	<div class='topic_controls'>
		$pages
	</div>
	<br />
	<!-- ATTACHMENTS TABLE -->
	<form action="{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=updateAttachments&amp;do=saveIt" base="public"}" id="checkBoxForm" method="post">
	<table class='ipb_table' summary="{$this->lang->words['ucp_user_attach']}">
		<tr class='header'>
				<th scope='col' style='width: 2%'>&nbsp;</th>
				<th scope='col' style='width: 35%'>{$this->lang->words['attach_title']}</th>
				<th scope='col' style='width: 7%'>{$this->lang->words['attach_hsize']}</th>
				<th scope='col' style='width: 27%'>{$this->lang->words['attach_topic']}</th>
				<th scope='col' class='short' style='width: 3%'><input class='input_check' id="checkAllAttachments" type="checkbox" value="{$this->lang->words['check_all']}" /></th>
				<!-- SKINNOTE: Convert to new JS -->
			</tr>
			<if test="hasAttachments:|:count($attachments)">
				{parse striping="attach" classes="row1,row2"}
				<foreach loop="attach:$attachments as $idx => $data">
					<tr id="a{$data['attach_id']}" class='{parse striping="attach"}'>
							<td class='short altrow'>
								<if test="attachmentThumbLocation:|:$data['attach_thumb_location']">
									<a href="{parse url="app=core&amp;module=attach&amp;section=attach&amp;attach_rel_module={$data['_type']}&amp;attach_id={$data['attach_id']}" base="public"}" title="{$data['attach_file']}"><img src="{$this->settings['upload_url']}/{$data['attach_thumb_location']}" width="30" height="30" alt='{$this->lang->words['attached_file']}' /></a>
								<else />
									<img src="{$this->settings['mime_img']}/{$data['image']}" alt="{$this->lang->words['attached_file']}" />
								</if>
							</td>
							<td>
								<a href="{parse url="app=core&amp;module=attach&amp;section=attach&amp;attach_rel_module={$data['_type']}&amp;attach_id={$data['attach_id']}" base="public"}" title="{$data['attach_file']}">{$data['short_name']}</a><br />
								<span class="desc">( {$this->lang->words['attach_hits']}: {$data['attach_hits']} )</span>
							</td>
							<td class='short altrow'>{$data['real_size']}</td>
							<td>
								<if test="attachmentPost:|:$data['attach_rel_id'] > 0 AND $data['attach_rel_module'] == 'post'">
									<a href="{parse url="showtopic={$data['tid']}&amp;view=findpost&amp;p={$data['attach_rel_id']}" base="public"}" title='{$this->lang->words['ucp_view_org']}'>{$data['title']}</a>
								<else />
									{$data['title']}
								</if>
								<br />
								<span class="desc">{$data['attach_date']}</span>
							</td>
							<td class='altrow short'><input type="checkbox" name="attach[{$data['attach_id']}]" value="1" class="input_check checkall" /></td>
						</tr>
				</foreach>
			<else />
				<tr>
					<td colspan="5" class='no_messages'>{$this->lang->words['splash_noattach']}</td>
				</tr>
			</if>
		</table>
		<if test="attachmentMultiDelete:|:count($attachments)">
			<div class='moderation_bar rounded with_action clear' id='topic_mod'>
				<input type="hidden" name="authKey" value="{$this->member->form_hash}" />
				<input type="submit" value="{$this->lang->words['attach_delete']}" class="input_submit alt" />
			</div>
		</if>
	</form>
</div>
<script type='text/javascript'>
	ipb.global.registerCheckAll( 'checkAllAttachments', 'checkall' );
</script>]]></template_content>
      <template_name>coreAttachments</template_name>
      <template_data><![CDATA[$info="",$pages="",$attachments]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<fieldset class='{parse striping="row1"}'>
	<h3>{$this->lang->words['m_notes']}</h3>
	<div class='message unspecified'>{$this->lang->words['note_pad_empty']}</div>
	<div>
		<textarea style='width:100%;' rows='30' name='Post'>{$content}</textarea>
	</div>
</fieldset>]]></template_content>
      <template_name>coreNotesForm</template_name>
      <template_data><![CDATA[$content='']]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<if test="dnameOkMessage:|:$okmessage != """>
	<p class='message'>{$okmessage}</p>
</if>
<fieldset class='row1'>
	<h3>{$this->lang->words['dname_title']}</h3>
	<br />
	<if test="$form['_noPerm']">
		<p class='message error'>{$form['_noPerm']}</p>
	<else />
		<p class='message unspecific'>{$form['_lang_string']}</p>
		<ul>
			<li class='field'>
				<label for='displayName'>{$this->lang->words['dname_choose']}</label><input class='input_text' type="text" maxlength='10{$this->settings['max_user_name_length']}' name="displayName" id="displayName" value="{$this->request['displayName']}" size='30' /> <br />
				<span class='desc'>{$this->lang->words['dname_choose2']}</span>
			</li>
			<if test="dnameFbUser:|:!$isFB">
			<li class='field'>
				<label for='displayPassword'>{$this->lang->words['dname_password']}</label><input class='input_text' type="password" maxlength='{$this->settings['max_user_name_length']}' name="displayPassword" id="displayPassword" value="" size='30' /> <br />
				<span class='desc'>{$this->lang->words['dname_password2']}</span>
			</li>
			</if>
		</ul>
	</if>
</fieldset>]]></template_content>
      <template_name>displayNameForm</template_name>
      <template_data><![CDATA[$form=array(),$error="",$okmessage="", $isFB=false]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<script type="text/javascript">
var msg = "$_message";
	if ( msg != ""){
		alert(msg);
	}
</script>
<fieldset class='row1'>
	<h3>{$this->lang->words['change_email_title']}</h3>
	<br />
	<p class='message unspecific'>
		<if test="emailIsAdmin:|:$this->memberData['g_access_cp']">
			{$this->lang->words['admin_emailpassword']}
		<else />
			{$txt}
		</if>
	</p>
	<if test="emailIsNotAdmin:|:!$this->memberData['g_access_cp']">
		<ul>
			<li class='field'>
				<label for='in_email_1'>{$this->lang->words['ce_new_email']}</label>
				<input type="text" name="in_email_1" id='in_email_1' class='input_text' value="" />
			</li>
			<li class='field'>
				<label for='in_email_2'>{$this->lang->words['ce_new_email2']}</label>
				<input type="text" name="in_email_2" id='in_email_2' class='input_text' value="" />
			</li>
			<if test="passFbUser:|:!$isFB">
			<li class='field'>
				<label for='password'>{$this->lang->words['ec_passy']}</label>
				<input type="password" id='password' class='input_text' name="password" value="" />
			</li>
			</if>
		</ul>
	</if>
</fieldset>
<if test="emailCaptcha:|:$captchaHTML != '' AND !$this->memberData['g_access_cp']">
	<br />
	$captchaHTML
</if>]]></template_content>
      <template_name>emailChangeForm</template_name>
      <template_data>$txt, $_message, $captchaHTML, $isFB=false</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<select name="$name" class='input_select'>
	$options
</select>]]></template_content>
      <template_name>field_dropdown</template_name>
      <template_data><![CDATA[$name="",$options=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<li class='field'>
	<label for='field_$id'>$title</label>
	{$content}
	<if test="cfieldDesc:|:$desc"><span class='desc'>{$desc}</span></if>
</li>]]></template_content>
      <template_name>field_entry</template_name>
      <template_data><![CDATA[$title="",$desc="",$content="",$id=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<textarea cols="80" rows="5" wrap="soft" name="$name" class='input_text'>$value</textarea>]]></template_content>
      <template_name>field_textarea</template_name>
      <template_data><![CDATA[$name="",$value=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<input type="text" size="50" name="$name" value='$value' class='input_text' />]]></template_content>
      <template_name>field_textinput</template_name>
      <template_data><![CDATA[$name="",$value=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[{parse striping="usercp" classes="row1,row2"}
<fieldset class='{parse striping="usercp"}'>
	<h3>{$this->lang->words['settings_display']}</h3>
	<ul>
		<li class='field checkbox'>
			<input type='checkbox' name='viewSignatures' id='view_sigs' value='1' class='input_check'<if test="viewSigs:|:$this->memberData['view_sigs']"> checked="checked"</if>/> <label for='view_sigs'>{$this->lang->words['settings_viewsig']}</label>
		</li>
		<li class='field checkbox'>
			<input type='checkbox' name='viewImages' id='view_img' value='1' class='input_check'<if test="ViewImgs:|:$this->memberData['view_img']"> checked="checked"</if>/> <label for='view_img'>{$this->lang->words['settings_viewimg']}</label>
		</li>
		<li class='field checkbox'>
			<input type='checkbox' name='viewAvatars' id='view_avatar' value='1' class='input_check'<if test="viewAvs:|:$this->memberData['view_avs']"> checked="checked"</if>/> <label for='view_avatar'>{$this->lang->words['settings_viewava']}</label>
		</li>
		<li class='field'>
			<label for='post_per_page' />{$this->lang->words['pp_number_posts']}</label>
			<select name="postpage" class='input_select' id='posts_per_page'>
				<option value='-1'>{$this->lang->words['pp_use_default']}</option>
				<foreach loop="viewposts_options:$data['viewPostsForm'] as $r">
					<option value='{$r[0]}'<if test="pppSelected:|:$r[0] == $data['postsPerPage']"> selected='selected'</if>>{$r[1]}</option>
				</foreach>
			</select>
		</li>
		<li class='field'>
			<label for='topics_per_page' />{$this->lang->words['pp_number_topics']}</label>
			<select name="topicpage" class='input_select' id='topics_per_page'>
				<option value='-1'>{$this->lang->words['pp_use_default']}</option>
				<foreach loop="viewtopics_options:$data['viewTopicsForm'] as $r">
					<option value='{$r[0]}'<if test="tppSelected:|:$r[0] == $data['topicsPerPage']"> selected='selected'</if>>{$r[1]}</option>
				</foreach>			
			</select>
		</li>
	</ul>
</fieldset>
<fieldset class='{parse striping="usercp"}'>
	<h3>{$this->lang->words['board_prefs']}</h3>
	<ul>
		<li class='field checkbox'>
			<input type='checkbox' class='input_check' id='send_full_msg' name='send_full_msg' value='1' {$emailData['email_full']} /> <label for='send_full_msg' />{$this->lang->words['send_full_msg']}</label><br />
			<span class='desc'>{$this->lang->words['send_full_msg_desc']}</span>
		</li>
		<li class='field checkbox'>
			<input class='input_check' type="checkbox" id='auto_track' name="auto_track" value="1" {$emailData['auto_track']} /> <label for='auto_track' />{$this->lang->words['auto_track']}</label>
			<ul>
				<li class='field'>
					<label for='track_choice'>{$this->lang->words['auto_track_type']}</label>
					<select name="trackchoice" id='track_choice' class='input_select'>
						<option value="none" {$emailData['trackOption']['none']}>{$this->lang->words['subs_none_title']}</option>
						<option value="immediate" {$emailData['trackOption']['immediate']}>{$this->lang->words['subs_immediate']}</option>
						<option value="delayed" {$emailData['trackOption']['delayed']}>{$this->lang->words['subs_delayed']}</option>
						<option value="daily" {$emailData['trackOption']['daily']}>{$this->lang->words['subs_daily']}</option>
						<option value="weekly" {$emailData['trackOption']['weekly']}>{$this->lang->words['subs_weekly']}</option>
					</select>
				</li>
			</ul>
		</li>
		<li class='field'>
			<label for='topic_display_mode'>{$this->lang->words['ucp_topic_display_mode']}</label> 
			<select name="topic_display_mode" id='topic_display_mode' class='input_select'>
				<option value="linear"<if test="linearView:|:IPSCookie::get('topicmode') == 'linear'"> selected</if>>{$this->lang->words['ucp_standard']}</option>
				<option value="linearplus"<if test="linearPlusView:|:IPSCookie::get('topicmode') == 'linearplus'"> selected</if>>{$this->lang->words['ucp_linearplus']}</option>
				<option value="threaded"<if test="threadedView:|:IPSCookie::get('topicmode') == 'threaded'"> selected</if>>{$this->lang->words['ucp_outline']}</option>				
			</select>
			<span class='desc'>
				<strong>{$this->lang->words['ucp_standard']}:</strong> {$this->lang->words['ucp_standard_explain']}<br />
				<strong>{$this->lang->words['ucp_linearplus']}:</strong> {$this->lang->words['ucp_linearplus_explain']}<br />
				<strong>{$this->lang->words['ucp_outline']}:</strong> {$this->lang->words['ucp_outline_explain']}
			</span>
		</li>		
	</ul>
</fieldset>]]></template_content>
      <template_name>forumPrefsForm</template_name>
      <template_data>$emailData, $data</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<php>
	$_count = 0;
</php>
<div class='clear'>
<foreach loop="images:$images as $image">
	<php>
		$id = ucfirst( preg_replace( "#^(.*)\.(.+?)$#", "$1", $image ) );
	</php>
	<if test="avatarsTabulation:|:$_count % 5 == 0">
		</div>
		<div class='clear'>
	</if>
	<div class='avatar_gallery'>
		<img src='{$this->settings['public_dir']}style_avatars/<if test="avatarSubdir:|:$dir != '0'">{$dir}/</if>{$image}' alt='{$this->lang->words['avatar']}' /><br />
		<input type='radio' value='{$image}' name='avatar_image' id='{$dir}_{$id}' /> <label for='{$dir}_{$id}'>{$id}</label>
	</div>
	<if test="avatarCountPlusPlus:|:$_count++"></if>
</foreach>
</div>]]></template_content>
      <template_name>forumsInlineAvatarImages</template_name>
      <template_data>$images=array(), $dir</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<php>$this->hasOpenID = false;</php>
<foreach loop="loginmethods:$this->cache->getCache('login_methods') as $method">
	<if test="hasOpenid:|:$method['login_folder_name'] == 'openid'">
		<if test="setHasOpenid:|:$this->hasOpenID = true"></if>
	</if>
</foreach>
<if test="weDoHaveOpenid:|:$this->hasOpenID">
	<fieldset class='row2'>
		<h3>{$this->lang->words['identity_url_h3']}</h3>
		<ul>
			<li class='field'>
				<label for='identity_url'>{$this->lang->words['identity_url']}</label><input class='input_text' size='30' type="text" name="identity_url" id="identity_url" value="{$this->memberData['identity_url']}" /> <br />
				<span class='desc'>{$this->lang->words['identity_url_desc']}</span>
			</li>
		</ul>
	</fieldset>
</if>
<fieldset class='row1'>
	<h3>{$this->lang->words['privacy_settings']}</h3>
	<ul>
		<li class='field checkbox'>
			<input class='input_check' type="checkbox" name="hide_email" id="hide_email" value="1"<if test="hidingEmail:|:$this->memberData['hide_email']"> checked="checked"</if>/> <label for='hide_email'>{$this->lang->words['hide_email']}</label><br />
			<span class='desc'>{$this->lang->words['hide_email_desc']}</span>
		</li>
		<li class='field checkbox'>
			<input type='checkbox' class='input_check' id='admin_updates' name='admin_send' value='1'<if test="allowAdminMails:|:$this->memberData['allow_admin_mails']"> checked="checked"</if>/> <label for='admin_updates'>{$this->lang->words['admin_send']}</label><br />
			<span class='desc'>{$this->lang->words['admin_send_desc']} $time</span>
		</li>
	</ul>
</fieldset>
<fieldset class='row2'>
	<h3>{$this->lang->words['settings_time']}</h3>
	<ul>
		<li class='field'>
			<label for='timezone'>{$this->lang->words['ucp_timzeone']}</label>
			<select name='timeZone' id='timezone' class='input_select'>
			<foreach loop="timezones:$times as $off => $words">
				<option value='{$off}' <if test="isOurTimezone:|:$off == $this->memberData['time_offset']"> selected="selected"</if>>{$words}</option>
			</foreach>
			</select>
			<span class='desc'>{$this->lang->words['settings_time_txt2']} {parse date="" format="LONG" relative="false"}</span>
		</li>
		<li class='field checkbox'>
			<if test="dstError:|:$this->request['dsterror'] == 1">
				{$this->lang->words['dst_error']}
			</if>
			<input type='checkbox' class='input_check' id='dst' name="dstCheck" onclick='toggle_dst()' value="1"<if test="doAutoDst:|:$this->memberData['members_auto_dst']"> checked="checked"</if>/> <label for='dst'>{$this->lang->words['dst_correction_title']}</label><br />
			<span class='desc'>{$this->lang->words['dst_auto2']}</span>
		</li>
		<li class='field checkbox' id='dst-manual'>
			<input type='checkbox' class='input_check' id='dstManual' name="dstOption" value="1"<if test="doManualDst:|:$this->memberData['dst_in_use']"> checked="checked"</if>/> <label for='dstManual'>{$this->lang->words['ucp_dst_now']}</label><br />
			<span class='desc'>{$this->lang->words['ucp_dst_effect']}</span>
		</li>
	</ul>
</fieldset>
<fieldset class='row1'>
	<h3>{$this->lang->words['ucp_op_pm_title']}</h3>
	<ul>
		<if test="hasPm:|:$this->memberData['members_disable_pm'] != 2">
		<li class='field checkbox'>
			<input type='checkbox' name='disableMessenger' class='input_check' id='disable_msg' value='1'<if test="disablePm:|:$this->memberData['members_disable_pm']"> checked="checked"</if>/> <label for='disable_msg'>{$this->lang->words['ucp_op_pm']}</label><br />
			<span class='desc'>{$this->lang->words['ucp_op_pm_desc']}</span>
		</li>
		</if>
		<li class='field checkbox'>
			<input type='checkbox' class='input_check' id='email_notify' name='pm_reminder' value='1'<if test="emailPm:|:$this->memberData['email_pm']"> checked="checked"</if>/> <label for='email_notify'>{$this->lang->words['pm_reminder']}</label><br />
			<span class='desc'>{$this->lang->words['pm_reminder_desc']}</span>
		</li>
		<li class='field checkbox'>
			<input type='checkbox' name='showPMPopUp' id='board_notify' class='input_check' value='1'<if test="pmPopup:|:$this->memberData['view_pop']"> checked="checked"</if>/> <label for='board_notify'>{$this->lang->words['settings_dopopup']}</label><br />
			<span class='desc'>{$this->lang->words['settings_dopopup_desc']}</span>
		</li>
	</ul>
</fieldset>
<fieldset class='row2 '>
	<h3>{$this->lang->words['ucp_title_posting']}</h3>
	<ul>
		<if test="allowRte:|:$this->settings['posting_allow_rte'] == 1">
			<li class='field checkbox'>
				<if test="!$this->memberData['_canUseRTE']">
					<div class='message error usercp'>{$this->lang->words['your_browser_norte']}</div>
				</if>
				<input type='checkbox' class='input_check' id='editor_type' name='editorChoice' value='1' <if test="useRte:|:$this->memberData['members_editor_choice'] == 'rte'"> checked="checked"</if>/> <label for='editor_type'>{$this->lang->words['enable_rte']}</label>
				<br /><span class='desc'>{$this->lang->words['rte_text']}</span>
			</li>
		</if>
		
		<if test="allowFlash:|:$this->settings['uploadFormType']">
			<!-- Fancy uploader is available, so show user option... -->
			<li class='field checkbox'>
				<input type='checkbox' class='input_check' id='member_uploader' name='member_uploader' value='1' <if test="useFlash:|:$this->memberData['member_uploader'] == 'flash'"> checked="checked"</if>/> <label for='member_uploader'>{$this->lang->words['enable_flash']}</label><br />
				<span class='desc'>{$this->lang->words['flash_text']}</span>
			</li>
		</if>
	</ul>
</fieldset>
<fieldset class='row2 '>
	<h3>{$this->lang->words['ucp_title_search']}</h3>
	<ul>
		<li class='field'>
			<label for='timezone'>{$this->lang->words['ucp_vnc_type']}</label>
			<select name='bw_vnc_type' id='bw_vnc_type' class='input_select'>
				<option value='0' <if test="!$this->memberData['bw_vnc_type']">selected='selected'</if>>{$this->lang->words['ucp_vnc_type_0']}</option>
				<option value='1' <if test="$this->memberData['bw_vnc_type']">selected='selected'</if>>{$this->lang->words['ucp_vnc_type_1']}</option>
			</select>
		</li>
		<li class='field'>
			<label for='timezone'>{$this->lang->words['ucp_forum_search_display']}</label>
			<select name='bw_forum_result_type' id='ucp_vnc_type' class='input_select'>
				<option value='0' <if test="!$this->memberData['bw_forum_result_type']">selected='selected'</if>>{$this->lang->words['ucp_forum_search_display_0']}</option>
				<option value='1' <if test="$this->memberData['bw_forum_result_type']">selected='selected'</if>>{$this->lang->words['ucp_forum_search_display_1']}</option>
			</select>
		</li>
	</ul>
</fieldset>
<script type="text/javascript">
//<!#^#|CDATA|
function toggle_dst()
{
	if ( $( 'dst' ).checked )
	{
		$( 'dst-manual' ).style.display = 'none';
	}
	else
	{
		$( 'dst-manual' ).style.display = 'block';
	}
}
toggle_dst();
//|#^#]>
</script>]]></template_content>
      <template_name>generalSettingsForm</template_name>
      <template_data>$times</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<p class='message unspecific'>{$msg}</p>]]></template_content>
      <template_name>inlineModIPMessage</template_name>
      <template_data><![CDATA[$msg='']]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<script type="text/javascript">
var public_avatar_url	= '{$this->settings['_original_base_url']}/public/style_avatars/';
</script>
<fieldset class='row1'>
	<h3>{$this->lang->words['av_settings']}</h3>
	<p class='message unspecific'>
		<if test="avatarUrl:|:$this->settings['avatar_url']">
			{parse expression="sprintf( $this->lang->words['av_text_url'], $this->settings['maxWidth'], $this->settings['maxHeight'] )"}
			<br />
		</if>
		<if test="avatarUploaded:|:$data['member']['g_avatar_upload']">
			{parse expression="sprintf( $this->lang->words['av_text_upload'], $this->settings['avup_size_max'] )"}
		</if>
		<br />{$this->lang->words['av_allowed_files']}
	</p>
</fieldset>
<if test="avatarGallery:|:$data['member']['avatar_location'] != "" and $data['member']['avatar_location'] != 'noavatar'">
	<fieldset class='row2'>
		<h3>{$this->lang->words['av_current']}</h3>
		<div align='center'>
			<p>{$data['current_avatar_image']}<br />{$data['current_avatar_type']} {$data['current_avatar_dims']}</p>
			<p><a href='{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=removeavatar&amp;do=remove" base="public"}'>{$this->lang->words['ucp_remove_avatar']}</a></p>
		</div>
	</fieldset>
</if>
<if test="hasAvatarUrl:|:$this->settings['avatar_url'] OR $data['member']['g_avatar_upload']">
	<fieldset class='row1'>
		<h3>{$this->lang->words['avatar_url_title']}</h3>
		<if test="hasAvatarNotGallery:|:$data['member']['g_avatar_upload'] || $this->settings['avatar_url'] || $this->settings['allow_gravatars']">
			<ul>
				<if test="avatarWasUploaded:|:$data['member']['g_avatar_upload']">
					<li class='field'>
						<label for='upload_avatar'>{$this->lang->words['av_upload']}</label>
						<input type="file" size="30" name="upload_avatar" id="upload_avatar" />
					</li>
				</if>
				<if test="avatarWasLinked:|:$this->settings['avatar_url']">
					<li class='field'>
						<label for='avatar_url'>{$this->lang->words['av_url']}</label>
						<input type="text" size="40" maxlength="80" name="avatar_url" id="avatar_url" value="{$data['current_url_avatar']}" />
					</li>
				</if>
				<if test="allowGravatars:|:$this->settings['allow_gravatars']">
					<li class='field'>
						<label for='gravatar_email'> <strong><em>-{$this->lang->words['or']}-</em></strong> {$this->lang->words['ucp_gravatar_enter_email']}</label>
						<input type="text" size="40" maxlength="80" name="gravatar_email" id="gravatar_email" value="<if test="hasGravatar:|:$data['current_avatar_type'] == 'Gravatar'">{$data['member']['avatar_location']}</if>" />
					</li>
				</if>
			</ul>
		</if>
		<if test="noResizeAvatar:|:! $this->settings['disable_ipbsize']">
			<p><strong>{$this->lang->words['av_autosize']}</strong><br />({$this->lang->words['av_as_desc']})</p>
		<else />
			<ul>
				<li class='field'>
					{$this->lang->words['width']}
					<input type="text" size="3" name="man_width" />
				</li>
				<li class='field'>
					{$this->lang->words['height']}
					<input type="text" size="3" name="man_height" />
				</li>
			</ul>
		</if>
	</fieldset>
</if>
<fieldset class='row2'>
	<h3>{$this->lang->words['avatar_pre_title']}</h3>
	<ul>
		<li>
			<label for="avatarCategory">{$this->lang->words['av_go_gal']}: </label>
			<select name='avatar_gallery' id='avatarCategory' class='input_select'>
				<option value='none' selected="selected">&lt; {$this->lang->words['ucp_select_category']} &gt;</option>
				<foreach loop="avatars:$data['avatar_categories'] as $id => $name">
					<option value="{$name[0]}">{$name[1]}</option>
				</foreach>
			</select>
			<div style='display:none;' id='avatarImageContainer'></div>
		</li>
	</ul>
</fieldset>]]></template_content>
      <template_name>memberAvatarForm</template_name>
      <template_data><![CDATA[$data=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[{parse striping="usercp" classes="row1,row2"}
<if test="$preview_about_me">
	<fieldset class='{parse striping="usercp"}'>
		<h3>{$this->lang->words['cp_current_aboutme']}</h3>
		<div class='signature'>
			{$preview_about_me}
		</div>
	</fieldset>
</if>
<fieldset class='{parse striping="usercp"}'>
	<h3>{$this->lang->words['cp_edit_aboutme']}</h3>
	<div>
		{$editor_html}
	</div>
</fieldset>
<if test="disablelightbox:|:!$this->settings['disable_lightbox']">
{parse template="include_lightbox" group="global" params=""}
</if>
{parse template="include_highlighter" group="global" params="1"}]]></template_content>
      <template_name>membersAboutMeForm</template_name>
      <template_data><![CDATA[$preview_about_me="",$editor_html=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[{parse js_module="facebook"}
{parse striping="usercp" classes="row1,row2"}
<!-- Not authorized email? -->
<if test="fbNoEmailWarning:|:! $this->memberData['fb_emailallow'] AND strstr( $this->memberData['email'], '@proxymail.facebook.com' )">
<fieldset class='{parse striping="usercp"}'>
	<h3>{$this->lang->words['fb_email_not_allowed']}</h3>
	<p>{$this->lang->words['fb_email_not_allowed_desc']}</p>
</fieldset>
<else />
	<if test="fbMismatch:|:$fbuid AND $linkedMemberData['member_id'] AND $linkedMemberData['member_id'] != $this->memberData['member_id']">
		<!-- currently logged in FB user is linked to a different account -->
		<div class='message error'>
			<strong>{$this->lang->words['fb_connect_mismatch']}</strong>
			<p>{$this->lang->words['fb_connect_mismatch_desc']}</p>
		</div>
	<else />
		<div id='fbUserBox'>
			{$this->lang->words['fb_config']}
			<br />
			<br />
			<fb:login-button size="medium" background="light" length="long" onlogin="ipb.facebook.usercp_loadUser();"></fb:login-button>
		</div>
		<div id='fb-template' style='display:none'>
			<fieldset class='row2'>
				<div style='float:left; margin-right:4px;margin-bottom:3px'>
					<fb:profile-pic uid="loggedinuser" facebook-logo="true"></fb:profile-pic>
				</div>
				{$this->lang->words['fb_logged_in_as']} <strong><fb:name uid="loggedinuser" useyou="false"></fb:name></strong>
				<if test="fbShowStatus:|:is_array($fbUserData['status']) AND $fbUserData['status']['message']">
					<br /><br /><p class='desc'>{$fbUserData['first_name']} {$fbUserData['status']['message']}</p>
				</if>
			</fieldset>
			<fieldset class='row1'>
				<h3>{$this->lang->words['fb_sync_options']}</h3>
				<ul>
					<li class='field checkbox'>
						<input class='input_check' type='checkbox' value='1' name='fbc_s_pic' value='1' <if test="fbSyncPic:|:$this->memberData['fbc_s_pic'] > 0">checked='checked'</if> id='fbc_s_pic' /><label for='fbc_s_pic'>{$this->lang->words['fb_sync_photo']}</label>
					</li>
					<li class='field checkbox'>
						<input class='input_check' type='checkbox' value='1' name='fbc_s_avatar' value='1' <if test="fbSyncAvatar:|:$this->memberData['fbc_s_avatar'] > 0">checked='checked'</if> id='fbc_s_avatar' /><label for='fbc_s_avatar'>{$this->lang->words['fb_sync_avatar']}</label>
					</li>
					<li class='field checkbox'>
						<input class='input_check' type='checkbox' value='1' name='fbc_s_status' value='1' <if test="fbSyncStatus:|:$this->memberData['fbc_s_status'] > 0">checked='checked'</if> id='fbc_s_status' /><label for='fbc_s_status'>{$this->lang->words['fb_sync_status']}</label>
					</li>
					<li class='field checkbox'>
						<input class='input_check' type='checkbox' value='1' name='fbc_s_aboutme' value='1' <if test="fbSyncAboutMe:|:$this->memberData['fbc_s_aboutme'] > 0">checked='checked'</if> id='fbc_s_aboutme' /><label for='fbc_s_aboutme'>{$this->lang->words['fb_sync_aboutme']}</label>
					</li>
				</ul>
				<p class='desc'>
					{$this->lang->words['fb_last_syncd']}
					<if test="fbLastSync:|:$this->memberData['fb_lastsync']">
						{parse date="$this->memberData['fb_lastsync']" format="long"}
					<else />
						{$this->lang->words['fb_never']}
					</if>
				</p>
				<p><input type='submit' class='input_submit alt' id='fbc_sync' value='{$this->lang->words['fb_sync_now']}' /></p>
			</fieldset>
			<fieldset class='row1'>
				<h3>{$this->lang->words['fb_disassociate']}</h3>
				<p class='desc'>{$this->lang->words['fb_disassociate_desc']}</p>
				<if test="fbDefaultEmail:|:strstr( $this->memberData['email'], '@proxymail.facebook.com' )">
					<div class='message'>
						<strong>{$this->lang->words['fb_using_email']}</strong>
						<p>{$this->lang->words['fb_disassociate_info_1']} <a href='{parse url="app=core&amp;module=usercp&amp;tab=core&amp;area=email" base="public"}'>{$this->lang->words['fb_disassociate_info_2']}</a> {$this->lang->words['fb_disassociate_info_3']}
						</p>
					</div>
					<br />
				</if>
				<p><input type='button' class='input_submit alt' id='fbc_remove' value='{$this->lang->words['fb_disassociate_now']}' /></p>
			</fieldset>
		</div>
	
		<script type="text/javascript">
			/* Init Facebook JS */
			try
			{
				ipb.facebook.mem_fb_uid = {parse expression="intval($this->memberData['fb_uid'])"};
				
				FB_RequireFeatures(["XFBML"], function()
				{
					FB.init("{$this->settings['fbc_api_id']}", "{$this->settings['fbc_xdlocation']}" );
					FB.Facebook.get_sessionState().waitUntilReady(function()
					{
						FB.Connect.ifUserConnected( ipb.facebook.usercp_loadUser );
					} );
				} );
			}
			catch( error )
			{
				//alert( error );
			}
		</script>
	</if>
</if>]]></template_content>
      <template_name>membersFacebookConnect</template_name>
      <template_data>$fbuid, $fbUserData, $linkedMemberData</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<script type='text/javascript'>
//<!#^#|CDATA|
	ipb.templates['autocomplete_wrap'] = new Template("<ul id='#{id}' class='ipbmenu_content' style='width: 250px;'></ul>");
	ipb.templates['autocomplete_item'] = new Template("<li id='#{id}'><img src='#{img}' alt='' width='#{img_w}' height='#{img_h}' />&nbsp;&nbsp;#{itemvalue}</li>");
//|#^#]>
</script>
<fieldset class='row1'>
	<h3 class='maintitle'>{$this->lang->words['mi5_title']}</h3>
	<table class='ipb_table' summary="{$this->lang->words['ucp_ignored_users']}">
		<tr class='header'>
			<th scope='col' width="30%">{$this->lang->words['mi5_name']}</th>
			<th scope='col' width="30%">{$this->lang->words['mi5_group']}</th>
			<th scope='col' width="10%">{$this->lang->words['mi5_posts']}</th>
			<th scope='col' width="10%">{$this->lang->words['ucp_ignore_posts']}</th>
			<th scope='col' width="10%">{$this->lang->words['ucp_ignore_msgs']}</th>
			<th scope='col' width="10%">&nbsp;</th>
		</tr>
		{parse striping="members" classes="row1,row2"}
		<foreach loop="members:$members as $member">
			<tr class='{parse striping="members"}'>
				<td>
					<img src='{$member['pp_thumb_photo']}' width='{$member['pp_thumb_width']}' height='{$member['pp_thumb_height']}' border='0' />
					<strong><a href="{parse url="showuser={$member['member_id']}" base="public" seotitle="{$member['members_seo_name']}" template="showuser"}">{$member['members_display_name']}</a></strong>
					<p>{$this->lang->words['m_joined']} {parse date="$member['joined']" format="joined"}</p>
				</td>
				<td>{$member['g_title']}</td>
				<td>{$member['posts']}</td>
				<td>
					<if test="ignoreMemberTopics:|:$member['ignoreData']['ignore_topics'] == 1">
						<a href="{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=topics" base="public"}" title="{$this->lang->words['click_toggle']}">{$this->lang->words['yes']}</a>
					<else />
						<a href="{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=topics" base="public"}" title="{$this->lang->words['click_toggle']}">{$this->lang->words['no']}</a>
					</if>
				</td>
				<td>
					<if test="ignoreMemberPms:|:$member['ignoreData']['ignore_messages'] == 1">
						<a href="{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=messages" base="public"}" title="{$this->lang->words['click_toggle']}">{$this->lang->words['yes']}</a>
					<else />
						<a href="{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=toggleIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}&amp;field=messages" base="public"}" title="{$this->lang->words['click_toggle']}">{$this->lang->words['no']}</a>
					</if>
				</td>
				<td><a href="{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=removeIgnoredUser&amp;do=saveIt&amp;id={$member['member_id']}" base="public"}">{$this->lang->words['mi5_remove']}</a></td>
			</tr>
		</foreach>
	</table>
</fieldset>
<fieldset class="row2">
	<h3>{$this->lang->words['mi5_addem']}</h3>
	<ul>
		<li class='field'>
			<label for='newbox_1'>{$this->lang->words['ucp_members_name']}</label>
			<input type="text" size='40' name="newbox_1" id="newbox_1" value="{$this->request['newbox_1']}" />
			<ul>
				<li class='field checkbox'>
					<input type='checkbox' class='input_check' name='ignore_messages' value='1' />
					{$this->lang->words['ucp_ignore_pc']}
				</li>
				<li class='field checkbox'>
					<input type='checkbox' class='input_check' name='ignore_topics' value='1' checked='checked' />
					{$this->lang->words['ucp_ignore_posts']}
				</li>
			</ul>
		</li>
	</ul>
</fieldset>
<script type="text/javascript">
	document.observe("dom:loaded", function(){
		var url = ipb.vars['base_url'] + 'app=core&module=ajax&section=findnames&do=get-member-names&secure_key=' + ipb.vars['secure_hash'] + '&name=';
		new ipb.Autocomplete( $('newbox_1'), { multibox: false, url: url, templates: { wrap: ipb.templates['autocomplete_wrap'], item: ipb.templates['autocomplete_item'] } } );
	});
</script>]]></template_content>
      <template_name>membersIgnoredUsersForm</template_name>
      <template_data>$members</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<form id="userCPForm" action="{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=mod_member&amp;do=custom" base="public"}" method="post">
<input type="hidden" name="securekey" value="{$this->member->form_hash}" />
<fieldset class="row1">
	<h3>{$this->lang->words['cp_edit_user']}</h3>
	<if test="inlineFindUserError:|:$inlineMsg">
		<p class='message unspecific'>
			<strong>{$this->lang->words['ipm_title']}</strong>
			<br />
			$inlineMsg
		</p>
	</if>
	<ul>
		<li class="field">
			<label for='name'>{$this->lang->words['cp_find_user']}</label>
			<input type="text" class='input_text' size="40" name="name" id='name' value="{$this->request['name']}" />
			<input type="submit" class='input_submit' value="{$this->lang->words['cp_find_submit']}" />
		</li>
	</ul>
</fieldset>
</form>]]></template_content>
      <template_name>membersModFindUser</template_name>
      <template_data><![CDATA[$inlineMsg=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<form id="userCPForm" action="{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=mod_ipaddress&amp;do=custom" base="public"}" method="post">
<input type="hidden" name="securekey" value="{$this->member->form_hash}" />
<fieldset class="row1">
	<h3>{$this->lang->words['menu_ipsearch']}</h3>
	<if test="modIpIe:|:$inlineMsg">
		{$inlineMsg}
	</if>
	<br />
	
	<p class='message unspecific'>
		{$this->lang->words['ip_desc_text']}
	</p>
	<ul>
		<li class='field'>
			{$this->lang->words['ip_enter']}
			<input type="text" size="20" maxlength="24" class='input_text' name="ip" value="{$ip}" />
			<select name="iptool" class='input_select'>
				<option value="resolve">{$this->lang->words['ip_resolve']}</option>
				<option value="posts">{$this->lang->words['ip_posts']}</option>
				<option value="members">{$this->lang->words['ip_members']}</option>
			</select>
			<input type="submit" class='input_submit' value="{$this->lang->words['ip_submit']}" />
		</li>
	</ul>
	<p class='desc'>
		{$this->lang->words['ip_warn_text']}
	</p>
</fieldset>
</form>]]></template_content>
      <template_name>membersModIPForm</template_name>
      <template_data><![CDATA[$ip="", $inlineMsg='']]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<div class='topic_controls'>
	{$pages}
</div>
<br />
<table class='ipb_table'>
	<tr class='header'>
		<th style='width: 20%'>{$this->lang->words['ipm_name']}</th>
		<th style='width: 20%'>{$this->lang->words['ipm_ip']}</th>
		<th style='width: 10%' class='short'>{$this->lang->words['ipm_posts']}</th>
		<th style='width: 15%' class='short'>{$this->lang->words['ipm_reg']}</th>
		<th style='width: 15%'>{$this->lang->words['ipm_group']}</th>
		<th style='width: 20%'>{$this->lang->words['ipm_options']}</th>
	</tr>
	<if test="modIPMembers:|:is_array( $members ) AND count( $members )">
		{parse striping="members" classes="row1,row2"}
		<foreach loop="ipMembers:$members as $id => $row">
			<tr class='{parse striping="members"}'>
				<td><a href="{parse url="showuser={$row['member_id']}" base="public" template="showuser" seotitle="{$row['members_seo_name']}"}">{$row['members_display_name']}</a></td>
				<td class='altrow'>{$row['ip_address']}</td>
				<td class='short'>{$row['posts']}</td>
				<td class="altrow short">{$row['joined']}</td>
				<td>{$row['groupname']}</td>
				<td class="altrow short">
					<a href="{parse url="app=forums&amp;module=moderate&amp;section=moderate&amp;do=editmember&amp;mid={$row['member_id']}&amp;auth_key={$this->member->form_hash}" base="public"}" title="Edit this Member">{$this->lang->words['ipm_edit']}</a>
				</td>
			</tr>
		</foreach>
	</if>
</table>
<br />
<div class='topic_controls'>
	{$pages}
</div>]]></template_content>
      <template_name>membersModIPFormMembers</template_name>
      <template_data><![CDATA[$pages="",$members]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<p class='message'>
	{$this->lang->words['ipp_found']} {$count}
</p>
<br />
<div class='topic_controls'>
	{$pageLinks}
</div>
<br />
<if test="modFindMemberPosts:|:count($results)">
	{parse striping="posts" classes="row1,row2"}
	<foreach loop="ipPosts:$results as $result">
		<div class='post_block ucp no_sidebar {parse striping="posts"}'>
			<h3 class=''><a href='{parse url="showtopic={$result['topic_id']}&amp;findpost={$result['pid']}" template="showtopic" seotitle="{$result['seo_title']}" base="public"}' title='View post'>{$result['members_display_name']} | {parse date="$result['post_date']" format="long"}</a></h3>
			<div class='post_body'>
				<div class='post'>{$result['post']}</div>
			</div>
		</div>
		<hr />
	</foreach>
</if>
<br />
<div class='topic_controls'>
	{$pageLinks}
</div>]]></template_content>
      <template_name>membersModIPFormPosts</template_name>
      <template_data><![CDATA[$count=0, $pageLinks='', $results]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<fieldset class='row1'>
	<h3>{$this->lang->words['pph_title']}</h3>
	<p class='message unspecific'>
		{$this->lang->words['pph_desc']}
		<br />{$this->lang->words['pph_max']}
	</p>
</fieldset>
<if test="hasPhoto:|:$this->memberData['_has_photo']">
	<fieldset class='row2'>
		<h3>{$this->lang->words['pph_current']}</h3>
		<div align='center'>
			<p>$cur_photo<br />$show_size</p>
			<p><a href='{parse url="app=core&amp;module=usercp&amp;tab=members&amp;area=removephoto&amp;do=remove" base="public"}'>{$this->lang->words['ucp_remove_photo']}</a></p>			
		</div>		
	</fieldset>
</if>
<fieldset class='row1'>
	<h3>{$this->lang->words['pph_change']}</h3>
	<ul>
		<li class='field'>
			<label for='upload_photo'>{$this->lang->words['pph_upload']}</label>
			<input type="hidden" name="MAX_FILE_SIZE" value="{parse expression="$p_max*1024"}" /><input type="file" name="upload_photo" id='upload_photo' value="" size="40" />
			<if test="noResizePhoto:|:! $this->settings['disable_ipbsize']">
				<p><strong>{$this->lang->words['pph_autosize']}</strong><br />({$this->lang->words['pph_as_desc']})</p>
			<else />
				<ul>
					<li class='field'>
						{$this->lang->words['width']}
						<input type="text" size="3" name="man_width" />
					</li>
					<li class='field'>
						{$this->lang->words['height']}
						<input type="text" size="3" name="man_height" />
					</li>
				</ul>
			</if>
		</li>
	</ul>
</fieldset>]]></template_content>
      <template_name>membersPhotoForm</template_name>
      <template_data><![CDATA[$cur_photo="",$show_size="",$p_max=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[{parse striping="usercp" classes="row1,row2"}
<fieldset class='{parse striping="usercp"}'>
	<h3>{$this->lang->words['ucp_comments']}</h3>
	<ul>
		<li class='field checkbox'>
			<input class='input_check' type='checkbox' value='1' name='pp_setting_count_comments' value='1' <if test="showComments:|:$this->memberData['pp_setting_count_comments'] > 0">checked='checked'</if> id='comments_enable' /><label for='comments_enable'>{$this->lang->words['ucp_enable_comments']}</label>
		</li>
		<li class='field'>
			<label for='comments_notify'>{$this->lang->words['ucp_comment_notify_type']}</label>
			<select name='pp_setting_notify_comments' id='comments_notify' class='input_select'>
				<option value='none'<if test="commentsNone:|:$this->memberData['pp_setting_notify_comments'] == 'none'"> selected="selected"</if>>{$this->lang->words['op_dd_none']}</option>
				<option value='email'<if test="commentsEmail:|:$this->memberData['pp_setting_notify_comments'] == 'email'"> selected="selected"</if>>{$this->lang->words['op_dd_email']}</option>
				<option value='pm'<if test="commentsPm:|:$this->memberData['pp_setting_notify_comments'] == 'pm'"> selected="selected"</if>>{$this->lang->words['op_dd_pm']}</option>
			</select>
		 	<br />
			<span class='desc'>{$this->lang->words['m_choose_comm_type']}</span>
		</li>
		<li class='field'>
			<label for='comments_moderate'>{$this->lang->words['ucp_comment_approval']}</label>
			<select name='pp_setting_moderate_comments' id='comments_moderate' class='input_select'>
				<option value='0'<if test="noModComments:|:! $this->memberData['pp_setting_moderate_comments']"> selected="selected"</if>>{$this->lang->words['op_dd_disabled']}</option>
				<option value='1'<if test="yesModComments:|:$this->memberData['pp_setting_moderate_comments']"> selected="selected"</if>>{$this->lang->words['op_dd_enabled']}</option>
			</select>
			<br />
			<span class='desc'>{$this->lang->words['m_choose_cmod_type']}</span>
		</li>
	</ul>
</fieldset>
<if test="friendsEnabled:|:$this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']">
	<fieldset class='{parse striping="usercp"}'>
		<h3>{$this->lang->words['ucp_friends']}</h3>
		<ul>
			<li class='field checkbox'>
				<input class='input_check' type='checkbox' value='1' name='pp_setting_count_friends' value='1' <if test="showFriends:|:$this->memberData['pp_setting_count_friends'] > 0">checked='checked'</if> id='friends_enable' /><label for='friends_enable'>{$this->lang->words['ucp_show_friends_profile']}</label>
			</li>
			<li class='field'>
				<label for='friend_notify'>{$this->lang->words['ucp_friend_notify']}</label>
				<select name='pp_setting_notify_friend' id='friend_notify' class='input_select'>
					<option value='none'<if test="friendsNone:|:$this->memberData['pp_setting_notify_friend'] == 'none'"> selected="selected"</if>>{$this->lang->words['op_dd_none']}</option>
					<option value='email'<if test="friendsEmail:|:$this->memberData['pp_setting_notify_friend'] == 'email'"> selected="selected"</if>>{$this->lang->words['op_dd_email']}</option>
					<option value='pm'<if test="friendsPm:|:$this->memberData['pp_setting_notify_friend'] == 'pm'"> selected="selected"</if>>{$this->lang->words['op_dd_pm']}</option>
				</select>
				<br />
				<span class='desc'>{$this->lang->words['m_choose_friend_type']}</span>
			</li>
			<li class='field'>
				<label for='friend_moderate'>{$this->lang->words['ucp_friend_approve']}</label>
				<select name='pp_setting_moderate_friends' id='friend_moderate' class='input_select'>
					<option value='0'<if test="noModFriends:|:! $this->memberData['pp_setting_moderate_friends']"> selected="selected"</if>>{$this->lang->words['op_dd_disabled']}</option>
					<option value='1'<if test="yesModFriends:|:$this->memberData['pp_setting_moderate_friends']"> selected="selected"</if>>{$this->lang->words['op_dd_enabled']}</option>
				</select>
				<br />
				<span class='desc'>{$this->lang->words['m_choose_fmod_type']}</span>
			</li>
		</ul>
	</fieldset>
</if>
<fieldset class='{parse striping="usercp"}'>
	<h3>{$this->lang->words['profile_information']}</h3>
	<ul>
		<li class='field'>
			<label for='pp_latest_visitors'>{$this->lang->words['ucp_show_x_latest']}</label>
			<select name='pp_setting_count_visitors' id='pp_latest_visitors' class='input_select'>
				<option value='0'<if test="noVisitors:|:!$this->memberData['pp_setting_count_visitors']"> selected</if>>0</option>
				<option value='3'<if test="3Visitors:|:$this->memberData['pp_setting_count_visitors'] == 3"> selected</if>>3</option>
				<option value='5'<if test="5Visitors:|:$this->memberData['pp_setting_count_visitors'] == 5"> selected</if>>5</option>
				<option value='10'<if test="10Visitors:|:$this->memberData['pp_setting_count_visitors'] == 10"> selected</if>>10</option>
			</select>
		</li>
		<if test="changeMemberTitle:|:($this->settings['post_titlechange']) && ($this->memberData['posts'] > $this->settings['post_titlechange'])">
			<li class='field'>
				<label for='member_title'>{$this->lang->words['member_title']}</label>
				<input type='text' class='input_text' size='30' id='member_title' name='member_title' value='{$this->memberData['title']}' />
				<br />
				<span class='desc'>{$this->lang->words['member_title_desc']}</span>
			</li>
		</if>
		<if test="birthdayFields:|:$day AND $mon AND $year">
			<li class='field'>
				<label for='birthday'>{$this->lang->words['ucp_birthday_select']}</label>
				<select name="month">&nbsp;
					<foreach loop="months:$mon as $m">
						<option value='{$m[0]}'<if test="monthSelected:|:$m[0] == $this->memberData['bday_month']"> selected="selected"</if>>{$m[1]}</option>
					</foreach>
				</select>			
				<select name="day">&nbsp;
					<foreach loop="days:$day as $d">
						<option value='{$d[0]}'<if test="daySelected:|:$d[0] == $this->memberData['bday_day']"> selected="selected"</if>>{$d[1]}</option>
					</foreach>
				</select> 
				<select name="year">&nbsp;
					<foreach loop="years:$year as $y">
						<option value='{$y[0]}'<if test="yearSelected:|:$y[0] == $this->memberData['bday_year']"> selected="selected"</if>>{$y[1]}</option>
					</foreach>
				</select> <br />
				<span class='desc'>{$this->lang->words['ucp_birthday_optional']}</span>
			</li>
		</if>
	</ul>
</fieldset>

<if test="requiredCfields:|:$required_output">
	<fieldset class='{parse striping="usercp"}'>
		<h3>{$this->lang->words['ucp_required_info']}</h3>
		<ul>
			{$required_output}
		</ul>
	</fieldset>
</if>
<if test="optionalCfields:|:$optional_output">
	<fieldset class='{parse striping="usercp"}'>
		<h3>{$this->lang->words['ucp_other_info']}</h3>
		<ul>
			{$optional_output}
		</ul>
	</fieldset>
</if>]]></template_content>
      <template_name>membersProfileForm</template_name>
      <template_data><![CDATA[$personal_statement='',$required_output='',$optional_output='',$day='',$mon='',$year='']]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<input type='hidden' name='key' value='{$key}' />
<input type='hidden' name='removeattachid' value='0' />
{parse striping="usercp" classes="row1,row2"}
<if test="$preview_sig">
	<fieldset class='{parse striping="usercp"}'>
		<h3>{$this->lang->words['cp_current_sig']}</h3>
		<div class='signature'>
			{$preview_sig}
		</div>
	</fieldset>
</if>
<fieldset class='{parse striping="usercp"}'>
	<h3>{$this->lang->words['cp_edit_sig']}</h3>
	<div>
		{$editor_html}
	</div>
</fieldset>
<if test="hasSignatureLimits:|:$this->memberData['g_signature_limits']">
	<fieldset class='{parse striping="usercp"}'>
		<h3>{$this->lang->words['sig_restrictions']}</h3>
		<br />
		<div class='desc'>
			{$this->lang->words['sig_restrictions_contain']}
			<ul class='bullets'>
				<if test="$sig_restrictions[1] !== ''">
					<li>{parse expression="sprintf( $this->lang->words['sig_max_imagesr'], $sig_restrictions[1] )"}</li>
				<else />
					<li>{$this->lang->words['sig_max_imagesr_nl']}</li>
				</if>
				<if test="$sig_restrictions[2] !== '' || $sig_restrictions[3] !== ''">
					<li>{parse expression="sprintf( $this->lang->words['sig_max_imgsize'], $sig_restrictions[2], $sig_restrictions[3] )"}</li>
				<else />
					<li>{$this->lang->words['sig_max_imgsize_nl']}</li>
				</if>
				<if test="$sig_restrictions[4] !== ''">
					<li>{parse expression="sprintf( $this->lang->words['sig_max_urls'], $sig_restrictions[4] )"}</li>
				<else />
					<li>{$this->lang->words['sig_max_urls_nl']}</li>
				</if>
				<if test="$sig_restrictions[5] !== ''">
					<li>{parse expression="sprintf( $this->lang->words['sig_max_lines'], $sig_restrictions[5] )"}</li>
				<else />
					<li>{$this->lang->words['sig_max_lines_nl']}</li>
				</if>
			</ul>
		</div>
	</fieldset>
</if>
<if test="disablelightbox:|:!$this->settings['disable_lightbox']">
{parse template="include_lightbox" group="global" params=""}
</if>
{parse template="include_highlighter" group="global" params="1"}]]></template_content>
      <template_name>membersSignatureForm</template_name>
      <template_data><![CDATA[$preview_sig="",$editor_html="",$sig_restrictions=array()]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<fieldset class='row1'>
	<h3>{$this->lang->words['cp_edit_sig']}</h3>
	<br />
	<if test="$form['_noPerm']">
		<p class='message error'>{$form['_noPerm']}</p>
	</if>
</fieldset>]]></template_content>
      <template_name>membersSignatureFormError</template_name>
      <template_data>$form</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<form action="{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=modSaveAnnouncement&amp;do=saveIt&amp;announce_id={$announce['announce_id']}&amp;type={$type}" base="public"}" method="post" name="REPLIER" id='postingform' onsubmit='return ValidateForm()'>
<fieldset class='row1'>
	<h3>{$button}</h3>
	<if test="announceMessage:|:$msg != """>
		<br /><p class='message unspecific'>{$msg}</p>
	</if>
	<ul>
		<li class='field'>
			<label for='announce_title'>{$this->lang->words['announce_form_title']}</label>
			<input class='input_text' type="text" size="30" name="announce_title" id='announce_title' value="{$announce['announce_title']}" tabindex="1" />
		</li>
		<li class='field'>
			<label for='announce_start'>{$this->lang->words['announce_form_start']}</label>
			<span class="desc">{$this->lang->words['announce_form_startdesc']}</span>
			<input type="text" size="10" name="announce_start" id='announce_start' value="{$announce['announce_start']}" tabindex="2" />
		</li>
		<li class='field'>
			<label for='announce_end'>{$this->lang->words['announce_form_end']}</label>
			<span class="desc">{$this->lang->words['announce_form_enddesc']}</span>
			<input type="text" size="10" name="announce_end" id='announce_end' value="{$announce['announce_end']}" tabindex="2" />
		</li>
		<li class='field'>
			<label for='announce_forum'>{$this->lang->words['announce_form_forums']}</label>
			<span class="desc">{$this->lang->words['announce_form_forums2']}</span>
			<select class="input_select" multiple="multiple" size="10" id='announce_forum' name="announce_forum[]" tabindex="4">{$forum_html}</select>
		</li>
		<li class='field'>
			{$editor_html}
		</li>
	</ul>
</fieldset>
<fieldset class='row2'>
	<h3>{$this->lang->words['announce_form_options']}</h3>
	<ul>
		<li class='field checkbox'>
			<input type="checkbox" class="checkbox" name="announce_active" id='announce_active' value="1" {$announce['announce_active_checked']} />
			<label for='announce_active'>{$this->lang->words['announce_form_enable']}</label>
		</li>
		<li class='field checkbox'>
			<input type="checkbox" class="checkbox" name="announce_html_enabled" id='announce_html_enabled' value="1" {$announce['html_checkbox']} />
			<label for='announce_html_enabled'>{$this->lang->words['announce_use_html']}</label>
		</li>
		<li class='field checkbox'>
			<input type="checkbox" class="checkbox" name="announce_nlbr_enabled" id='announce_nlbr_enabled' value="1" {$announce['nlbr_checkbox']} />
			<label for='announce_nlbr_enabled'>{$this->lang->words['announce_use_nlbr']}</label>
		</li>
	</ul>
</fieldset>
<fieldset class='submit'>
	<input type="submit" value="{$button}" class="input_submit alt" tabindex="7" /> {$this->lang->words['or']} <a href='{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=mod_announcements" base="public"}' title='{$this->lang->words['cancel_edit']}' class='cancel'>{$this->lang->words['cancel']}</a>
</fieldset>
</form>]]></template_content>
      <template_name>modAnnounceForm</template_name>
      <template_data><![CDATA[$announce="",$button="",$forum_html="",$type="",$editor_html="",$msg=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<form action="{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=modUpdateAnnouncements&amp;do=saveIt" base="public"}" id="mutliact" method="post">
<fieldset class='row1'>
	<h3 class='maintitle'>{$this->lang->words['announce_current']}</h3>
	<table class='ipb_table' summary="{$this->lang->words['ucp_announcements']}">
		<tr class='header'>
			<th scope='col' style="width: 40%">{$this->lang->words['announce_title']}</th>
			<th scope='col' class='short' style="width: 10%">{$this->lang->words['announce_starts']}</th>
			<th scope='col' class='short' style="width: 10%">{$this->lang->words['announce_end']}</th>
			<th scope='col' style="width: 25%">{$this->lang->words['announce_forums']}</th>
			<th scope='col' style="width: 15%">&nbsp;</th>
		</tr>
		<if test="hasAnnouncements:|:is_array( $announcements ) AND count( $announcements )">
			{parse striping="announcements" classes="row1,row2"}
			<foreach loop="announcements:$announcements as $announce">
				<tr class="{parse striping="announcements"}">
					<td>
						<strong><a href="{parse url="showannouncement={$announce['announce_id']}" base="public"}">{$announce['announce_title']}</a></strong> {$announce['announce_inactive']}<div class="desc">{$this->lang->words['announce_by']} {$announce['members_display_name']}</div>
					</td>
					<td class="short">
						<if test="announceStart:|:$announce['announce_start']">
							{parse date="$announce['announce_start']" format="short"}
						<else />
							--
						</if>
					</td>
					<td class="short">
						<if test="announceEnd:|:$announce['announce_end']">
							{parse date="$announce['announce_end']" format="short"}
						<else />
							--
						</if>
					</td>
					<td>
						<div class="forumdesc">
							<if test="announceForum:|:$announce['announce_forum'] == '*'">
								{$this->lang->words['announce_page_allforums']}
							<else />
								<if test="announceHasForums:|:is_array( $announce['_forums'] ) and count( $announce['_forums'] )">
									<if test="announceMostForums:|:count( $announce['_forums'] ) > 5">
										{parse expression="count( $announce['_forums'] )"} {$this->lang->words['announce_page_numforums']}
									<else />
										<ul>
										<foreach loop="announce_forums:$announce['_forums'] as $forum">
											<li><a href="{parse url="showforum={$forum[0]}" base="public"}">{$forum[1]}</a></li>
										</foreach>
										</ul>
									</if>
								</if>
							</if>
						</div>
					</td>
					<td class="short">
						<a href="{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=modEditAnnouncement&amp;do=edit&amp;announce_id={$announce['announce_id']}" base="public"}">{$this->lang->words['announce_edit']}</a>
						&middot; <a href="{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=modDeleteAnnouncement&amp;do=edit&amp;announce_id={$announce['announce_id']}" base="public"}" id="del_{$announce['announce_id']}">{$this->lang->words['announce_delete']}</a>
						<script type='text/javascript'>
							$('del_{$announce['announce_id']}').observe('click', ipb.ucp.deleteAnnouncement.bindAsEventListener( this, {$announce['announce_id']} ) );
						</script>
					</td>
				</tr>
			</foreach>
		<else />
			<tr>
				<td align="center" colspan="5">{$this->lang->words['announce_none']}</td>
			</tr>
		</if>
	</table>
</fieldset>
<fieldset class='submit'>
	<a href="{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=modAddAnnouncement&amp;do=add" base="public"}" class='input_submit'>{$this->lang->words['announce_add']}</a>
</fieldset>
</form>]]></template_content>
      <template_name>modAnnouncements</template_name>
      <template_data>$announcements</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<fieldset class='row1'>
	<h3>{$this->lang->words['account_pass_title']}</h3>
	<br />
	<p class='message unspecific'>
		<if test="changePasswordAdmin:|:$this->memberData['g_access_cp']">
			{$this->lang->words['admin_emailpassword']}
		<else />
			{$this->lang->words['pass_change_text']}
		</if>
	</p>
	
	<if test="changePasswordNotAdmin:|:!$this->memberData['g_access_cp']">
		<ul>
			<li class='field'>
				<label for='current_pass'>{$this->lang->words['account_pass_old']}</label>
				<input type="password" name="current_pass" value="" id='current_pass' class='input_text' />
			</li>
			<li class='field'>
				<label for='new_pass_1'>{$this->lang->words['account_pass_new']}</label>
				<input type="password" name="new_pass_1" value="" id='new_pass_1' class='input_text' />
			</li>
			<li class='field'>
				<label for='new_pass_2'>{$this->lang->words['account_pass_new2']}</label>
				<input type="password" name="new_pass_2" value="" id='new_pass_2' class='input_text' />
			</li>
		</ul>
	</if>
</fieldset>]]></template_content>
      <template_name>passwordChangeForm</template_name>
      <template_data/>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<a href="{parse url="act=attach&amp;type={$data['type']}&amp;id={$data['attach_id']}" base="public"}" title="{$this->lang->words['attach_dl']}" target="_blank"><img src="{$this->settings['mime_img']}/{$data['mime_image']}" alt="{$this->lang->words['attached_file']}" /></a>
&nbsp;<a href="{parse url="act=attach&amp;type={$data['type']}&amp;id={$data['attach_id']}" base="public"}" title="{$this->lang->words['attach_dl']}" target="_blank">{$data['attach_file']}</a> ( {$data['file_size']} )
<span class="desc">{$this->lang->words['attach_hits']}: {$data['attach_hits']}</span><br />]]></template_content>
      <template_name>Show_attachments</template_name>
      <template_data><![CDATA[$data=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<div class="formsubtitle">{$title}</div>
	<p>$msg</p>]]></template_content>
      <template_name>ucp_message</template_name>
      <template_data><![CDATA[$title="",$msg=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[{parse js_module="ucp"}
<if test="global_fb:|:IPSLib::fbc_enabled() === TRUE">
	<!-- SKINNOTE: This could be added dynamically by JS if this is too obtrusive. FB users need JS on, so no worries there -->
	<if test="$this->registry->output->isHTTPS">
		<script src="https://ssl.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php" type="text/javascript"></script>
	<else />
		<script src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php" type="text/javascript"></script>
	</if>	<if test="no_fb_email:|:! $this->memberData['fb_emailallow'] AND strstr( $this->memberData['email'], '@proxymail.facebook.com' )">
		<div id='fbc_emailCheck' style='display:none'>
			<fb:prompt-permission perms="email">
				<div class='message unspecific'>
					<strong>{$this->lang->words['cannot_get_email']}</strong>
					<br />
					{$this->lang->words['cannot_get_email_2']}
					<br />
					<u>{$this->lang->words['click_allow_email']}</u>
				</div>
			</fb:prompt-permission>
			<br />
		</div>
		<script type="text/javascript">
			/* Init Facebook JS */
			FB_RequireFeatures(["XFBML"], function()
			{
				FB.init("{$this->settings['fbc_api_id']}", "{$this->settings['fbc_xdlocation']}" );
			} );
			/* As the REST can take a short while, the div shows then hides; this delays it until its ready to show or hide */
			Event.observe( window, 'load', function() { $('fbc_emailCheck').show(); } );
		</script>
	</if>
</if>
<if test="usercp_form:|:$hide_form == 0">
	<if test="has_max_upload:|:$maxUpload">
		<form method='post' enctype="multipart/form-data" action='{$this->settings['base_url']}app=core&amp;module=usercp&amp;tab={$current_tab}&amp;area={$current_area}' id='userCPForm'>
	<else />
		<form method='post' action='{$this->settings['base_url']}app=core&amp;module=usercp&amp;tab={$current_tab}&amp;area={$current_area}' id='userCPForm'>
	</if>
</if>
	<fieldset>
		<input type="hidden" name="MAX_FILE_SIZE" value="$maxUpload" />
		<input type='hidden' name='do' value='save' />
		<input type='hidden' name='secure_hash' value='{$this->member->form_hash}' />
		<input type='hidden' name='s' value='{$this->request['s']}' />
	</fieldset>
<h2>{$this->lang->words['ucp_title']}</h2>
<ul class='tab_bar no_title'>
	<foreach loop="tabs:$tabs as $tab_app => $tab">
		<if test="active_tab:|:$tab_app == $current_tab">
			<li class='active'>{$tab['_name']}</li>
		<else />
			<li><a href="{parse url="module=usercp&amp;tab={$tab_app}" base="publicWithApp"}" title="{$this->lang->words['settings_for_ucp']} {$tab['_name']}">{$tab['_name']}</a></li>
		</if>
	</foreach>
</ul>
<div class='tab_body usercp_body'>
	<ul id='usercp_menu'>
		<if test="tabsMenus:|:is_array( $tabs[ $current_tab ]['_menu'] ) AND count( $tabs[ $current_tab ]['_menu'] )">
			<foreach loop="items:$tabs[ $current_tab ]['_menu'] as $idx => $item">
				<if test="tabsMenus_active:|:$item['area'] == $current_area">
					<li class='active'>{$item['title']}</li>
				<else />
					<li><a href="{parse url="module=usercp&amp;tab={$current_tab}&amp;{$item['url']}" base="publicWithApp"}">{$item['title']}</a></li>
				</if>
			</foreach>
		</if>
	</ul>
	<div id='usercp_content'>
		<if test="has_errors:|:is_array( $errors ) AND count( $errors )">
			<p class='message error'>
				<foreach loop="errors:$errors as $error">
					$error<br />
				</foreach>
			</p>
		</if>
		<if test="didSave:|:$this->request['saved'] == 1">
			<p class='message'>{$this->lang->words['ucp__settings_saved']}</p>
		</if>
		$html
		
		<if test="submit_button:|:$hide_form == 0">
		<fieldset class='submit'>
			<input type='submit' class='input_submit' name='submit' value='{$this->lang->words['ucp__save_changes']}' /> {$this->lang->words['or']} <a href='{parse url="app=core&amp;module=usercp&amp;tab={$current_tab}&amp;area={$current_area}" base="public"}' title='{$this->lang->words['cancel_edit']}' class='cancel'>{$this->lang->words['cancel']}</a>
		</fieldset>
		</if>
	</div>
</div>
<if test="end_form:|:$hide_form == 0">
</form>
</if>]]></template_content>
      <template_name>userCPTemplate</template_name>
      <template_data>$current_tab, $html, $tabs, $current_area, $errors=array(), $hide_form=0, $maxUpload=0</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<form action="{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=watch&amp;watch=$method&amp;do=saveWatch" base="public"}" method="post" name="REPLIER">
<input type="hidden" name="auth_key" value="{$this->member->form_hash}" />
<input type="hidden" name="tid" value="{$topic['tid']}" />
<input type="hidden" name="fid" value="{$forum['id']}" />
<input type="hidden" name="st" value="{$this->request['st']}" />
<fieldset class='row1'>
	<if test="watchTid:|:$topic['tid'] != ''">
		<h3>{$this->lang->words['subs_c_title']} {$this->lang->words['subs_for']} <a href='{parse url="showtopic={$topic['tid']}&amp;st={$this->request['st']}" template='showtopic' seotitle='{$topic['title_seo']}' base="public"}' title='{$this->lang->words['topic_title']}'>{$topic['title']}</a></h3>
		<br />
		<p class='message unspecific'>{$this->lang->words['subs_exp_text']}</p>
	<else />
		<h3>{$this->lang->words['subs_c_title']} {$this->lang->words['subs_for']} <a href='{parse url="showforum={$forum['id']}" base="public" template="showforum" seotitle="{$forum['name_seo']}"}'>{$forum['name']}</a></h3>
		<br />
		<p class='message unspecific'>{$this->lang->words['subsf_exp_text']}</p>
	</if>
	
	<ul>
		<li class='field checkbox'>
			<input class='input_radio' type="radio" id='email_none' name="emailtype" value="none" />
			<if test="watchEmailNone:|:$topic['tid'] != ''">
				<label for='email_none'><strong>{$this->lang->words['subs_none_title']}</strong></label>
				<span class='desc'>{$this->lang->words['subs_none_desc']}</span>
			<else />
				<label for='email_none'><strong>{$this->lang->words['subsf_none_title']}</strong></label>
				<span class="desc">{$this->lang->words['subsf_none_desc']}</span>
			</if>
		</li>
		<li class='field checkbox'>
			<input class='input_radio' type="radio" id='email_delayed' name="emailtype" value="delayed" checked="checked" />
			<if test="watchEmailDelay:|:$topic['tid'] != ''">
				<label for='email_delayed'><strong>{$this->lang->words['subs_delayed']}</strong></label>
				<span class="desc">{$this->lang->words['subs_delayed_desc']}</span>
			<else />
				<label for='email_delayed'><strong>{$this->lang->words['subsf_delayed']}</strong></label>
				<span class="desc">{$this->lang->words['subsf_delayed_desc']}</span>
			</if>
		</li>
		<li class='field checkbox'>
			<input class='input_radio' type="radio" id='email_immediate' name="emailtype" value="immediate" />
			<if test="watchEmailImmediate:|:$topic['tid'] != ''">
				<label for='email_immediate'><strong>{$this->lang->words['subs_immediate']}</strong></label>
				<span class="desc">{$this->lang->words['subs_immediate_desc']}</span>
			<else />
				<label for='email_immediate'><strong>{$this->lang->words['subsf_immediate']}</strong></label>
				<span class="desc">{$this->lang->words['subsf_immediate_desc']}</span>
			</if>
		</li>
		<li class='field checkbox'>
			<input class='input_radio' type="radio" id='email_daily' name="emailtype" value="daily" />
			<if test="watchEmailDaily:|:$topic['tid'] != ''">
				<label for='email_daily'><strong>{$this->lang->words['subs_daily']}</strong></label>
				<span class="desc">{$this->lang->words['subs_daily_desc']}</span>
			<else />
				<label for='email_daily'><strong>{$this->lang->words['subsf_daily']}</strong></label>
				<span class="desc">{$this->lang->words['subsf_daily_desc']}</span>
			</if>
		</li>
		<li class='field checkbox'>
			<input class='input_radio' type="radio" id='email_weekly' name="emailtype" value="weekly" />
			<if test="watchEmailWeekly:|:$topic['tid'] != ''">
				<label for='email_weekly'><strong>{$this->lang->words['subs_weekly']}</strong></label>
				<span class="desc">{$this->lang->words['subs_weekly_desc']}</span>
			<else />
				<label for='email_weekly'><strong>{$this->lang->words['subsf_weekly']}</strong></label>
				<span class="desc">{$this->lang->words['subsf_weekly_desc']}</span>
			</if>
		</li>
	</ul>
</fieldset>

<fieldset class='submit'>
	<input type="submit" value="{$this->lang->words['subs_submit']}" class="input_submit" /> {$this->lang->words['or']}
	<if test="cancelGoToTopic:|:$topic['tid'] != ''">
		<a href='{parse url="showtopic={$topic['tid']}" template="showtopic" seotitle="{$topic['title_seo']}" base="public"}' title='{$this->lang->words['cancel']}' class='cancel'>{$this->lang->words['cancel']}</a>
	<else />
		<a href='{parse url="showforum={$forum['id']}" template="showforum" seotitle="{$forum['name_seo']}" base="public"}' title='{$this->lang->words['cancel']}' class='cancel'>{$this->lang->words['cancel']}</a>
	</if>
</fieldset>
</form>]]></template_content>
      <template_name>watchChoices</template_name>
      <template_data><![CDATA[$forum="",$topic="",$method=""]]></template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<br />
<div class='row1'>
	<form action="{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=updateWatchForums&amp;do=saveIt" base="public"}" id="checkBoxForm" method="post">
	<input type="hidden" name="authKey" value="{$this->member->form_hash}" />
	<if test="hasWatchedForums:|:is_array( $forumArray ) AND count( $forumArray )">
		<foreach loop="categories:$forumArray as $parentID => $catData">
			<h3 class='maintitle'>{$catData['_data']['name']}</h3>
			<table class='ipb_table' summary="{$this->lang->words['ucp_watched_forums']}">
				<tr class='header'>
					<th scope='col' width="5%">&nbsp;</th>
					<th scope='col' width="50%">{$this->lang->words['ft_forum']}</th>
					<th scope='col' align="center" width="5%">{$this->lang->words['ft_topics']}</th>
					<th scope='col' align="center" width="5%">{$this->lang->words['ft_posts']}</th>
					<th scope='col' align="center" width="35%">{$this->lang->words['ft_last_post']}</th>
					<th scope='col' align="center" width="5%" class='short'><input id="checkAllForums_{$parentID}" type="checkbox" value="{$this->lang->words['check_all']}" /><!-- SKINNOTE: add check all functionality back --></th>
				</tr>
				{parse striping="forums" classes="row1,row2"}
				<foreach loop="forums:$catData['_forums'] as $forumID => $data">
					<tr class='{parse striping="forums"}'>
						<td class="altrow short">{parse replacement="{$data['folder_icon']}"}</td>
						<td>
							<strong><a href="{parse url="showforum={$data['id']}" base="public" seotitle="{$data['name_seo']}" template="showforum"}">{$data['name']}</a></strong><br />
							<span class="desc">
								{$data['description']}
								<br />
								{$this->lang->words['subs_c_type']}: {$this->lang->words[ $data['_type'] ]}
								<if test="forumNewTopics:|:$data['_newTopics']">
									<strong><a href="{parse url="showforum={$data['id']}&amp;show=sinceLastVisit" base="public" seotitle="{$data['name_seo']}" template="showforum"}">{$data['_newTopics']} {$this->lang->words['ucp_reply_since']}</a></strong>
								</if>
							</span>
						</td>
						<td class="short altrow">{$data['topics']}</td>
						<td class="short altrow">{$data['posts']}</td>
						<td>
							{parse date="$data['last_post']" format="long"}<br />{$this->lang->words['in']}
							<if test="forumPassword:|:$data['password']">
								{$this->lang->words['f_none']}
							<else />
								<a href='{parse url="showtopic={$data['last_id']}&amp;view=getlastpost" base="public" seotitle="{$data['seo_last_title']}" template="showtopic"}'>{$data['last_title']}</a>
							</if>
							<br />{$this->lang->words['by']}
							<if test="forumLastPoster:|:isset($data['last_poster_name'])">
								<if test="forumLastPosterId:|:$data['last_poster_id']">
									<a href='{parse url="showuser={$data['last_poster_id']}" base="public" seotitle="{$data['seo_last_name']}" template="showuser"}'>{$data['last_poster_name']}</a> {parse template="user_popup" group="global" params="$data['last_poster_id']"}
								<else />
									{$data['last_poster_name']}
								</if>
							<else />
								{$this->lang->words['f_none']}
							</if>
						</td>
						<td class="short altrow"><input class='input_check checkall_{$parentID}' type="checkbox" name="forumIDs[{$data['id']}]" value="1" /></td>
					</tr>
				</foreach>
			</table>
			<script type='text/javascript'>
				ipb.global.registerCheckAll('checkAllForums_{$parentID}', 'checkall_{$parentID}');
			</script>
			<br />
		</foreach>
	<else />
		<p class='no_messages'>{$this->lang->words['forum_subs_none']}</p>
	</if>
	<if test="mmWatchedForums:|:count($forumArray)">
		<div class='moderation_bar rounded with_action'>
			<select name="trackchoice">
				<option value="unsubscribe">{$this->lang->words['subs_delete']}</option>
				<option value="none">{$this->lang->words['subs_c_change']} {$this->lang->words['subsf_none_title']}</option>
				<option value="immediate">{$this->lang->words['subs_c_change']} {$this->lang->words['subsf_immediate']}</option>
				<option value="delayed">{$this->lang->words['subs_c_change']} {$this->lang->words['subsf_delayed']}</option>
				<option value="daily">{$this->lang->words['subs_c_change']} {$this->lang->words['subsf_daily']}</option>
				<option value="weekly">{$this->lang->words['subs_c_change']} {$this->lang->words['subsf_weekly']}</option>
			</select>&nbsp;&nbsp;
			<input type="submit" class="input_submit alt" value="{$this->lang->words['with_selected']}" />
		</div>
	</if>
</form>
</div>]]></template_content>
      <template_name>watchedForums</template_name>
      <template_data>$forumArray</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
    <template>
      <template_group>skin_ucp</template_group>
      <template_content><![CDATA[<fieldset class='row1'>
	<h3 class='maintitle'>{$this->lang->words['subs_header']}</h3>
	<form action="{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=updateWatchTopics&amp;do=saveIt" base="public"}" id="checkBoxForm" method="post">
	<table class='ipb_table' summary="{$this->lang->words['ucp_user_attach']}">
		<tr class='header'>
			<th scope='col' style='width: 5%'>&nbsp;</th>
			<th scope='col' style='width: 50%'>{$this->lang->words['subs_topic']}</th>
			<th scope='col' style='width: 5%' class='short'>{$this->lang->words['subs_replies']}</th>
			<th scope='col' style='width: 5%' class='short'>{$this->lang->words['subs_view']}</th>
			<th scope='col' style='width: 30%' class='short'>{$this->lang->words['subs_last_post']}</th>
			<th scope='col' style='width: 5%' class='short'><input class='checkbox' id="checkAllTopics" type="checkbox" value="{$this->lang->words['check_all']}" /><!-- SKINNOTE: Add select all back --></th>
		</tr>
		<if test="watchedTopicsForums:|:is_array( $mainForumArray ) AND count( $mainForumArray )">
			<foreach loop="watched_forums:$mainForumArray as $id => $data">
				<tr class='subhead altbar'>
					<th colspan="6">{$data['forum_name']}</th>
				</tr>
				<if test="watchedTopicsTopics:|:is_array( $mainForumArray[ $id ]['_topics'] )">
					{parse striping="topics" classes="row1,row2"}
					<foreach loop="watched_topics:$mainForumArray[ $id ]['_topics'] as $topicID => $topicData">
						<tr>
							<td class="row1 short">{parse replacement="{$topicData['folder_img']}"}</td>
							<td class="row1">
								<a href="{parse url="showtopic={$topicData['tid']}" base="public" seotitle="{$topicData['title_seo']}" template="showtopic"}">{$topicData['title']}</a><br />
				  				<span class="desc">
									{$topicData['description']}
									<if test="watchedTopicsDescription:|:$topicData['description']">
										<br />
									</if>
									{$this->lang->words['subs_start']} {parse date="$topicData['track_started']" format="long"}
				  					<br />
				  					{$this->lang->words['subs_c_type']}: {$this->lang->words[ $topicData['_type'] ]}
				  				</span>
				  			</td>
				  			<td class="row1 short">{$topicData['posts']}</td>
				  			<td class="row1 short">{$topicData['views']}</td>
				  			<td class="row1">{parse date="$topicData['_last_post']" format="long"}<br />{$this->lang->words['subs_by']} {$topicData['last_poster']}</td>
				  			<td class="row1 short"><input class='input_check checkall' type="checkbox" name="topicIDs[{$topicData['topic_id']}]" value="1" /></td>
				  		</tr>
					</foreach>
				</if>
			</foreach>
		<else />
			<tr>
				<td class="row2 short" colspan="6">{$this->lang->words['subs_none']}</td>
			</tr>
		</if>
	</table>
<if test="watchedTopicsMm:|:count($mainForumArray)">
	<div class='moderation_bar with_action rounded'>
		<select name="trackchoice">
			<option value="unsubscribe">{$this->lang->words['subs_delete']}</option>
			<option value="none">{$this->lang->words['subs_c_change']} {$this->lang->words['subs_none_title']}</option>
			<option value="immediate">{$this->lang->words['subs_c_change']} {$this->lang->words['subs_immediate']}</option>
			<option value="delayed">{$this->lang->words['subs_c_change']} {$this->lang->words['subs_delayed']}</option>
			<option value="daily">{$this->lang->words['subs_c_change']} {$this->lang->words['subs_daily']}</option>
			<option value="weekly">{$this->lang->words['subs_c_change']} {$this->lang->words['subs_weekly']}</option>
		</select>&nbsp;&nbsp;
		<input type="hidden" name="authKey" value="{$this->member->form_hash}" />
		<input type="submit" class="input_submit alt" value="{$this->lang->words['with_selected']}" />
	</div>
</if>
</form>
<p style='text-align: right; padding: 5px;'>
	<if test="watchedTopicsAutoprune:|:$this->settings['subs_autoprune'] > 0">
		{parse expression="sprintf( $this->lang->words['auto_prune'], $this->settings['subs_autoprune'] )"}
	<else />
		{$this->lang->words['no_auto_prune']}
	</if>
</p>
<div class='filter_bar rounded'>
	<form action="{parse url="app=core&amp;module=usercp&amp;tab=forums&amp;area=topicsubs" base="public"}" method="post">
		<fieldset>
			
			{$this->lang->words['show_topics_from']}
			<select name="datecut">
			<option value='1'>{$this->lang->words['subs_today']}</option>
			<foreach loop="watched_days:array( 1,7,14,21,30,60,90,365 ) as $day">
				<if test="daySelected:|:$day == $dateCut">
					<option value='$day' selected="selected">{parse expression="sprintf( $this->lang->words['subs_day'], $day )"}</option>
				<else />
					<option value='$day'>{parse expression="sprintf( $this->lang->words['subs_day'], $day )"}</option>
				</if>
			</foreach>
			<if test="allSelected:|:$dateCut == 1000">
				<option value='1000' selected='selected'>{$this->lang->words['subs_all']}</option>
			<else />
				<option value='1000'>{$this->lang->words['subs_all']}</option>
			</if>
			</select>
			<input type="submit" class='input_submit alt' value="{$this->lang->words['jmp_go']}" />
		</fieldset>
 	</form>
</div>
</fieldset>
<script type='text/javascript'>
	ipb.global.registerCheckAll( 'checkAllTopics', 'checkall' );
</script>]]></template_content>
      <template_name>watchedTopics</template_name>
      <template_data>$mainForumArray, $dateCut</template_data>
      <template_updated>1251817154</template_updated>
      <template_removable>0</template_removable>
      <template_user_added>0</template_user_added>
      <template_user_edited>0</template_user_edited>
    </template>
  </templategroup>
</templates>
