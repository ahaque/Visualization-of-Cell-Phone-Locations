<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 2               */
/* CACHE FILE: Generated: Sun, 06 Sep 2009 01:36:56 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_online_2 {

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	/* Make object */
	$this->registry   =  $registry;
	$this->DB         =  $this->registry->DB();
	$this->settings   =& $this->registry->fetchSettings();
	$this->request    =& $this->registry->fetchRequest();
	$this->lang       =  $this->registry->getClass('class_localization');
	$this->member     =  $this->registry->member();
	$this->memberData =& $this->registry->member()->fetchMemberData();
	$this->cache      =  $this->registry->cache();
	$this->caches     =& $this->registry->cache()->fetchCaches();
}
	/* -- showOnlineList --*/
function showOnlineList($rows, $links="", $defaults=array(), $our_mgroups=array()) {
$IPBHTML = "";
$IPBHTML .= "<onlinelist>
" . ((count($rows)) ? ("".$this->__f__8106ff7640f744cde19449ac6ab435cb($rows,$links,$defaults,$our_mgroups)."") : ("")) . "
</onlinelist>
{$links}";
return $IPBHTML;
}


function __f__8106ff7640f744cde19449ac6ab435cb($rows, $links="", $defaults=array(), $our_mgroups=array())
{
	$_ips___x_retval = '';
	foreach( $rows as $session )
	{
		
		$_ips___x_retval .= "
	<online>
		<location>
		" . ((!$session['where_line']) ? ("
			<where>{$this->lang->words['board_index']}</where>
		") : ("" . (($session['where_link'] AND !$session['where_line_more']) ? ("<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$session['where_link']}", 'public','' ), "", "" ) . "</url>") : ("")) . "
			<where>{$session['where_line']}</where>
				" . (($session['where_line_more']) ? ("" . (($session['where_link']) ? ("<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$session['where_link']}", 'public','' ), "", "" ) . "</url>") : ("")) . "
			<where>{$session['where_line_more']}</where>") : ("")) . "")) . "
		</location>
		<date>" . $this->registry->getClass('class_localization')->getDate($session['running_time'],"long", 1) . "</date>
		" . (($session['member_name']) ? ("" . (($session['member_id']) ? ("
		<user>
			<id>{$session['member_id']}</id>
			<name>{$session['member_name']}</name>
			<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$session['member_id']}", 'public','' ), "", "" ) . "</url>		
		</user>		
		") : ("
		<user>
			<id>0</id>
			<name>{$session['member_name']}</name>
			<url></url>		
		</user>			
		")) . "") : ("
		<user>
			<id>0</id>
			<name>Guest</name>
			<url></url>		
		</user>
		")) . "
	</online>
	
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}



}

/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>