<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 2               */
/* CACHE FILE: Generated: Sun, 06 Sep 2009 01:36:56 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_search_2 {

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	/* Make object */
	$this->registry   =  $registry;
	$this->DB         =  $this->registry->DB();
	$this->settings   =& $this->registry->fetchSettings();
	$this->request    =& $this->registry->fetchRequest();
	$this->lang       =  $this->registry->getClass('class_localization');
	$this->member     =  $this->registry->member();
	$this->memberData =& $this->registry->member()->fetchMemberData();
	$this->cache      =  $this->registry->cache();
	$this->caches     =& $this->registry->cache()->fetchCaches();
}
	/* -- activePostsView --*/
function activePostsView($results, $pagination, $total) {
$IPBHTML = "";
$IPBHTML .= "<activecontent>
	<total>{$total}</total>
" . (($total) ? ("
	<results>
	".$this->__f__674fb5c9d979deb470efcf41ebfa9798($results,$pagination,$total)."	</results>	
") : ("")) . "
{$pagination}
</activecontent>";
return $IPBHTML;
}


function __f__674fb5c9d979deb470efcf41ebfa9798($results, $pagination, $total)
{
	$_ips___x_retval = '';
	foreach( $results as $result )
	{
		
		$_ips___x_retval .= "	
		{$result['html']}
	
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- calEventRangedSearchResult --*/
function calEventRangedSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/calendar.png</icon>
	<type>Calendar Ranged Event</type>
	<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=calendar&amp;module=calendar&amp;cal_id={$r['type_id']}&amp;do=showevent&amp;event_id={$r['type_id_2']}&amp;hl={$this->request['search_term']}", 'public','' ), "", "" ) . "</url>
	<title><![CDATA[{$r['content_title']} (" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . " to " . $this->registry->getClass('class_localization')->getDate($r['misc'],"short", 0) . ")]]></title>
	<content><![CDATA[{$r['content']}]]></content>
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
</result>";
return $IPBHTML;
}

/* -- calEventSearchResult --*/
function calEventSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/calendar.png</icon>
	<type>Calendar Event</type>
	<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=calendar&amp;module=calendar&amp;cal_id={$r['type_id']}&amp;do=showevent&amp;event_id={$r['type_id_2']}&amp;hl={$this->request['search_term']}", 'public','' ), "", "" ) . "</url>
	<title><![CDATA[{$r['content_title']}]]></title>
	<content><![CDATA[{$r['content']}]]></content>
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
</result>";
return $IPBHTML;
}

/* -- forumAdvancedSearchFilters --*/
function forumAdvancedSearchFilters($forums) {
$IPBHTML = "";
$IPBHTML .= "<fieldset id='app_filter_forums' class='" .  IPSLib::next( $this->registry->templateStriping["search"] ) . " extra_filter'>
	<ul>
		<li>
			<label for='forums_filter'>Find in <strong>forum</strong>:</label>
			<select name='search_app_filters[forums][]' class='input_select' size='6' multiple='multiple'>
				{$forums}
			</select>
		</li>
	</ul>
</fieldset>";
return $IPBHTML;
}

/* -- forumSearchResult --*/
function forumSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/comments.png</icon>
	<type>Forum</type>
	<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showforum={$r['type_id']}", 'public','' ), "", "" ) . "</url>
	<title><![CDATA[{$r['content_title']}]]></title>
	<content><![CDATA[{$r['content']}]]></content>
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
</result>";
return $IPBHTML;
}

/* -- galleryCommentSearchResult --*/
function galleryCommentSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/gallery.png</icon>
	<type>Gallery Comment</type>
	<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;img={$r['misc']}&amp;hl={$this->request['search_term']}", 'public','' ), "", "" ) . "</url>
	<title><![CDATA[{$r['content_title']}]]></title>
	<content><![CDATA[{$r['content']}]]></content>
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
</result>";
return $IPBHTML;
}

/* -- galleryImageSearchResult --*/
function galleryImageSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/gallery.png</icon>
	<type>Gallery Image</type>
	<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=images&amp;img={$r['type_id_2']}&amp;hl={$this->request['search_term']}", 'public','' ), "", "" ) . "</url>
	<title><![CDATA[{$r['content_title']}]]></title>
	<content><![CDATA[{$r['content']}]]></content>
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
</result>";
return $IPBHTML;
}

/* -- helpSearchResult --*/
function helpSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/core.png</icon>
	<type>Help File</type>
	<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=help&amp;do=01&amp;HID={$r['type_id_2']}&amp;hl={$this->request['search_term']}", 'public','' ), "", "" ) . "</url>
	<title><![CDATA[{$r['content_title']}]]></title>
	<content><![CDATA[{$r['content']}]]></content>
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
</result>";
return $IPBHTML;
}

/* -- memberSearchResult --*/
function memberSearchResult($r, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/members.png</icon>
	<type>Member</type>
	<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['type_id_2']}", 'public','' ), "", "" ) . "</url>
	<title><![CDATA[{$r['content_title']}]]></title>
	<content><![CDATA[{$r['content']}]]></content>
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
</result>";
return $IPBHTML;
}

/* -- newPostsView --*/
function newPostsView($results, $pagination, $total) {
$IPBHTML = "";
$IPBHTML .= "<newcontent>
	<total>{$total}</total>
" . (($total) ? ("
	<results>
	".$this->__f__73c1b98cd97556cbeee37bf7663b39d5($results,$pagination,$total)."	</results>	
") : ("")) . "
{$pagination}
</newcontent>";
return $IPBHTML;
}


function __f__73c1b98cd97556cbeee37bf7663b39d5($results, $pagination, $total)
{
	$_ips___x_retval = '';
	foreach( $results as $result )
	{
		
		$_ips___x_retval .= "	
		{$result['html']}
	
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- searchAdvancedForm --*/
function searchAdvancedForm($filters='', $msg='', $removed_search_terms=array()) {
$IPBHTML = "";
$IPBHTML .= "";
return $IPBHTML;
}

/* -- searchResults --*/
function searchResults($results, $pagination, $total, $showing, $search_term, $url_string, $current_key, $removed_search_terms=array()) {
$IPBHTML = "";
$IPBHTML .= "<search>
	<term>{$search_term}</term>
	<total>{$total}</total>
" . (($total) ? ("
	<results>
	".$this->__f__f81a4a466898444482d7388afe258956($results,$pagination,$total,$showing,$search_term,$url_string,$current_key,$removed_search_terms)."	</results>	
") : ("")) . "
{$pagination}
</search>";
return $IPBHTML;
}


function __f__f81a4a466898444482d7388afe258956($results, $pagination, $total, $showing, $search_term, $url_string, $current_key, $removed_search_terms=array())
{
	$_ips___x_retval = '';
	foreach( $results as $result )
	{
		
		$_ips___x_retval .= "	
		{$result['html']}
	
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- searchRowGenericFormat --*/
function searchRowGenericFormat($r, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/core.png</icon>
	<type>Content</type>
	<url></url>
	<title><![CDATA[{$r['content_title']}]]></title>
	<content><![CDATA[{$r['content']}]]></content>
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
</result>";
return $IPBHTML;
}

/* -- topicPostSearchResult --*/
function topicPostSearchResult($r, $indent, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/forums.png</icon>
	<type>Topic</type>
	<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$r['type_id_2']}&amp;view=" . (($this->request['do']=='new_posts') ? ("getnewpost") : ("" . (($r['misc']) ? ("findpost&amp;p={$r['misc']}") : ("")) . "")) . "&amp;hl={$this->request['search_term']}&amp;fromsearch=1", 'public','' ), "", "" ) . "</url>
	<title><![CDATA[{$r['content_title']}]]></title>
	<content><![CDATA[{$r['content']}]]></content>
" . (($r['_forum_trail']) ? ("
	<forums>
	".$this->__f__b1f11753ae46919fbecb8da2fe059b38($r,$indent,$resultAsTitle)."	</forums>
") : ("")) . "
	<replies>{$r['posts']}</replies>
	<attachments>{$r['topic_hasattach']}</attachments>
" . (($this->request['do'] == 'new_posts') ? ("
	<date>" . $this->registry->getClass('class_localization')->getDate($r['last_post'],"short", 0) . "</date>
	<user>
		<id>{$r['last_poster_id']}</id>
		<name>{$r['last_poster_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['last_poster_id']}", 'public','' ), "", "" ) . "</url>
	</user>
") : ("
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
")) . " 
</result>";
return $IPBHTML;
}


function __f__b1f11753ae46919fbecb8da2fe059b38($r, $indent, $resultAsTitle=false)
{
	$_ips___x_retval = '';
	foreach( $r['_forum_trail'] as $i => $f )
	{
		
		$_ips___x_retval .= "
		<forum>
			<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$f[1]}", 'public','' ), "{$f[2]}", "showforum" ) . "</url>
			<name>{$f[0]}</name>
		</forum>
	
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- topicPostSearchResultAsForum --*/
function topicPostSearchResultAsForum($r, $indent, $resultAsTitle=false) {
$IPBHTML = "";
$IPBHTML .= "<result>
	<icon>{$this->settings['public_dir']}style_extra/app_icons/forums.png</icon>
	<type>Topic</type>
	<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$r['type_id_2']}&amp;view=" . (($this->request['do']=='new_posts') ? ("getnewpost") : ("" . (($r['misc']) ? ("findpost&amp;p={$r['misc']}") : ("")) . "")) . "&amp;hl={$this->request['search_term']}&amp;fromsearch=1", 'public','' ), "", "" ) . "</url>
	<title><![CDATA[{$r['content_title']}]]></title>
	<content><![CDATA[{$r['content']}]]></content>
" . (($r['_forum_trail']) ? ("
	<forums>
	".$this->__f__16227639c10cd9b4e724487c44ce264f($r,$indent,$resultAsTitle)."	</forums>
") : ("")) . "
	<replies>{$r['posts']}</replies>
	<attachments>{$r['topic_hasattach']}</attachments>
" . (($this->request['do'] == 'new_posts') ? ("
	<date>" . $this->registry->getClass('class_localization')->getDate($r['last_post'],"short", 0) . "</date>
	<user>
		<id>{$r['last_poster_id']}</id>
		<name>{$r['last_poster_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['last_poster_id']}", 'public','' ), "", "" ) . "</url>
	</user>
") : ("
	<date>" . $this->registry->getClass('class_localization')->getDate($r['updated'],"short", 0) . "</date>
	<user>
		<id>{$r['member_id']}</id>
		<name>{$r['members_display_name']}</name>
		<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['member_id']}", 'public','' ), "", "" ) . "</url>
	</user>
")) . " 
</result>";
return $IPBHTML;
}


function __f__16227639c10cd9b4e724487c44ce264f($r, $indent, $resultAsTitle=false)
{
	$_ips___x_retval = '';
	foreach( $r['_forum_trail'] as $i => $f )
	{
		
		$_ips___x_retval .= "
		<forum>
			<url>" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$f[1]}", 'public','' ), "{$f[2]}", "showforum" ) . "</url>
			<name>{$f[0]}</name>
		</forum>
	
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- topicPostSubresultWrap --*/
function topicPostSubresultWrap($content) {
$IPBHTML = "";
$IPBHTML .= "{$content}";
return $IPBHTML;
}

/* -- userPostsView --*/
function userPostsView($results, $pagination, $total) {
$IPBHTML = "";
$IPBHTML .= "<usercontent>
	<total>{$total}</total>
" . (($total) ? ("
	<results>
	".$this->__f__6cf5c91e0b31486634544403aca937a8($results,$pagination,$total)."	</results>	
") : ("")) . "
{$pagination}
</usercontent>";
return $IPBHTML;
}


function __f__6cf5c91e0b31486634544403aca937a8($results, $pagination, $total)
{
	$_ips___x_retval = '';
	foreach( $results as $result )
	{
		
		$_ips___x_retval .= "	
		{$result['html']}
	
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}



}

/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>