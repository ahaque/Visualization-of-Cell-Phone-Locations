<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 1               */
/* CACHE FILE: Generated: Sun, 06 Sep 2009 04:32:04 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_topic_1 {

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	/* Make object */
	$this->registry   =  $registry;
	$this->DB         =  $this->registry->DB();
	$this->settings   =& $this->registry->fetchSettings();
	$this->request    =& $this->registry->fetchRequest();
	$this->lang       =  $this->registry->getClass('class_localization');
	$this->member     =  $this->registry->member();
	$this->memberData =& $this->registry->member()->fetchMemberData();
	$this->cache      =  $this->registry->cache();
	$this->caches     =& $this->registry->cache()->fetchCaches();
}
	/* -- announcement_show --*/
function announcement_show($announce="",$author="") {
$IPBHTML = "";
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("topic", "0" ) . "
<h2 class='maintitle'>{$this->lang->words['announce_title']}: {$announce['announce_title']}</h2>
<div class='generic_bar'></div>
<div class='post_block first hentry announcement' id='announce_id_{$announce['announce_id']}'>
	<div class='post_wrap'>
		" . (($author['member_id']) ? ("
			<h3>
		") : ("
			<h3 class='guest'>
		")) . "
				" . (($author['member_id']) ? ("" . (($author['_online']) ? ("
						" . $this->registry->getClass('output')->getReplacement("user_online") . "
					") : ("
						" . $this->registry->getClass('output')->getReplacement("user_offline") . "
					")) . " &nbsp;
							<span class=\"author vcard\"><a class=\"url fn\" href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$author['member_id']}", 'public','' ), "{$author['members_seo_name']}", "showuser" ) . "'>{$author['members_display_name']}</a>" . $this->registry->getClass('output')->getTemplate('global')->user_popup($author['member_id'],$author['members_seo_name']) . "</span>") : ("
					{$author['members_display_name']}
				")) . "
			</h3>
		<div class='author_info'>
			" . $this->registry->getClass('output')->getTemplate('global')->userInfoPane($author, 'announcement', array()) . "
		</div>
		<div class='post_body'>
			<div class='post entry-content'>
				{$announce['announce_post']}
			</div>
		</div>
		<ul class='post_controls'></ul>
	</div>			
</div>";
return $IPBHTML;
}

/* -- build_threaded --*/
function build_threaded($post, $child) {
$IPBHTML = "";
$IPBHTML .= "<ul>
	<li>
			{$post['depthguide']} <span" . ((isset( $post['_show_highlight'] ) && $post['_show_highlight']) ? (" class='highlight'") : ("")) . ">" . $this->registry->getClass('output')->getReplacement("{$post['new_post']}") . " <strong>{$post['linked_name']}</strong> <span class='post_title'><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$post['topic_id']}&amp;pid={$post['pid']}&amp;start={$this->request['start']}&amp;st={$this->request['st']}#entry{$post['pid']}", 'public','' ), "", "" ) . "\">{$post['post_title']}</a></span> &nbsp;&nbsp;<span class='desc'>{$post['formatted_date']}</span></span>
			{$child}
	</li>
</ul>";
return $IPBHTML;
}

/* -- pollDisplay --*/
function pollDisplay($poll, $topicData, $forumData, $pollData, $showResults) {
$IPBHTML = "";
$IPBHTML .= "<script type='text/javascript'>
	ipb.templates['poll_voters'] = new Template(\"<h3 class='bar'>{$this->lang->words['poll_voted_for']} #{title}</h3><div class='general_box'>#{content}</div>\");
</script>
<div class='general_box alt poll' id='poll_{$poll['pid']}'>
	<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=vote&amp;t={$topicData['tid']}&amp;st={$this->request['st']}&amp;do=add", 'public','' ), "", "" ) . "\" name='pollForm' method=\"post\">
		<h3>{$this->lang->words['poll']} {$poll['poll_question']}" . (($showResults) ? (" <span class='desc'>({$poll['_totalVotes']} {$this->lang->words['poll_vote_casted']})</span>") : ("")) . "</h3>
		" . (($this->settings['poll_allow_public'] AND $poll['poll_view_voters'] AND ! $showResults) ? ("
			<div class='message unspecified'>{$this->lang->words['poll_public_notice']}</div>
		") : ("")) . "
		".$this->__f__9dec79f4dc1418773550eef96973abd0($poll,$topicData,$forumData,$pollData,$showResults)."		<fieldset class='submit'>
			<legend>{$this->lang->words['poll_vote']}</legend>
			" . (($topicData['state'] != 'closed' AND $forumData['status']) ? ("" . (($this->memberData['member_id']) ? ("" . (($poll['_memberVoted']) ? ("" . (($this->settings['poll_allow_vdelete'] OR $this->memberData['g_is_supmod']) ? ("
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=vote&amp;t={$topicData['tid']}&amp;st={$this->request['st']}&amp;do=delete&amp;authKey={$this->member->form_hash}", 'public','' ), "", "" ) . "' title='{$this->lang->words['poll_delete_vote']}' id='poll_deletevote' class='input_submit alt'>{$this->lang->words['poll_delete_vote']}</a>
						") : ("
							{$this->lang->words['poll_you_voted']}
						")) . "") : ("" . ((($poll['starter_id'] == $this->memberData['member_id']) and ($this->settings['allow_creator_vote'] != 1)) ? ("
							{$this->lang->words['poll_you_created']}
						") : ("<!-- VOTE Button -->
							" . (($this->request['mode'] != 'show') ? ("
								<input class='input_submit' type=\"submit\" name=\"submit\" value=\"{$this->lang->words['poll_add_vote']}\" title=\"{$this->lang->words['tt_poll_vote']}\" />
							") : ("")) . "
							<!-- SHOW Button -->
							" . (($this->settings['allow_result_view'] == 1) ? ("" . (($this->request['mode'] == 'show') ? ("" . ((! $poll_view_voters) ? ("
										<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topicData['tid']}&amp;st={$this->request['st']}", 'public','' ), "{$topicData['title_seo']}", "showtopic" ) . "' title='{$this->lang->words['tt_poll_svote']}' id='poll_nullvote' class='input_submit alt'>{$this->lang->words['pl_show_vote']}</a>
									") : ("")) . "") : ("
									<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topicData['tid']}&amp;mode=show&amp;st={$this->request['st']}", 'public','' ), "{$topicData['title_seo']}", "showtopic" ) . "' title='{$this->lang->words['tt_poll_show']}' id='poll_showresults' class='input_submit alt'>{$this->lang->words['pl_show_results']}</a>
								")) . "") : ("
								<input class='input_submit' type=\"submit\" name=\"nullvote\" value=\"{$this->lang->words['poll_null_vote']}\" title=\"{$this->lang->words['tt_poll_null']}\" />
							")) . "")) . "")) . "") : ("
					{$this->lang->words['poll_no_guests']}
				")) . "") : ("")) . "
			" . (($topicData['starter_id'] == $this->memberData['member_id'] OR $this->memberData['g_is_supmod']) ? ("
				<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=post&amp;section=post&amp;do=edit_post&amp;f={$poll['forum_id']}&amp;t={$poll['tid']}&amp;p={$topicData['topic_firstpost']}", 'publicWithApp','' ), "", "" ) . "' title='{$this->lang->words['poll_edit']}' class='input_submit alt' >" . $this->registry->getClass('output')->getReplacement("edit_post_icon") . " {$this->lang->words['poll_edit']}</a>
			") : ("")) . "
		</fieldset>
	</form>
</div>";
return $IPBHTML;
}


function __f__e7bdc9ffca07844748a95e7925f37d04($poll, $topicData, $forumData, $pollData, $showResults,$questionID='',$questionData='',$choiceID='',$choiceData='')
{
	$_ips___x_retval = '';
	foreach( $choiceData['voters'] as $id => $member )
	{
		
		$_ips___x_retval .= "
												users += \"<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$member['member_id']}", 'public','' ), "{$member['members_seo_name']}", "showuser" ) . "'>{$member['members_colored_name']}</a> " . $this->registry->getClass('output')->getTemplate('global')->user_popup($member['member_id'],$member['members_seo_name']) . "" . (($member['_last'] == 0) ? (", ") : ("")) . "\";
											
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

function __f__e37bc45e12c5054f234f4c4357a54362($poll, $topicData, $forumData, $pollData, $showResults,$questionID='',$questionData='')
{
	$_ips___x_retval = '';
	foreach( $pollData[ $questionID ]['choices'] as $choiceID => $choiceData )
	{
		
		$_ips___x_retval .= "
							" . (($showResults) ? ("<li>
									<span class='answer'>" . ((is_array( $choiceData['voters'] ) AND in_array( $this->memberData['member_id'], array_keys( $choiceData['voters'] ) )) ? (" " . $this->registry->getClass('output')->getReplacement("your_vote") . " ") : ("")) . "{$choiceData['choice']}</span>
									" . (($poll['poll_view_voters'] AND is_array( $choiceData['voters'] ) AND $this->settings['poll_allow_public'] AND $choiceData['votes']) ? ("
										<a href='#' class='votes' id='l_voters_{$questionID}_{$choiceID}' title='{$this->lang->words['poll_view_voters']}'>({$choiceData['votes']} {$this->lang->words['poll_votes']} [{$choiceData['percent']}%] - <strong>{$this->lang->words['poll_view']}</strong>)</a>
									") : ("
										<span class='votes'> ({$choiceData['votes']} {$this->lang->words['poll_votes']} [{$choiceData['percent']}%])</span>
									")) . "
									" . (($poll['poll_view_voters'] AND is_array( $choiceData['voters'] ) AND $this->settings['poll_allow_public'] AND $choiceData['votes']) ? ("
										<script type='text/javascript'>
											$('l_voters_{$questionID}_{$choiceID}').observe('click', ipb.topic.showVoters.bindAsEventListener( this, {$questionID}, {$choiceID} ) );
											if( Object.isUndefined( ipb.topic.poll[ $questionID ] ) ){
												ipb.topic.poll[ $questionID ] = [];
											}
											
											var users = \"\";
											
											".$this->__f__e7bdc9ffca07844748a95e7925f37d04($poll,$topicData,$forumData,$pollData,$showResults,$questionID,$questionData,$choiceID,$choiceData)."											ipb.topic.poll[ $questionID ][ $choiceID ] = { name: \"{$choiceData['choice']}\", users: users};
										</script>
									") : ("")) . "
									<p class='progress_bar topic_poll' title='{$this->lang->words['poll_percent_of_vote']} {$choiceData['percent']}%'>
										<span style='width: {$choiceData['percent']}%'><span>{$this->lang->words['poll_percent_of_vote']} {$choiceData['percent']}%</span></span>
									</p>
								</li>") : ("" . (($choiceData['type'] == 'multi') ? ("
									<li><input type='checkbox' id='choice_{$questionID}_{$choiceID}' name='choice_{$questionID}_{$choiceID}' value='1' class='input_check' /> <label for='choice_{$questionID}_{$choiceID}'>{$choiceData['choice']}</label></li>
								") : ("
									<li><input type='radio' name='choice[{$questionID}]' id='choice_{$questionID}_{$choiceID}' class='input_radio' value='{$choiceID}' /> <label for='choice_{$questionID}_{$choiceID}'>{$choiceData['choice']}</label></li>
								")) . "")) . "
						
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

function __f__9dec79f4dc1418773550eef96973abd0($poll, $topicData, $forumData, $pollData, $showResults)
{
	$_ips___x_retval = '';
	foreach( $pollData as $questionID => $questionData )
	{
		
		$_ips___x_retval .= "
			<div class='poll_question" . (($showResults) ? (" voted") : ("")) . "'>
				<h4 class='rounded'>{$pollData[ $questionID ]['question']}</h4>
				" . ((! $this->settings['allow_result_view'] AND ! $this->memberData['member_id']) ? ("
					{$this->lang->words['poll_noview_guest']}
				") : ("
					<ol>
						".$this->__f__e37bc45e12c5054f234f4c4357a54362($poll,$topicData,$forumData,$pollData,$showResults,$questionID,$questionData)."					</ol>
				")) . "
			</div>
			<script type='text/javascript'>
				Debug.dir( ipb.topic.poll );
			</script>
		
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- quickEditPost --*/
function quickEditPost($post) {
$IPBHTML = "";
$IPBHTML .= "{$post['post']}
    {$post['attachmentHtml']}
	<br />
	" . (($post['edit_by']) ? ("<p class='edit'>
			{$post['edit_by']}
			" . (($post['post_edit_reason'] != '') ? ("
				<br />
				<span class='reason'>{$this->lang->words['reason_for_edit']}: {$post['post_edit_reason']}</span>
			") : ("")) . "
		</p>") : ("")) . "";
return $IPBHTML;
}

/* -- show_attachment_title --*/
function show_attachment_title($title="",$data="",$type="") {
$IPBHTML = "";
$IPBHTML .= "<div id='attach_wrap' class='rounded clearfix'>
	<h4>$title</h4>
	<ul>
		".$this->__f__5d4739f56b7ebaafd5e42dcee223ea0b($title,$data,$type)."	</ul>
</div>";
return $IPBHTML;
}


function __f__5d4739f56b7ebaafd5e42dcee223ea0b($title="",$data="",$type="")
{
	$_ips___x_retval = '';
	foreach( $data as $file )
	{
		
		$_ips___x_retval .= "
			<li class='" . (($type == 'attach') ? ("clear") : ("")) . "'>
				{$file}
			</li>
		
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- Show_attachments --*/
function Show_attachments($data="") {
$IPBHTML = "";
$IPBHTML .= "<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=attach&amp;section=attach&amp;attach_id={$data['attach_id']}", 'public','' ), "", "" ) . "\" title=\"{$this->lang->words['attach_dl']}\"><img src=\"{$this->settings['public_dir']}{$data['mime_image']}\" alt=\"{$this->lang->words['attached_file']}\" /></a>
&nbsp;<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=attach&amp;section=attach&amp;attach_id={$data['attach_id']}", 'public','' ), "", "" ) . "\" title=\"{$this->lang->words['attach_dl']}\">{$data['attach_file']}</a> <span class='desc'><strong>({$data['file_size']})</strong></span>
<br /><span class=\"desc info\">{$this->lang->words['attach_hits']}: {$data['attach_hits']}</span>";
return $IPBHTML;
}

/* -- Show_attachments_img --*/
function Show_attachments_img($file_name="") {
$IPBHTML = "";
$IPBHTML .= "<img src=\"{$this->settings['upload_url']}/$file_name\" class='bbc_img linked-image' alt=\"{$this->lang->words['pic_attach']}\" />";
return $IPBHTML;
}

/* -- Show_attachments_img_thumb --*/
function Show_attachments_img_thumb($data=array()) {
$IPBHTML = "";
$IPBHTML .= "<a class='resized_img' rel='lightbox[{$data['attach_rel_id']}]' id='ipb-attach-url-{$data['_attach_id']}' href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=attach&amp;section=attach&amp;attach_rel_module={$data['type']}&amp;attach_id={$data['attach_id']}", 'public','' ), "", "" ) . "\" title=\"{$data['location']} - {$this->lang->words['attach_size']} {$data['file_size']}, {$this->lang->words['attach_ahits']} {$data['attach_hits']}\"><img src=\"{$this->settings['upload_url']}/{$data['t_location']}\" id='ipb-attach-img-{$data['_attach_id']}' style='width:{$data['t_width']};height:{$data['t_height']}' class='attach' width=\"{$data['t_width']}\" height=\"{$data['t_height']}\" alt=\"{$this->lang->words['pic_attach']}\" /></a>";
return $IPBHTML;
}

/* -- topicViewTemplate --*/
function topicViewTemplate($forum, $topic, $post_data, $displayData) {
$IPBHTML = "";
$IPBHTML .= "" . (($forum['forum_allow_rating']) ? ("
" . $this->registry->getClass('output')->addJSModule("rating", "0" ) . "
") : ("")) . "
" . $this->registry->getClass('output')->addJSModule("topic", "0" ) . "
" . $this->registry->getClass('output')->addJSModule("editor", "0" ) . "
<script type=\"text/javascript\">
//<![CDATA[
	ipb.topic.inSection = 'topicview';
	ipb.topic.topic_id  = {$topic['tid']};
	ipb.topic.forum_id  = {$forum['id']};
	ipb.topic.start_id  = " . intval($this->request['st']) . ";
	// Editor JS: Only needs to be done once per page
	" . $this->registry->getClass('output')->getTemplate('editors')->editorJS() . "
	//Search Setup
	ipb.vars['search_type']			= 'forum';
	ipb.vars['search_type_id']		= {$forum['id']};
	ipb.vars['search_type_2']		= 'topic';
	ipb.vars['search_type_id_2']	= {$topic['tid']};
//]]>
</script>
" . ((!$this->settings['disable_lightbox']) ? ("
" . $this->registry->getClass('output')->getTemplate('global')->include_lightbox() . "
") : ("")) . "
" . (($forum['show_rules'] == 2) ? ("
<div class='message unspecific'>
<h3>{$forum['rules_title']}</h3>
{$forum['rules_text']}
</div>
") : ("")) . "
" . (($forum['show_rules'] == 1) ? ("
<div class='message unspecific'>
	<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=forums&amp;section=rules&amp;f={$forum['id']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['show_forum_rules']}'><strong>{$forum['rules_title']}</strong></a>
</div>
") : ("")) . "
" . (($displayData['threaded_mode_enabled'] == 0) ? ("<div class='topic_controls'>
		{$topic['SHOW_PAGES']}
		<ul class='topic_buttons'>
			" . (($forum['_user_can_post']) ? ("
				<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=new_post&amp;f={$forum['id']}", 'publicWithApp','' ), "", "" ) . "' title='{$this->lang->words['start_new_topic']}' accesskey='n'>" . $this->registry->getClass('output')->getReplacement("topic_icon") . " {$this->lang->words['start_new_topic']}</a></li>
			") : ("
				<li class='disabled'><span>{$this->lang->words['top_cannot_start']}</span></li>
			")) . "
			" . (($displayData['reply_button']['image'] == 'locked') ? ("<li class='closed'>
					" . (($displayData['reply_button']['url']) ? ("
						<a href='{$displayData['reply_button']['url']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked_reply']}</a>
					") : ("
						<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked']}</span>
					")) . "
				</li>") : ("" . (($displayData['reply_button']['image']) ? ("" . (($displayData['reply_button']['url']) ? ("
						<li><a href='{$displayData['reply_button']['url']}' title='{$this->lang->words['topic_add_reply']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("{$displayData['reply_button']['image']}_icon") . " {$this->lang->words['topic_add_reply']}</a></li>
					") : ("
						<li class='disabled'><span>{$this->lang->words['top_cannot_reply']}</span></li>
					")) . "") : ("")) . "")) . "
			" . (($this->memberData['member_id']) ? ("<li>
					" . (($this->settings['cpu_watch_update'] AND $topic['trackingTopic']) ? ("
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=usercp&amp;tab=forums&amp;area=updateWatchTopics&amp;do=saveIt&amp;authKey={$this->member->form_hash}&amp;topicIDs[{$topic['tid']}]=1&amp;trackchoice=unsubscribe&amp;topicReturn={$topic['tid']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['topic_stop_watching']}'>" . $this->registry->getClass('output')->getReplacement("watch_topic_off") . "&nbsp;&nbsp;{$this->lang->words['topic_stop_watching']}</a>
					") : ("
						<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=usercp&amp;tab=forums&amp;area=watch&amp;watch=topic&amp;do=list&amp;tid={$topic['tid']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['tt_title']}'>" . $this->registry->getClass('output')->getReplacement("watch_topic_on") . "&nbsp;&nbsp;{$this->lang->words['tt_title']}</a>
					")) . "
				</li>") : ("")) . "
		</ul>	
	</div>") : ("")) . "
<div class='topic hfeed'>
	<h2 class='maintitle'>
		<span class='main_topic_title'>
			{$topic['title']}
			" . (($topic['description']) ? ("
				<span class='desc main_topic_desc'>{$topic['description']}</span>
			") : ("")) . "
		</span>
		<!-- SKINNOTE: Need to fill in proper URL for topic rating -->
		" . (($forum['forum_allow_rating']) ? ("<span class='rating'>{$this->lang->words['js_rate_me']}
				<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=1", 'public','' ), "", "" ) . "' id='topic_rate_1' title='{$this->lang->words['top_js_1star']}'>" . (($topic['_rate_int'] >= 1) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=2", 'public','' ), "", "" ) . "' id='topic_rate_2' title='{$this->lang->words['top_js_2star']}'>" . (($topic['_rate_int'] >= 2) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=3", 'public','' ), "", "" ) . "' id='topic_rate_3' title='{$this->lang->words['top_js_3star']}'>" . (($topic['_rate_int'] >= 3) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=4", 'public','' ), "", "" ) . "' id='topic_rate_4' title='{$this->lang->words['top_js_4star']}'>" . (($topic['_rate_int'] >= 4) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=rating&amp;t={$topic['tid']}&amp;rating=5", 'public','' ), "", "" ) . "' id='topic_rate_5' title='{$this->lang->words['top_js_5star']}'>" . (($topic['_rate_int'] >= 5) ? ("" . $this->registry->getClass('output')->getReplacement("rate_on") . "") : ("" . $this->registry->getClass('output')->getReplacement("rate_off") . "")) . "</a>
				<span id='rating_text'>
					" . (($topic['topic_rating_hits'] > 0) ? ("<span id='rating_hits'>{$topic['topic_rating_hits']}</span> {$this->lang->words['poll_s_votes']}") : ("")) . "
					" . (($topic['_rating_value'] != -1) ? (" ({$this->lang->words['topic_poll_your_vote']} <span id='your_rate'>{$topic['_rating_value']}</span>)") : ("")) . "
				</span>
				<script type='text/javascript'>
				//<![CDATA[
					rating = new ipb.rating( 'topic_rate_', { 
										url: '" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&module=ajax&section=topics&do=rateTopic&t={$topic['tid']}", 'public','' ), "", "" ) . "&md5check=' + ipb.vars['secure_hash'],
										cur_rating: {$topic['_rate_int']},
										rated: " . (($topic['_rating_value'] != -1) ? ("1") : ("0")) . ",
										allow_rate: {$topic['_allow_rate']},
										multi_rate: 1,
										show_rate_text: true
									  } );
				//]]>
				</script>
			</span>") : ("")) . "
	</h2>
	
	{$displayData['poll_data']}
	
	" . (($displayData['mod_links']) ? ("" . (($this->memberData['is_mod'] OR $this->memberData['member_id'] == $topic['starter_id']) ? ("
			<form id=\"modform\" method=\"post\" action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", 'public','' ), "", "" ) . "\">
				<fieldset>
	 				<input type=\"hidden\" name=\"app\" value=\"forums\" />
		 			<input type=\"hidden\" name=\"module\" value=\"moderate\" />
		 			<input type=\"hidden\" name=\"section\" value=\"moderate\" />
		 			<input type=\"hidden\" name=\"do\" value=\"postchoice\" />
		 			<input type=\"hidden\" name=\"f\" value=\"{$topic['forum_id']}\" />
		 			<input type=\"hidden\" name=\"t\" value=\"{$topic['tid']}\" />
		 			<input type=\"hidden\" name=\"auth_key\" value=\"{$this->member->form_hash}\" />
		 			<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
		 			<input type=\"hidden\" value=\"{$this->request['selectedpids']}\" name=\"selectedpidsJS\" id='selectedpidsJS' />
				</fieldset>
		") : ("")) . "") : ("")) . "
	
" . ((is_array( $post_data ) AND count( $post_data )) ? ("
<!-- skinnote: Posts by ignored users are not hidden, check _ignored -->
	".$this->__f__a182def8a1ce04a4ca3c04da57afcdc2($forum,$topic,$post_data,$displayData)."") : ("")) . "
<!-- MOD LINKS -->
" . (($displayData['mod_links']) ? ("" . (($this->memberData['is_mod'] OR $this->memberData['member_id'] == $topic['starter_id']) ? ("<div id='topic_mod' class='moderation_bar rounded with_action clear'>
			" . (($this->memberData['is_mod']) ? ("<label for='tact' class='hide'>{$this->lang->words['post_moderation']}</label>
		 		<select name=\"tact\" id='tact' class='input_select'>
					<option value=\"\">{$this->lang->words['post_moderation']}</option>
	 				<option value=\"merge\">{$this->lang->words['cpt_merge']}</option>
	 				<option value=\"move\">{$this->lang->words['cpt_move']}</option>
	 				<option value=\"delete\">{$this->lang->words['cpt_delete']}</option>
	 				<option value=\"split\">{$this->lang->words['cpt_split']}</option>
	 				<option value=\"approve\">{$this->lang->words['cpt_approve']}</option>
	 				<option value=\"unapprove\">{$this->lang->words['cpt_unapprove']}</option>
	 			</select>&nbsp;
	 			<input type=\"submit\" id='mod_submit' name=\"gobutton\" value=\"{$this->lang->words['f_go']}" . (($this->request['selectedpidcount']) ? (" ({$this->request['selectedpidcount']})") : ("")) . "\" class=\"input_submit alt\" />") : ("")) . "
			</div>
		</form>
		<script type='text/javascript'>
			$('modform').observe('submit', ipb.topic.submitPostModeration );
		</script>
	
		<div id='topic_mod_2' class='moderation_bar rounded'>
			" . ((is_array( $displayData['multi_mod'] ) AND count( $displayData['multi_mod'] )) ? ("
				<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=moderate&amp;section=multimod&amp;t={$topic['tid']}", 'public','' ), "", "" ) . "\" method=\"post\" id='multimod' class='left'>
					<fieldset>
						<input type=\"hidden\" name=\"check\" value=\"1\" />
						<select name=\"mm_id\" class=\"input_select\">
							<option value=\"-1\">{$this->lang->words['mm_title']}</option>
							".$this->__f__ace4ac01245a56cabbbd7059ad762465($forum,$topic,$post_data,$displayData)."						</select>&nbsp;
						<input type=\"submit\" value=\"{$this->lang->words['mm_submit']}\" class=\"input_submit alt\" />
					</fieldset>
				</form>
			") : ("")) . "
			<form method=\"post\" id=\"modform2\" action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", 'public','' ), "", "" ) . "\">
				<fieldset>
					<input type=\"hidden\" name=\"t\" value=\"{$topic['tid']}\" />
					<input type=\"hidden\" name=\"f\" value=\"{$topic['forum_id']}\" />
					<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
					<input type=\"hidden\" name=\"auth_key\" value=\"{$this->member->form_hash}\" />
					<input type=\"hidden\" name=\"app\" value=\"forums\" />
					<input type=\"hidden\" name=\"module\" value=\"moderate\" />
					<input type=\"hidden\" name=\"section\" value=\"moderate\" />
					<label for='topic_moderation' class='hide'>{$this->lang->words['topic_moderation']}</label>
					<select name=\"do\" class=\"input_select\" id='topic_moderation'>
						<option value=\"-1\">{$this->lang->words['topic_moderation']}</option>
						".$this->__f__4f9c3de4210c152b6cad29b36106f8b1($forum,$topic,$post_data,$displayData)."					</select>&nbsp;
					<input type=\"submit\" value=\"{$this->lang->words['jmp_go']}\" class=\"input_submit alt\" />
				</fieldset>
			</form>
			
			<script type='text/javascript'>
				$('modform2').observe('submit', ipb.topic.submitTopicModeration );
			</script>
		</div>") : ("")) . "") : ("")) . "
<!-- REPUTATION FILTERS -->
" . (($this->settings['reputation_enabled'] && $this->settings['reputation_show_content'] && $this->memberData['member_id'] != 0 && is_array($this->caches['reputation_levels'])) ? ("<div id='reputation_filter' class='filter_bar rounded'>
		<span id='show_filters' class='clickable' style='display: none'>{$this->lang->words['rep_f_currently']} " . (($this->memberData['_members_cache']['rep_filter'] && $this->memberData['_members_cache']['rep_filter'] === '*') ? ("{$this->lang->words['rep_f_viewing_all']} ") : ("{$this->lang->words['rep_f_hiding']} {$this->memberData['_members_cache']['rep_filter']} {$this->lang->words['rep_f_points']}.")) . " {$this->lang->words['rep_f_threshold']}</span>
		<form id='filter_form' method=\"post\" action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", 'public','' ), "", "" ) . "\">
			<fieldset>
	 			<input type=\"hidden\" name=\"app\" value=\"forums\" />
		 		<input type=\"hidden\" name=\"module\" value=\"forums\" />
		 		<input type=\"hidden\" name=\"section\" value=\"topics\" />
		 		<input type=\"hidden\" name=\"rep_filter\" value=\"update\" />
		 		<input type=\"hidden\" name=\"f\" value=\"{$topic['forum_id']}\" />
		 		<input type=\"hidden\" name=\"t\" value=\"{$topic['tid']}\" />
		 		<input type=\"hidden\" name=\"auth_key\" value=\"{$this->member->form_hash}\" />
		 		<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
		 		<label for='rep_filter_select'>{$this->lang->words['rep_f_hide']}</label>
		 		<select name='rep_filter_set' id='rep_filter_select'>
		 			<option value='*' " . ((isset( $this->memberData['_members_cache']['rep_filter'] ) AND $this->memberData['_members_cache']['rep_filter'] == '*') ? (" selected='selected'") : ("")) . ">{$this->lang->words['rep_f_all_posts']}</option>
				" . ((is_array($this->caches['reputation_levels'])) ? ("
					".$this->__f__b41809fec188903bc8e50e4ea9ca298d($forum,$topic,$post_data,$displayData)."				") : ("")) . "
				</select>
	 		
				<input type=\"submit\" name=\"gobutton\" value=\"{$this->lang->words['rep_f_update']}\" class=\"input_submit alt\" />
			</fieldset>
		</form>
	</div>
	<script type='text/javascript'>
		$('show_filters').show();
	</script>") : ("")) . "
<div class='moderation_bar rounded' id='topic_search_jump'>
	<form method='post' action='{$this->settings['base_url']}app=core&amp;module=search&amp;do=quick_search&amp;search_filter_app[forums]=1' id='context_search' class='left'>
		<fieldset>
			<input type='hidden' name='type_2' value='topic' />
			<input type='hidden' name='type_id_2' value='{$topic['tid']}' />
			<label for='topic_search'>{$this->lang->words['search_topic']}</label>
			<input type='text' id='topic_search' name='search_term' class='input_text' size='20' tabindex='8' />
 			<input type='submit' class='input_submit alt' value='{$this->lang->words['search_topic_go']}' />
		</fieldset>
	</form>
	" . (($forum['FORUM_JUMP']) ? ("
		{$forum['FORUM_JUMP']}
	") : ("")) . "
</div>
<!-- THREADED MODE -->
" . (($displayData['threaded_mode_enabled'] == 1) ? ("<br />
	<div class='topic_controls'>
		{$topic['threaded_pages']}	
		<ul class='topic_buttons'>
			" . (($forum['_user_can_post']) ? ("
				<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=new_post&amp;f={$forum['id']}", 'publicWithApp','' ), "", "" ) . "' title='{$this->lang->words['start_new_topic']}'>" . $this->registry->getClass('output')->getReplacement("topic_icon") . " {$this->lang->words['start_new_topic']}</a></li>
			") : ("
				<li class='disabled'><span>{$this->lang->words['top_cannot_start']}</span></li>
			")) . "
			" . (($displayData['reply_button']['image'] == 'locked') ? ("<li class='closed'>
					" . (($displayData['reply_button']['url']) ? ("
						<a href='{$displayData['reply_button']['url']}'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked_reply']}</a>
					") : ("
						<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked']}</span>
					")) . "
				</li>") : ("" . (($displayData['reply_button']['image']) ? ("" . (($displayData['reply_button']['url']) ? ("
						<li><a href='{$displayData['reply_button']['url']}' title='{$this->lang->words['add_a_reply']}'>" . $this->registry->getClass('output')->getReplacement("reply_icon") . " {$this->lang->words['topic_add_reply']}</a></li>
					") : ("
						<li class='disabled'><span>{$this->lang->words['top_cannot_reply']}</span></li>
					")) . "") : ("")) . "")) . "
		</ul>
	</div>
	<h2 class='maintitle'>{$this->lang->words['threads']}</h2>
	<div class='generic_bar'></div>
	<div class='threaded_view general_box'>
	{$topic['_threaded_posts']}
	</div>
	<br class='clear' />{$topic['threaded_pages']}") : ("")) . "
<ul class='topic_jump right clear'>
	<li class='previous'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topic['tid']}&amp;view=old", 'public','' ), "{$topic['title_seo']}", "showtopic" ) . "'>&larr; {$this->lang->words['previous_topic']}</a></li>
	<li><strong><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showforum={$forum['id']}", 'public','' ), "{$forum['name_seo']}", "showforum" ) . "' title='{$this->lang->words['return_to']} {$forum['name']}'>{$forum['name']}</a></strong></li>
	<li class='next'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$topic['tid']}&amp;view=new", 'public','' ), "{$topic['title_seo']}", "showtopic" ) . "'>{$this->lang->words['next_topic']} &rarr;</a></li>
</ul>
" . (($this->memberData['member_id']) ? ("
<h3 class='topic_share left'>{$this->lang->words['topic_share']}</h3>
<ul class='topic_share left'>
	<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=forward&amp;f={$forum['id']}&amp;t={$topic['tid']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['topic_email_title']}'>{$this->lang->words['topic_email']}</a></li>
	<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=forums&amp;section=printtopic&amp;client=printer&amp;f={$forum['id']}&amp;t={$topic['tid']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['topic_print_title']}'>{$this->lang->words['topic_print']}</a></li>
	<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=forums&amp;section=printtopic&amp;client=choose&amp;f={$forum['id']}&amp;t={$topic['tid']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['topic_download_title']}'>{$this->lang->words['topic_download']}</a></li>
</ul>
") : ("")) . "
<!-- BOTTOM BUTTONS -->
<div class='topic_controls clear'>
	{$topic['SHOW_PAGES']}
	
	<ul class='topic_buttons'>
		" . (($forum['_user_can_post']) ? ("
			<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=new_post&amp;f={$forum['id']}", 'publicWithApp','' ), "", "" ) . "' title='{$this->lang->words['start_new_topic']}'>" . $this->registry->getClass('output')->getReplacement("topic_icon") . " {$this->lang->words['start_new_topic']}</a></li>
		") : ("
			<li class='disabled'><span>{$this->lang->words['top_cannot_start']}</span></li>
		")) . "
		" . (($displayData['reply_button']['image'] == 'locked') ? ("<li class='closed'>
				" . (($displayData['reply_button']['url']) ? ("
					<a href='{$displayData['reply_button']['url']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked_reply']}</a>
				") : ("
					<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked']}</span>
				")) . "
			</li>") : ("" . (($displayData['reply_button']['image']) ? ("" . (($displayData['reply_button']['url']) ? ("
					<li><a href='{$displayData['reply_button']['url']}' title='{$this->lang->words['add_a_reply']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("reply_icon") . " {$this->lang->words['topic_add_reply']}</a></li>
				") : ("
					<li class='disabled'><span>{$this->lang->words['top_cannot_reply']}</span></li>
				")) . "") : ("")) . "")) . "
	</ul>
</div>
<hr />
<script type='text/javascript'>
	ipb.editor_values.set( 'emoticons', \$H({ " . IPSLib::fetchEmoticonsAsJson() . " }) );
	ipb.vars['emoticon_url'] = \"{$this->settings['emoticons_url']}\";
</script>
" . (($displayData['fast_reply'] != 'unavailable' && $displayData['reply_button']['url']) ? ("<br />
<div id='fast_reply' style='display: {$displayData['fast_reply']}'>
	<h3 class='maintitle'>{$this->lang->words['qr_title']}</h3>
	<div class='generic_bar'></div>
	<div class='general_box alt'>
		<form action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "", 'public','' ), "", "" ) . "\" method=\"post\">
			<fieldset>
				<input type=\"hidden\" name=\"app\" value=\"forums\" />
				<input type=\"hidden\" name=\"module\" value=\"post\" />
				<input type=\"hidden\" name=\"section\" value=\"post\" />
				<input type=\"hidden\" name=\"do\" value=\"reply_post_do\" />
				<input type=\"hidden\" name=\"f\" value=\"{$forum['id']}\" />
				<input type=\"hidden\" name=\"t\" value=\"{$topic['tid']}\" />
				<input type=\"hidden\" name=\"st\" value=\"{$this->request['st']}\" />
				<input type=\"hidden\" name=\"auth_key\" value=\"{$this->member->form_hash}\" />
				<input type=\"hidden\" name=\"fast_reply_used\" value=\"1\" />
				<input type=\"hidden\" name=\"enableemo\" value=\"yes\" />
				<input type=\"hidden\" name=\"enablesig\" value=\"yes\" />
				" . (($this->memberData['auto_track']) ? ("
					<input type=\"hidden\" name=\"enabletrack\" value=\"1\" />
				") : ("")) . "" . ((is_array($topic['_fastReplyStatusMessage']) AND count($topic['_fastReplyStatusMessage']) AND strlen($topic['_fastReplyStatusMessage'][0])) ? ("
					<div class='message'>" . implode( '<br />', $topic['_fastReplyStatusMessage']) . "</div>
				") : ("")) . "" . $this->registry->getClass('output')->getTemplate('editors')->editorShell('fast-reply', 'Post', '', 1) . "
			</fieldset>
			<fieldset class='submit'>
				<input type='submit' name=\"submit\" class='input_submit' value='{$this->lang->words['qr_post']}' tabindex='0' accesskey='s' id='submit_post' />&nbsp;&nbsp;<input type='submit' name=\"preview\" class='input_submit alt' value='{$this->lang->words['qr_more_opts']}' tabindex='0' id='full_compose' />
			</fieldset>
		</form>
	</div>
</div>
<script type=\"text/javascript\">
//<![CDATA[
	if( $('fast-reply_textarea') ){
		$('fast-reply_textarea').addClassName('unloaded_editor').setStyle('height: 70px');
		$('fast-reply_textarea').value = \"{$this->lang->words['editor_unloaded_atm']}\";
	}
	
	if( $('fast-reply_toolbar_1') ){
		$('fast-reply_toolbar_1').hide();
	}
	if( $('fast-reply_toolbar_2') ){
		$('fast-reply_toolbar_2').hide();
	}
	
	var removeTip = function(e){
		if( $('fast-reply_textarea').hasClassName('unloaded_editor') ){
			$('fast-reply_textarea').value='';
		}
	};
	
	$('full_compose').observe( 'click', removeTip );
	$('submit_post').observe( 'click', removeTip );
	
	in_use = 0;
	
	$('fast-reply_textarea').observe( 'focus', function(e){
		if( !in_use )
		{
			if( $('fast-reply_toolbar_1') ){
				$('fast-reply_toolbar_1').show();
			}
			if( $('fast-reply_toolbar_2') ){
				$('fast-reply_toolbar_2').show();
			}
			
			$('fast-reply_textarea').removeClassName('unloaded_editor').value = '';
			
			ipb.editors[ 'fast-reply' ] = new ipb.editor( 'fast-reply', USE_RTE );
			$( ipb.editors['fast-reply'] ).resize_to( 250 );
			
			try {
				ipb.editors[ 'fast-reply' ].editor_window.focus();
			} catch(err) { }
			in_use = 1;
		}
	});
//]]>
</script>") : ("")) . "
<!-- ACTIVE USERS -->
" . ((is_array( $displayData['active_users'] ) AND count( $displayData['active_users'] )) ? ("<div id='topic_stats' class='statistics general_box clear clearfix'>
		<div id='topic_active_users' class='active_users'>
			<h2>
				" . sprintf( $this->lang->words['active_users_title'], ($displayData['active_users']['members'] + $displayData['active_users']['guests'] + $displayData['active_users']['anon'] ) ) . "<br />
				<span class='desc'>" . sprintf( $this->lang->words['active_users_detail'], $displayData['active_users']['members'], $displayData['active_users']['guests'], $displayData['active_users']['anon'] ) . "</span>
			</h2>
			<ol>
				" . ((is_array( $displayData['active_users']['names'] ) AND count( $displayData['active_users']['names'] )) ? ("
					".$this->__f__2fb52215723edde3f3872551b590524a($forum,$topic,$post_data,$displayData)."				") : ("")) . "
			</ol>
		</div>
	</div>") : ("")) . "

<!-- Close topic -->
</div>

" . (($this->request['gopid']) ? ("
<script type='text/javascript'>
	var gopid = \"{$this->request['gopid']}\".replace(/&amp;/g, '');
	ipb.topic.scrollToPost( parseInt( gopid ) );
</script>
") : ("")) . "
" . $this->registry->getClass('output')->getTemplate('global')->include_highlighter(1) . "";
return $IPBHTML;
}


function __f__a182def8a1ce04a4ca3c04da57afcdc2($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	foreach( $post_data as $post )
	{
		
		$_ips___x_retval .= "
		<!--Begin Msg Number {$post['post']['pid']}-->
		<div class='post_block hentry clear " . (($post['post']['queued']==1) ? ("moderated") : ("")) . " " . (($this->settings['reputation_enabled']) ? ("with_rep") : ("")) . "' id='post_id_{$post['post']['pid']}'>
			<a id='entry{$post['post']['pid']}'></a>
			" . ((( isset( $post['post']['_repignored'] ) AND isset($post['post']['_ignored']) ) AND $post['post']['_repignored'] == 1 && $post['post']['_ignored'] != 1) ? ("<div class='post_ignore'>
					" . (($post['post']['rep_points'] == 0) ? ("
						<span class='reputation zero' title='{$this->lang->words['top_rep']}'>
					") : ("")) . "
					" . (($post['post']['rep_points'] > 0) ? ("
						<span class='reputation positive' title='{$this->lang->words['top_rep']}'>
					") : ("")) . "
					" . (($post['post']['rep_points'] < 0) ? ("
						<span class='reputation negative' title='{$this->lang->words['top_rep']}' >
					") : ("")) . "
							{$post['post']['rep_points']}</span> {$this->lang->words['top_this_post_by']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$post['author']['member_id']}", 'public','' ), "", "" ) . "'>{$post['author']['members_display_name']}</a> " . $this->registry->getClass('output')->getTemplate('global')->user_popup($post['author']['member_id'], $post['author']['members_seo_name']) . " {$this->lang->words['top_below_thresh']}. <a href='#' title='{$this->lang->words['ignore_view_post']}' id='unhide_post_{$post['post']['pid']}'>{$this->lang->words['rep_view_anyway']}</a>
				</div>") : ("")) . "
			" . (($post['post']['_repignored'] == 1 || $post['post']['_ignored']) ? ("
				<div class='post_ignore'>
					{$this->lang->words['post_ignored']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$post['author']['member_id']}", 'public','' ), "", "" ) . "'>{$post['author']['members_display_name']}</a> " . $this->registry->getClass('output')->getTemplate('global')->user_popup($post['author']['member_id'], $post['author']['members_seo_name']) . ". <a href='#entry{$post['post']['pid']}' title='{$this->lang->words['ignore_view_post']}' style='display: none' id='unhide_post_{$post['post']['pid']}'>{$this->lang->words['rep_view_anyway']}</a>
				</div>
			") : ("")) . "
			<div class='post_wrap' " . (($post['post']['_ignored'] == 1 || $post['post']['_repignored'] == 1) ? ("style='display: none'") : ("")) . ">
				" . (($post['author']['member_id']) ? ("
					<h3>
				") : ("
					<h3 class='guest'>
				")) . "
						<span class='post_id'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$post['post']['topic_id']}&amp;view=findpost&amp;p={$post['post']['pid']}", 'public','' ), "{$topic['title_seo']}", "showtopic" ) . "' rel='bookmark' title='{$this->lang->words['link_to_post']} #{$post['post']['post_count']}'>#{$post['post']['post_count']}</a></span>
						" . (($post['author']['member_id']) ? ("" . (($post['author']['_online']) ? ("
								" . $this->registry->getClass('output')->getReplacement("user_online") . "
							") : ("
								" . $this->registry->getClass('output')->getReplacement("user_offline") . "
							")) . " &nbsp;
								<span class=\"author vcard\"><a class=\"url fn\" href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$post['author']['member_id']}", 'public','' ), "{$post['author']['members_seo_name']}", "showuser" ) . "'>{$post['author']['members_display_name']}</a>" . $this->registry->getClass('output')->getTemplate('global')->user_popup($post['author']['member_id'], $post['author']['members_seo_name']) . "</span>") : ("
							{$post['author']['members_display_name']}
						")) . "
						" . (($post['post']['_show_ip']) ? ("<span class='ip'>({$this->lang->words['ip']}:
							" . (($post['author']['g_access_cp']) ? ("
								<em>{$this->lang->words['ip_private']}</em>
							") : ("
								<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=usercp&amp;tab=members&amp;area=mod_ipaddress&amp;do=custom&amp;ip={$post['post']['ip_address']}", 'public','' ), "", "" ) . "\" title='{$this->lang->words['info_about_this_ip']}'>{$post['post']['ip_address']}</a>
							")) . "
							)</span>") : ("")) . "
					</h3>
				<div class='author_info'>
					" . $this->registry->getClass('output')->getTemplate('global')->userInfoPane($post['author'], $post['post']['pid'], array()) . "
				</div>
				<div class='post_body'>
					<p class='posted_info'>
						" . (($this->memberData['is_mod']) ? ("" . ((isset( $post['post']['_pid_selected'] ) && $post['post']['_pid_selected']) ? ("
								<label for='checkbox_{$post['post']['pid']}' class='post_mod hide'>{$this->lang->words['mod_select_post']}</label><input type='checkbox' id='checkbox_{$post['post']['pid']}' name='selectedpids[]' value='{$post['post']['pid']}' class='post_mod' checked='checked' />
							") : ("
								<label for='checkbox_{$post['post']['pid']}' class='post_mod hide'>{$this->lang->words['mod_select_post']}</label><input type='checkbox' id='checkbox_{$post['post']['pid']}' name='selectedpids[]' value='{$post['post']['pid']}' class='post_mod' />
							")) . "") : ("")) . "
						" . (($post['post']['icon_id']) ? ("
							<img src=\"{$this->settings['public_dir']}style_extra/post_icons/icon{$post['post']['icon_id']}.gif\" alt=\"{$this->lang->words['post_icon']}\" />&nbsp;
						") : ("")) . "
						{$this->lang->words['posted']} <abbr class=\"published\" title=\"" . date( 'c', $post['post']['post_date'] ) . "\">" . $this->registry->getClass('class_localization')->getDate($post['post']['post_date'],"long", 0) . "</abbr>
					</p>
					" . (($this->settings['reputation_highlight'] AND $post['post']['rep_points'] >= $this->settings['reputation_highlight']) ? ("<p class='rep_highlight'>" . $this->registry->getClass('output')->getReplacement("popular_post") . "<br />{$this->lang->words['popular_post']}</p>
						<!-- " . (($this->settings['reputation_highlight'] AND $post['post']['rep_points'] >= $this->settings['reputation_highlight']) ? ("rep_highlight") : ("")) . "  -->") : ("")) . "
					<div class='post entry-content'>
						{$post['post']['post']}
						{$post['post']['attachmentHtml']}
						<br />
						" . (($post['post']['edit_by']) ? ("<p class='edit'>
								{$post['post']['edit_by']}
								" . (($post['post']['post_edit_reason'] != '') ? ("
									<br />
									<span class='reason'>{$this->lang->words['reason_for_edit']}: {$post['post']['post_edit_reason']}</span>
								") : ("")) . "
							</p>") : ("")) . "
					</div>
					" . (($post['post']['signature']) ? ("
						{$post['post']['signature']}
					") : ("")) . "
				</div>
			" . (($this->settings['reputation_enabled']) ? ("" . ((!( $this->settings['reputation_protected_groups'] && in_array( $post['author']['member_group_id'], explode( ',', $this->settings['reputation_protected_groups'] ) ) )) ? ("<div class='rep_bar clear right' id='rep_post_{$post['post']['pid']}'>
					
				" . (($post['post']['rep_points'] == 0) ? ("
					<span class='reputation zero rep_show' title='{$this->lang->words['reputation']}'>
				") : ("")) . "
				" . (($post['post']['rep_points'] > 0) ? ("
					<span class='reputation positive rep_show' title='{$this->lang->words['reputation']}'>
				") : ("")) . "
				" . (($post['post']['rep_points'] < 0) ? ("
					<span class='reputation negative rep_show' title='{$this->lang->words['reputation']}' >
				") : ("")) . "
						{$post['post']['rep_points']}
					</span>
					" . (($post['post']['has_given_rep'] != 1 AND $post['post']['has_given_rep'] != -1 AND $this->memberData['member_id'] != 0 && ( $this->settings['reputation_can_self_vote'] OR $post['author']['member_id'] != $this->memberData['member_id'] )) ? ("<ul>
						" . (($this->settings['reputation_point_types'] == 'positive' || $this->settings['reputation_point_types'] == 'both') ? ("
							<li><a href='{$this->settings['base_url']}app=core&amp;module=global&amp;section=reputation&amp;do=add_rating&amp;app_rate=forums&amp;type=pid&amp;type_id={$post['post']['pid']}&amp;rating=1&amp;secure_key={$this->member->form_hash}&amp;post_return={$post['post']['pid']}' class='rep_up' title='{$this->lang->words['reputation_up']}'>" . $this->registry->getClass('output')->getReplacement("rep_up") . "</a></li>
						") : ("")) . "
						" . (($this->settings['reputation_point_types'] == 'negative' || $this->settings['reputation_point_types'] == 'both') ? ("
							<li><a href='{$this->settings['base_url']}app=core&amp;module=global&amp;section=reputation&amp;do=add_rating&amp;app_rate=forums&amp;type=pid&amp;type_id={$post['post']['pid']}&amp;rating=-1&amp;secure_key={$this->member->form_hash}&amp;post_return={$post['post']['pid']}' class='rep_down' title='{$this->lang->words['reputation_down']}'>" . $this->registry->getClass('output')->getReplacement("rep_down") . "</a></li>
						") : ("")) . "
						</ul>") : ("")) . "
				</div>") : ("")) . "
				<script type='text/javascript'>
					ipb.global.registerReputation( 'rep_post_{$post['post']['pid']}', { app: 'forums', type: 'pid', typeid: '{$post['post']['pid']}' }, parseInt('{$post['post']['rep_points']}') );
				</script>") : ("")) . "
				<ul class='post_controls'>
					" . ((($this->settings['disable_reportpost'] != 1) and ( $this->memberData['member_id'] )) ? ("<li class='report'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=reports&amp;rcom=post&amp;tid={$this->request['t']}&amp;pid={$post['post']['pid']}&amp;st={$this->request['st']}", 'public','' ), "", "" ) . "'>" . $this->registry->getClass('output')->getReplacement("report_post_icon") . " {$this->lang->words['report']}</a>
						</li>
						" . (($this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['gfx'] > 0) ? ("
							<li class='report'>
								<a href=\"{$this->settings['base_url']}app=core&amp;module=reports&amp;section=reports&amp;do=show_report&amp;rid={$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['info']['id']}\" id='post-report-{$post['post']['pid']}' class='ipbmenu'> <span id=\"rstat-{$this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['info']['id']}\"><img src=\"{$this->settings['img_url']}/reports/post_alert_{$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['gfx']}.png\" alt=\"{$this->lang->words['icon']}\" /></span> </a>
							</li>
						") : ("")) . "") : ("")) . "
					<li class='top hide'><a href='#top' class='top' title='{$this->lang->words['back_top']}'>{$this->lang->words['back_top']}</a></li>
					
					" . ((isset( $post['post']['_mq_selected'] ) && $post['post']['_mq_selected']) ? ("
						<li class='selected multiquote' id='multiq_{$post['post']['pid']}' style='display: none'>
					") : ("
						<li class='multiquote' id='multiq_{$post['post']['pid']}' style='display: none'>
					")) . "
							<a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=reply_post&amp;f={$this->request['f']}&amp;t={$this->request['t']}&amp;qpid={$post['post']['pid']}", 'publicWithApp','' ), "", "" ) . "\" title=\"{$this->lang->words['quote_with_mq']}\">" . $this->registry->getClass('output')->getReplacement("mq_post_icon") . " {$this->lang->words['mq']}</a>
						</li>
					<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=reply_post&amp;f={$this->request['f']}&amp;t={$this->request['t']}&amp;qpid={$post['post']['pid']}", 'publicWithApp','' ), "", "" ) . "\" title=\"{$this->lang->words['tt_reply_to_post']}\">" . $this->registry->getClass('output')->getReplacement("reply_post_icon") . " {$this->lang->words['post_reply']}</a></li>
					" . (($post['post']['_can_edit'] === TRUE) ? ("
						<li class='post_edit'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=edit_post&amp;f={$forum['id']}&amp;t={$topic['tid']}&amp;p={$post['post']['pid']}&amp;st={$this->request['st']}", 'publicWithApp','' ), "", "" ) . "' title='{$this->lang->words['post_edit_title']}' class='edit_post' id='edit_post_{$post['post']['pid']}'>" . $this->registry->getClass('output')->getReplacement("edit_post_icon") . " {$this->lang->words['post_edit']}</a></li>
					") : ("")) . "
					" . (($post['post']['_can_delete'] === TRUE) ? ("
						<li class='post_del' id='del_post_{$post['post']['pid']}'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=moderate&amp;section=moderate&amp;do=04&amp;f={$forum['id']}&amp;t={$topic['tid']}&amp;p={$post['post']['pid']}&amp;st={$this->request['st']}&amp;auth_key={$this->member->form_hash}", 'publicWithApp','' ), "", "" ) . "' title='{$this->lang->words['post_delete_title']}' class='delete_post'>" . $this->registry->getClass('output')->getReplacement("delete_post_icon") . " {$this->lang->words['post_delete']}</a>
						</li>
					") : ("")) . "
					<!-- Matt: Approve / unapprove post button -->
					" . (($this->memberData['is_mod']) ? ("<li class='post_toggle toggle_post' id='toggle_post_{$post['post']['pid']}' style='display: none'>
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=forums&amp;section=moderate&amp;do=postchoice&amp;tact=unapprove&amp;selectedpids[{$post['post']['pid']}]=1", 'public','' ), "", "" ) . "' title='{$this->lang->words['post_toggle_visible']}'>" . $this->registry->getClass('output')->getReplacement("edit_post_icon") . " <span id='toggletext_post_{$post['post']['pid']}'>" . (($post['post']['queued']==1) ? ("{$this->lang->words['post_approve']}") : ("{$this->lang->words['post_unapprove']}")) . "</span></a>
						</li>") : ("")) . "
				</ul>
				<script type='text/javascript'>
					// Show multiquote for JS browsers
					$('multiq_{$post['post']['pid']}').show();
					
					if( $('toggle_post_{$post['post']['pid']}') )
					{
						$('toggle_post_{$post['post']['pid']}').show();
					}
				</script>
				" . (($this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['gfx'] > 0) ? ("
					<ul id='post-report-{$post['post']['pid']}_menucontent' class='ipbmenu_content report_menu'>
						<li><a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=reports&amp;do=show_report&amp;rid={$this->memberData['_cache']['report_temp']['post_marker']['post'][ $post['post']['pid'] ]['info']['id']}", 'public','' ), "", "" ) . "\" id='report_mark_{$post['post']['pid']}'><img src='{$this->settings['img_url']}/reports/mark_complete.png' alt='' /> {$this->lang->words['report_menu_mark_complete']}</a></li>
						<li><a href=\"{$this->settings['base_url']}app=core&amp;module=reports&amp;section=reports&amp;do=show_report&amp;rid={$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['info']['id']}\"><img src='{$this->settings['img_url']}/reports/view_report.png' alt='' /> {$this->lang->words['report_menu_view_report']}</a></li>
					</ul>
					<script type=\"text/javascript\">
						$('report_mark_{$post['post']['pid']}').observe('click',
						 	ipb.global.updateReportStatus.bindAsEventListener( 	
								this, {$this->memberData['_cache']['report_temp']['post_marker']['post'][$post['post']['pid']]['info']['id']},2,2
							)
						);
					</script>																							
				") : ("")) . "
			</div>
		<!-- </if> -->			
		</div>
		" . (($post['post']['_repignored'] == 1 || $post['post']['_ignored']) ? ("
			<script type='text/javascript'>
				ipb.topic.setPostHidden( {$post['post']['pid']} );
				$('unhide_post_{$post['post']['pid']}').show();
			</script>
		") : ("")) . "
		<hr />
		" . (($post['post']['_end_first_post']) ? ("<!-- END OF FIRST POST IN LINEAR+, SHOW BUTTONS AND NEW TITLE -->
			<br />
			<div class='topic_controls'>
				{$topic['SHOW_PAGES']}
				<ul class='topic_buttons'>
					" . (($forum['_user_can_post']) ? ("
						<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "module=post&amp;section=post&amp;do=new_post&amp;f={$forum['id']}", 'publicWithApp','' ), "", "" ) . "' title='{$this->lang->words['start_new_topic']}' accesskey='n'>" . $this->registry->getClass('output')->getReplacement("topic_icon") . " {$this->lang->words['start_new_topic']}</a></li>
					") : ("
						<li class='disabled'><span>{$this->lang->words['top_cannot_start']}</span></li>
					")) . "
					" . (($displayData['reply_button']['image'] == 'locked') ? ("<li class='closed'>
							" . (($displayData['reply_button']['url']) ? ("
								<a href='{$displayData['reply_button']['url']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked_reply']}</a>
							") : ("
								<span>" . $this->registry->getClass('output')->getReplacement("lock_icon") . " {$this->lang->words['top_locked']}</span>
							")) . "
						</li>") : ("" . (($displayData['reply_button']['image']) ? ("" . (($displayData['reply_button']['url']) ? ("
								<li><a href='{$displayData['reply_button']['url']}' title='{$this->lang->words['topic_add_reply']}' accesskey='r'>" . $this->registry->getClass('output')->getReplacement("reply_icon") . " {$this->lang->words['topic_add_reply']}</a></li>
							") : ("
								<li class='disabled'><span>{$this->lang->words['top_cannot_reply']}</span></li>
							")) . "") : ("")) . "")) . "
				</ul>
			</div>
			<h2 class='maintitle'>{$this->lang->words['topic_other_replies']}</h2>
			<div class='generic_bar'></div>") : ("")) . "
	
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

function __f__ace4ac01245a56cabbbd7059ad762465($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	foreach( $displayData['multi_mod'] as $mm_data )
	{
		
		$_ips___x_retval .= "
								<option value=\"{$mm_data[0]}\">{$mm_data[1]}</option>
							
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

function __f__4f9c3de4210c152b6cad29b36106f8b1($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	foreach( $displayData['mod_links'] as $_mod_link )
	{
		
		$_ips___x_retval .= "
							<option value=\"{$_mod_link['option']}\">-{$_mod_link['value']}</option>
						
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

function __f__b41809fec188903bc8e50e4ea9ca298d($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	foreach( $this->caches['reputation_levels'] as $k => $v )
	{
		
		$_ips___x_retval .= "
					<option value='{$v['level_points']}'" . ((isset( $this->memberData['_members_cache']['rep_filter'] ) AND $v['level_points'] == $this->memberData['_members_cache']['rep_filter']) ? (" selected='selected'") : ("")) . ">{$v['level_points']} {$this->lang->words['rep_f_points']}</option>
					
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

function __f__2fb52215723edde3f3872551b590524a($forum, $topic, $post_data, $displayData)
{
	$_ips___x_retval = '';
	foreach( $displayData['active_users']['names'] as $p => $r )
	{
		
		$_ips___x_retval .= "
				<li>{$r['p_start']}" . (($r['id']) ? ("<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$r['id']}", 'public','' ), "{$r['seo']}", "showuser" ) . "' title='{$r['p_title']}'>") : ("")) . "{$r['name']}" . (($r['id']) ? ("</a>") : ("")) . "{$r['p_end']}" . (($p + 1 != count( $displayData['active_users']['names'] )) ? (",") : ("")) . "</li>
					
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}



}

/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>