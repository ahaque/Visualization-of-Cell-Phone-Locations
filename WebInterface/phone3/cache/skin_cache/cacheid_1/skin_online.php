<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 1               */
/* CACHE FILE: Generated: Sun, 06 Sep 2009 04:32:03 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_online_1 {

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	/* Make object */
	$this->registry   =  $registry;
	$this->DB         =  $this->registry->DB();
	$this->settings   =& $this->registry->fetchSettings();
	$this->request    =& $this->registry->fetchRequest();
	$this->lang       =  $this->registry->getClass('class_localization');
	$this->member     =  $this->registry->member();
	$this->memberData =& $this->registry->member()->fetchMemberData();
	$this->cache      =  $this->registry->cache();
	$this->caches     =& $this->registry->cache()->fetchCaches();
}
	/* -- showOnlineList --*/
function showOnlineList($rows, $links="", $defaults=array(), $our_mgroups=array()) {
$IPBHTML = "";

$this->registry->templateStriping['online'] = array( FALSE, "row1","row2");
$IPBHTML .= "<div class='topic_controls'>
	{$links}
</div>
<h2 class='maintitle'>{$this->lang->words['page_title']}</h2>
<table class='ipb_table' summary=\"{$this->lang->words['users_online']}\">
	<tr class='header'>
		<th scope='col' width='55'>&nbsp;</th>
		<th scope='col'>{$this->lang->words['member_name']}</th>
		<th scope='col'>{$this->lang->words['where']}</th>
		<th scope='col'>{$this->lang->words['time']}</th>
		<th scope='col'>&nbsp;</th>
	</tr>
	" . ((count($rows)) ? ("
				".$this->__f__bbeb34120594dcbbf1392e3622a54dac($rows,$links,$defaults,$our_mgroups)."	") : ("")) . "
</table>
<div id='forum_filter' class='filter_bar rounded'>
	<form method=\"post\" action=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=members&amp;section=online&amp;module=online", 'public','' ), "", "" ) . "\">
		<label for='sort_key'>{$this->lang->words['s_by']}</label>
		<select name=\"sort_key\" id='sort_key' class='input_select'>
			".$this->__f__ba1733ae62fc09b8779940406824b396($rows,$links,$defaults,$our_mgroups)."		</select>
		<select name=\"show_mem\" class='input_select'>
			".$this->__f__2b41a6facea5ec0e8800b533522a62f6($rows,$links,$defaults,$our_mgroups)."		</select>
		<select name=\"sort_order\" class='input_select'>
			".$this->__f__5c7552a80fbad5f21039a2e3db1e53bd($rows,$links,$defaults,$our_mgroups)."		</select>
		<input type=\"submit\" value=\"{$this->lang->words['s_go']}\" class=\"input_submit alt\" />
	</form>
</div>
<br />
<div class='topic_controls'>
	{$links}
</div>";
return $IPBHTML;
}


function __f__bbeb34120594dcbbf1392e3622a54dac($rows, $links="", $defaults=array(), $our_mgroups=array())
{
	$_ips___x_retval = '';
	foreach( $rows as $session )
	{
		
		$_ips___x_retval .= "
			<tr>
				<td class='row1'>
					<img src='{$session['_memberData']['pp_thumb_photo']}' alt=\"{$session['_memberData']['members_display_name']}{$this->lang->words['users_photo']}\" width='{$session['_memberData']['pp_thumb_width']}' height='{$session['_memberData']['pp_thumb_height']}' class='photo' />
				</td>
				<td class='" .  IPSLib::next( $this->registry->templateStriping["online"] ) . "'>
					" . (($session['member_name']) ? ("" . (($session['member_id']) ? ("
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$session['member_id']}", 'public','' ), "{$session['seo_name']}", "showuser" ) . "' title='{$this->lang->words['view_profile']}'>" . IPSLib::makeNameFormatted( $session['member_name'], $session['member_group'] ) . "</a>" . $this->registry->getClass('output')->getTemplate('global')->user_popup($session['member_id'],$session['seo_name']) . "
						") : ("
							" . IPSLib::makeNameFormatted( $session['member_name'], $session['member_group'] ) . "
						")) . "") : ("
						{$this->lang->words['global_guestname']}
					")) . "
					" . (($session['is_bot'] AND $this->settings['spider_anon']) ? ("" . (($this->memberData['g_access_cp']) ? ("
							*
						") : ("")) . "") : ("" . (($session['login_type'] == 1) ? ("" . ((!$this->settings['disable_admin_anon'] AND $this->memberData['g_access_cp']) ? ("
								*
							") : ("")) . "") : ("")) . "")) . "
					" . (($this->memberData['g_access_cp'] AND !$this->settings['disable_online_ip']) ? ("
						<span class='ip'>( {$session['ip_address']} )</span>
					") : ("")) . "
				</td>
				<td class='" .  IPSLib::next( $this->registry->templateStriping["online"] ) . "'>
					" . ((!$session['where_line']) ? ("
						{$this->lang->words['board_index']}
					") : ("" . (($session['where_link'] AND !$session['where_line_more']) ? ("
							<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$session['where_link']}", 'public','' ), "", "" ) . "'>
						") : ("")) . "
						{$session['where_line']} 
						" . (($session['where_line_more']) ? ("&nbsp;
							" . (($session['_whereLinkSeo']) ? ("
								<a href='{$session['_whereLinkSeo']}'>
							") : ("" . (($session['where_link']) ? ("<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "{$session['where_link']}", 'public','' ), "", "" ) . "'>") : ("")) . "")) . "
							{$session['where_line_more']}
							" . (($session['where_link']) ? ("</a>") : ("")) . "") : ("" . (($session['where_link']) ? ("</a>") : ("")) . "")) . "")) . "
				</td>
				<td class='" .  IPSLib::next( $this->registry->templateStriping["online"] ) . "'>
					" . $this->registry->getClass('class_localization')->getDate($session['running_time'],"long", 1) . "
				</td>
				<td class='" .  IPSLib::next( $this->registry->templateStriping["online"] ) . "'>
					" . (($session['member_id'] AND $session['member_name']) ? ("<ul class='user_controls clear'>
							" . (($this->memberData['member_id'] AND $this->memberData['member_id'] != $session['member_id'] && $this->settings['friends_enabled'] AND $this->memberData['g_can_add_friends']) ? ("" . ((IPSMember::checkFriendStatus( $session['member_id'] )) ? ("
									<li class='mini_friend_toggle is_friend' id='friend_online_{$session['member_id']}'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=members&amp;module=profile&amp;section=friends&amp;do=remove&amp;member_id={$session['member_id']}&amp;secure_key={$this->member->form_hash}", 'public','' ), "", "" ) . "' title='{$this->lang->words['remove_friend']}'>" . $this->registry->getClass('output')->getReplacement("remove_friend") . "</a></li>
								") : ("
									<li class='mini_friend_toggle is_not_friend' id='friend_online_{$session['member_id']}'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=members&amp;module=profile&amp;section=friends&amp;do=add&amp;member_id={$session['member_id']}&amp;secure_key={$this->member->form_hash}", 'public','' ), "", "" ) . "' title='{$this->lang->words['add_friend']}'>" . $this->registry->getClass('output')->getReplacement("add_friend") . "</a></li>								
								")) . "") : ("")) . "
							" . (($this->memberData['member_id'] AND $this->memberData['member_id'] != $session['member_id'] AND $this->memberData['g_use_pm'] AND $this->memberData['members_disable_pm'] == 0 AND IPSLib::moduleIsEnabled( 'messaging', 'members' )) ? ("
								<li class='pm_button' id='pm_online_{$session['member_id']}'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=members&amp;module=messaging&amp;section=send&amp;do=form&amp;fromMemberID={$session['member_id']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['pm_member']}'>" . $this->registry->getClass('output')->getReplacement("send_msg") . "</a></li>
							") : ("")) . "
							" . (($session['memberData']['has_blog'] AND IPSLib::appIsInstalled( 'blog' )) ? ("
								<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=blog&amp;module=display&amp;section=blog&amp;mid={$session['member_id']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['view_blog']}'>" . $this->registry->getClass('output')->getReplacement("blog_link") . "</a></li>
							") : ("")) . "
							" . (($session['memberData']['has_gallery'] AND IPSLib::appIsInstalled( 'gallery' )) ? ("
								<li><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=gallery&amp;module=user&amp;section=user&amp;user={$session['member_id']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['view_gallery']}'>" . $this->registry->getClass('output')->getReplacement("gallery_link") . "</a></li>
							") : ("")) . "
						</ul>") : ("
						<span class='desc'>{$this->lang->words['no_options_available']}</span>
					")) . "
				</td>
			</tr>
		
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

function __f__ba1733ae62fc09b8779940406824b396($rows, $links="", $defaults=array(), $our_mgroups=array())
{
	$_ips___x_retval = '';
	foreach( array( 'click', 'name' ) as $sort )
	{
		
		$_ips___x_retval .= "
				<option value='{$sort}'" . (($defaults['sort_key'] == $sort) ? (" selected='selected'") : ("")) . ">{$this->lang->words['s_sort_key_' . $sort ]}</option>
			
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

function __f__2b41a6facea5ec0e8800b533522a62f6($rows, $links="", $defaults=array(), $our_mgroups=array())
{
	$_ips___x_retval = '';
	foreach( array( 'reg', 'guest', 'all' ) as $filter )
	{
		
		$_ips___x_retval .= "
				<option value='{$filter}'" . (($defaults['show_mem'] == $filter) ? (" selected='selected'") : ("")) . ">{$this->lang->words['s_show_mem_' . $filter ]}</option>
			
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

function __f__5c7552a80fbad5f21039a2e3db1e53bd($rows, $links="", $defaults=array(), $our_mgroups=array())
{
	$_ips___x_retval = '';
	foreach( array( 'desc', 'asc' ) as $order )
	{
		
		$_ips___x_retval .= "
				<option value='{$order}'" . (($defaults['sort_order'] == $order) ? (" selected='selected'") : ("")) . ">{$this->lang->words['s_sort_order_' . $order ]}</option>
			
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}



}

/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>