<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 1               */
/* CACHE FILE: Generated: Sun, 06 Sep 2009 04:32:03 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_post_1 {

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	/* Make object */
	$this->registry   =  $registry;
	$this->DB         =  $this->registry->DB();
	$this->settings   =& $this->registry->fetchSettings();
	$this->request    =& $this->registry->fetchRequest();
	$this->lang       =  $this->registry->getClass('class_localization');
	$this->member     =  $this->registry->member();
	$this->memberData =& $this->registry->member()->fetchMemberData();
	$this->cache      =  $this->registry->cache();
	$this->caches     =& $this->registry->cache()->fetchCaches();
}
	/* -- attachiFrame --*/
function attachiFrame($JSON, $id) {
$IPBHTML = "";
$IPBHTML .= "<html>
<body style='background-color: transparent;'>
<form id='iframeUploadForm' method='post' enctype=\"multipart/form-data\" action=''>
<script type='text/javascript'>
	parent.ipb.attach._jsonPass( $id, $JSON );
</script>
<input type='file' id='iframeUploadBox_$id' style='display: inline' name='FILE_UPLOAD' /> <input type='reset' value='{$this->lang->words['clear_selection']}' style='display: inline' />
</form>
</body>
</html>";
return $IPBHTML;
}

/* -- errors --*/
function errors($data="") {
$IPBHTML = "";
$IPBHTML .= "<p class='message error'>
	{$data}
</p>
<br />";
return $IPBHTML;
}

/* -- pollBox --*/
function pollBox($max_poll_questions="",$max_poll_choices="",$poll_questions="",$poll_choices="",$poll_votes="",$show_open="",$poll_question="",$is_mod=0,$poll_multi="",$poll_only='', $poll_view_voters='', $total_votes=0) {
$IPBHTML = "";
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("poll", "0" ) . "
<script type='text/javascript'>
//<![CDATA[
	ipb.poll.maxQuestions = parseInt( {$max_poll_questions} );
	ipb.poll.maxChoices = parseInt( {$max_poll_choices} );
	ipb.poll.isPublicPoll = parseInt( {$poll_view_voters} );
	ipb.poll.showOnLoad = {$show_open};
	ipb.poll.isMod = {$is_mod};
	
	ipb.poll.questions = \$H(
		" . (($poll_questions != '[]') ? ("{$poll_questions}") : ("")) . "
	);
	
	ipb.poll.choices = \$H(
		" . (($poll_choices != '[]') ? ("{$poll_choices}") : ("")) . "
	);
	
	ipb.poll.votes = \$H(
		" . (($poll_votes != '[]') ? ("{$poll_votes}") : ("")) . "
	);
	
	ipb.poll.multi = \$H(
		" . (($poll_multi != '[]') ? ("{$poll_multi}") : ("")) . "
	);
	
	//ipb.templates['poll_section_wrap'] = \"<div id='poll_#{id}' class='general_box'>#{content}</div>\";
	ipb.templates['poll_question'] = 	new Template(\"<li class='field question' id='question_#{qid}_wrap' style='display: none'>\" +
											\"	<label for='#{qid}'><strong>{$this->lang->words['question_title']}</strong></label>\" +
											\"	<div class='wrap rounded'>\" + 
											\" 		<input type='text' class='input_text question_title' id='#{qid}' value='#{value}' size='40' maxlength='254' name='question[#{qid}]' />\" +
											\"		<input type='checkbox' class='input_check' value='1' name='multi[#{qid}]' id='multi_#{qid}'/> <label for='multi_#{qid}'><span class='desc'>{$this->lang->words['poll_multichoice']}</span></label>\" + 
											\"		<ol id='choices_for_#{qid}'></ol>\" + 
											\"		<ul class='post_controls'>\" +
											\"			<li><a href='#' id='add_choice_#{qid}' title='{$this->lang->words['add_poll_choice']}'>" . $this->registry->getClass('output')->getReplacement("add_poll_choice") . " {$this->lang->words['add_another_choice']}</a></li>\" +
											\"			<li><a href='#' id='remove_question_#{qid}' title='{$this->lang->words['remove_question']}'>" . $this->registry->getClass('output')->getReplacement("remove_poll_question") . " {$this->lang->words['remove_question']}</a></li>\" +
											\"		</ul>\" +
											\"	</div>\" +
											\"</li>\");
	ipb.templates['poll_choice'] = 		new Template(\"<li id='poll_#{qid}_#{cid}_wrap' style='display: none'><input type='text' id='poll_#{qid}_#{cid}' name='choice[#{qid}_#{cid}]' class='input_text' value='#{choice}' size='46' maxlength='254' /> <input type='text' id='poll_#{qid}_#{cid}_votes' name='votes[#{qid}_#{cid}]' value='#{votes}' class='input_text' size='5' /> <a href='#' id='remove_#{qid}_#{cid}' title='{$this->lang->words['remove_choice']}'>" . $this->registry->getClass('output')->getReplacement("remove_poll_choice") . "</a></li>\");
//]]>
</script>

<div class='post_form poll_form' id='poll_form'>
	<div class='topic_controls' id='add_poll' style='display: none'>
		<ul class='topic_buttons'>
			<li><a href='#'>" . $this->registry->getClass('output')->getReplacement("show_poll_form") . " {$this->lang->words['poll_manage_link']}</a></li>
		</ul>
	</div>
	<fieldset id='poll_wrap' style='display: none' class='clear'>
		<ul id='poll_container'>
			<li class='field'>
				<label for='poll_title'>{$this->lang->words['poll_fs_title']}</label>
				<input type='text' class='input_text' name='poll_question' id='poll_title' size='40' value='{$poll_question}' />
			</li>
			" . (($this->settings['poll_allow_public'] AND ! $total_votes) ? ("<li class='field checkbox'>
					<input type='checkbox' class='input_check' name='poll_view_voters' id='poll_view_voters' value='1' " . (($poll_view_voters) ? ("checked='checked'") : ("")) . " />
					<label for='poll_view_voters'>{$this->lang->words['poll_fs_public']}</label>
					<span class='desc'>{$this->lang->words['poll_public_warning']}</span>
				</li>") : ("")) . "
			" . (($this->settings['ipb_poll_only']) ? ("<li class='field checkbox'>
					<input type='checkbox' class='input_check' name='poll_only' id='poll_only' value='1' " . (($poll_only) ? ("checked='checked'") : ("")) . " />
					<label for='poll_only'>{$this->lang->words['poll_only_title']}</label>
					<span class='desc'>{$this->lang->words['poll_only_desc']}</span>
				</li>") : ("")) . "
		</ul>
		<span class='desc' id='poll_stats'></span>
		<div class='topic_controls'>
			<ul class='topic_buttons'>
				<li id='add_new_question'><a href='#'>" . $this->registry->getClass('output')->getReplacement("add_poll_question") . " {$this->lang->words['add_another_question']}</a></li>
				<li id='close_poll'><a href='#'>" . $this->registry->getClass('output')->getReplacement("close_poll_form") . " {$this->lang->words['close_poll_form']}</a></li>
			</ul>
		</div>
	</fieldset>
</div>";
return $IPBHTML;
}

/* -- postFormTemplate --*/
function postFormTemplate($formData=array(), $form = array()) {
$IPBHTML = "";

$this->registry->templateStriping['post_stripe'] = array( FALSE, "row1","row2");
$IPBHTML .= "" . (($formData['modOptionsData']['canSetOpenTime'] == 1 || $formData['modOptionsData']['canSetCloseTime'] == 1) ? ("
	
	<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/calendar_date_select/calendar_date_select.js'></script>
") : ("")) . "
" . $this->registry->getClass('output')->addJSModule("post", "0" ) . "<div class='post_form'>
	<!--FORUM RULES--><br />
	<form id='postingform' action='{$this->settings['base_url']}' method='post' enctype='multipart/form-data'>
	<!-- hidden inputs at bottom -->
	
<h2 class='maintitle'>{$formData['title']}</h2>
<!--SKINNOTE: Not semantic to have an empty list here for styling purposes :P -->
<div class='generic_bar'></div>
" . ((! $this->memberData['member_id']) ? ("<fieldset>
	<h3 class='bar'>{$this->lang->words['guest_name_title']}</h3>
	<ul>
		<li class='field'>
			<label for='username'>{$this->lang->words['guest_name']}</label>
			<input type='text' name='UserName' id='username' size='50' value='{$this->request['UserName']}' maxlength=\"{$this->settings['max_user_name_length']}\" class='input_text' tabindex='0' />
		</li>
		" . (($formData['captchaHTML']) ? ("
		<li class='field'>
			<label for='guest_captcha'>{$this->lang->words['guest_captcha']}</label>
			{$formData['captchaHTML']}
		</li>
		") : ("")) . "
	</ul>
</fieldset>") : ("")) . "
" . (($formData['formType'] == 'new' OR ( $formData['formType'] == 'edit' AND $formData['canEditTitle'] )) ? ("
	<fieldset>
		<h3 class='bar'>{$this->lang->words['topic_information']}</h3>
		<ul>
			<li class='field'>
				<label for='topic_title'>{$this->lang->words['topic_title']}</label>
				<input id='topic_title' class='input_text' type=\"text\" size=\"50\" maxlength=\"{$this->settings['topic_title_max_len']}\" name=\"TopicTitle\" value=\"{$formData['topicTitle']}\" tabindex=\"0\" />
			</li>
			<li class='field'>
				<label for='topic_desc'>{$this->lang->words['topic_desc']}</label>
				<input id='topic_desc' class='input_text' type=\"text\" size=\"50\" maxlength=\"70\" name=\"TopicDesc\" value=\"{$formData['topicDesc']}\" tabindex=\"0\" />
				<span class='desc'>{$this->lang->words['post_optional']}</span>
			</li>
		</ul>
	</fieldset>
") : ("")) . "
" . (($formData['pollBoxHTML']) ? ("
	<fieldset id='poll_fieldset' style='display: none'>
		<h3 class='bar'>{$this->lang->words['topic_poll_title']}</h3>
		{$formData['pollBoxHTML']}
	</fieldset>
	<script type='text/javascript'>
		$('poll_fieldset').show();
	</script>
") : ("")) . "
<fieldset>
	<h3 class='bar'>" . (($formData['formType'] == 'new' OR ( $formData['formType'] == 'edit' AND $formData['canEditTitle'] )) ? ("{$this->lang->words['topic']}") : ("{$this->lang->words['post']}")) . "</h3>
	" . ((is_array($formData['statusMsg']) AND count($formData['statusMsg']) AND strlen($formData['statusMsg'][0])) ? ("
		<div class='message'>" . implode( '<br />', $formData['statusMsg']) . "</div>
	") : ("")) . "
	{$formData['editor']}
</fieldset>
" . (($formData['uploadForm']) ? ("
<fieldset class='attachments'>
	{$formData['uploadForm']}
</fieldset>
") : ("")) . "
<fieldset id='post_options' class='with_subhead'>
	<h3 class='bar'>{$this->lang->words['options']}</h3>
		
	<div id='post_options_options'>
		<h4>{$this->lang->words['post_options']}</h4>
		<ul>
			" . ((is_array( $formData['checkBoxes']['html'] ) AND count( $formData['checkBoxes']['html'] )) ? ("
				<li class='field'>
					<select name=\"post_htmlstatus\" class=\"input_select\">
						<option value=\"0\"{$formData['checkBoxes']['html'][0]}>{$this->lang->words['pp_nohtml']}</option>
						<option value=\"1\"{$formData['checkBoxes']['html'][1]}>{$this->lang->words['pp_html1']}</option>
						<option value=\"2\"{$formData['checkBoxes']['html'][2]}>{$this->lang->words['pp_html2']}</option>
					</select>
				</li>
			") : ("")) . "
				<li class='field checkbox'>
					<input type=\"checkbox\" name=\"enableemo\" class=\"input_check\" value=\"yes\" id='enable_emo' {$formData['checkBoxes']['emo']} />
					<label for='enable_emo'>{$this->lang->words['enable_emo']}</label>
				</li>
			" . (($this->memberData['member_id']) ? ("<li class='field checkbox'>
					<input type=\"checkbox\" name=\"enablesig\" class=\"input_check\" value=\"yes\" id='enable_sig' {$formData['checkBoxes']['sig']} />
					<label for='enable_sig'>{$this->lang->words['enable_sig']}</label>
				</li>
				" . (($formData['checkBoxes']['tra'] == '-tracking-') ? ("
					<li class='field'><span class='desc'>{$this->lang->words['already_sub']}</span><li>
				") : ("
					<li class='field checkbox'>
						<input type=\"checkbox\" name=\"enabletrack\" class=\"input_check\" id='enable_track' value=\"1\" {$formData['checkBoxes']['tra']} />
						<label for='enable_track'>{$this->lang->words['enable_track']}</label>
					</li>
				")) . "") : ("")) . "
		</ul>
		<hr />
	" . (($formData['extraData']['showEditOptions']) ? ("
		<h4>{$this->lang->words['edit_options']}</h4>
		<ul>
			<li class='field checkbox'>
				<input type=\"checkbox\" name=\"add_edit\" value=\"1\" id='append_edit' {$formData['extraData']['checked']} class=\"input_check\" />
				<label for='append_edit'>{$this->lang->words['append_edit']}</label>
			</li>
		</ul>
		<hr />
	") : ("")) . "
	" . (($formData['extraData']['showReason']) ? ("
	<ul>
	<li class='field'>
		<label for='post_edit_reason'>{$this->lang->words['reason_for_edit']}</label><br />
		<input type=\"text\" name=\"post_edit_reason\" id='post_edit_reason' value=\"{$formData['extraData']['reasonForEdit']}\" size='40' maxlength='250' class='input_text' />
	</li>
	</ul>
	") : ("")) . "
	
	" . (($formData['modOptionsData']['dropDownOptions'] != "") ? ("
		<h4>{$this->lang->words['mod_options']}</h4>
		<ul>
			<li class='field'>{$formData['modOptionsData']['dropDownOptions']}</select></li>
		</ul>
		<hr />
	") : ("")) . "
	" . (($formData['modOptionsData']['canSetOpenTime'] == 1) ? ("
		<h4>{$this->lang->words['mod_open_time']} <span class='desc'>{$this->lang->words['post_optional']}</span></h4>
		<ul>
			<li class='field'>
				<input type='text' size='20' name='open_time_date' id='mod_open_date' class='input_text' value='{$formData['modOptionsData']['myTimes']['open_date']}' />
				<img src='{$this->settings['img_url']}/date.png' alt='{$this->lang->words['generic_date']}' id='mod_open_date_icon' class='clickable' /> 
				<span class='desc'>{$this->lang->words['mod_date_format']}</span>
			</li>
			<li class='field'>
				<input type='text' size='5' name='open_time_time' id='mod_open_time' class='input_text' value='{$formData['modOptionsData']['myTimes']['open_time']}' />
				<span class='desc'>{$this->lang->words['mod_time_format']}</span>
			</li>
		</ul>
		<hr />
	") : ("")) . "
	" . (($formData['modOptionsData']['canSetCloseTime'] == 1) ? ("
		<h4>{$this->lang->words['mod_close_time']} <span class='desc'>{$this->lang->words['post_optional']}</span></h4>
		<ul>
			<li class='field'>
				<input type='text' size='20' name='close_time_date' id='mod_close_date' class='input_text' value='{$formData['modOptionsData']['myTimes']['close_date']}' />
				<img src='{$this->settings['img_url']}/date.png' alt='{$this->lang->words['generic_date']}' id='mod_close_date_icon' class='clickable' />
				<span class='desc'>{$this->lang->words['mod_date_format']}</span>
			</li>
			<li class='field'>
				<input type='text' size='5' name='close_time_time' id='mod_close_time' class='input_text' value='{$formData['modOptionsData']['myTimes']['close_time']}' />
				<span class='desc'>{$this->lang->words['mod_time_format']}</span>
			</li>
		</ul>
		<hr />
	") : ("")) . "
		<h4>{$this->lang->words['post_icon']}</h4>
		<ul id='post_icons'>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"1\"" . ((isset( $formData['postIconSelected']['1'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon1.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"2\"" . ((isset( $formData['postIconSelected']['2'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon2.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"3\"" . ((isset( $formData['postIconSelected']['3'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon3.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"4\"" . ((isset( $formData['postIconSelected']['4'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon4.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"5\"" . ((isset( $formData['postIconSelected']['5'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon5.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"6\"" . ((isset( $formData['postIconSelected']['6'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon6.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"7\"" . ((isset( $formData['postIconSelected']['7'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon7.gif\" alt='' />
			</li>
			<li class='clear'>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"8\"" . ((isset( $formData['postIconSelected']['8'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon8.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"9\"" . ((isset( $formData['postIconSelected']['9'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon9.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"10\"" . ((isset( $formData['postIconSelected']['10'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon10.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"11\"" . ((isset( $formData['postIconSelected']['11'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon11.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"12\"" . ((isset( $formData['postIconSelected']['12'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon12.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"13\"" . ((isset( $formData['postIconSelected']['13'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon13.gif\" alt='' />
			</li>
			<li>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"14\"" . ((isset( $formData['postIconSelected']['14'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;
				<img src=\"{$this->settings['mime_img']}/style_extra/post_icons/icon14.gif\" alt='' />
			</li>
			<li class='clear'>
				<input type=\"radio\" class=\"input_radio\" name=\"iconid\" value=\"0\"" . ((isset( $formData['postIconSelected']['0'] )) ? (" checked=\"checked\"") : ("")) . " />&nbsp;&nbsp;{$this->lang->words['picons_none']}
			</li>
		</ul>
		<hr />
	</div>
	
	<span id='toggle_post_options' class='clickable'></span>
	
	<script type='text/javascript'>
		ipb.post.hideOptions();
	</script>
</fieldset>
<fieldset class='submit'>
	<input type='hidden' name='st' value='{$this->request['st']}' />
	<input type='hidden' name='app' value='forums' />
	<input type='hidden' name='module' value='post' />
	<input type='hidden' name='section' value='post' />
	<input type='hidden' name='do' value='{$form['doCode']}' />
	<input type='hidden' name='s' value='{$this->member->session_id}' />
	<input type='hidden' name='p' value='{$form['p']}' />
	<input type='hidden' name='t' value='{$form['t']}' />
	<input type='hidden' name='f' value='{$form['f']}' />
	<input type='hidden' name='parent_id' value='{$form['parent']}' />
	<input type='hidden' name='attach_post_key' value='{$form['attach_post_key']}' />
	<input type='hidden' name='auth_key' value='{$this->member->form_hash}' />
	<input type='hidden' name='removeattachid' value='0' />
	
	<input type=\"submit\" name=\"dosubmit\" value=\"{$formData['buttonText']}\" tabindex=\"0\" class=\"input_submit\" accesskey=\"s\"  />&nbsp;
	<input type=\"submit\" name=\"preview\" value=\"{$this->lang->words['button_preview']}\" tabindex=\"0\" class=\"input_submit alt\" />
	{$this->lang->words['or']} " . (($form['t']) ? ("
			<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$form['t']}", 'public','' ), "{$formData['seoTopic']}", "showtopic" ) . "' title='{$this->lang->words['cancel']}' class='cancel' tabindex='0'>{$this->lang->words['cancel']}</a>
		") : ("
			<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showforum={$form['f']}", 'public','' ), "{$formData['seoForum']}", "showforum" ) . "' title='{$this->lang->words['cancel']}' class='cancel' tabindex='0'>{$this->lang->words['cancel']}</a>
		")) . "
</fieldset>
</form>
</div>	
{$formData['topicSummary'][0]['html']}";
return $IPBHTML;
}

/* -- preview --*/
function preview($data="") {
$IPBHTML = "";
$IPBHTML .= "<!-- SKINNOTE: Needs code updating -->
" . (($data AND trim($data) != '<br />' AND trim($data) != '<br>') ? ("
	<h2 class='maintitle'>{$this->lang->words['post_preview']}</h2>
	<div class='post_wrap' id='post_preview'>
		<div class='row2' style='padding:8px'>
			<div class='post entry-content'>{$data}</div>
		</div>
	</div>
	<br />
") : ("")) . "";
return $IPBHTML;
}

/* -- topicSummary --*/
function topicSummary($posts=array()) {
$IPBHTML = "";
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("topic", "0" ) . "
" . $this->registry->getClass('output')->getTemplate('global')->include_highlighter() . "
<br /><br />
<h2 class='maintitle'>{$this->lang->words['topic_summary']}</h2>
<div class='generic_bar'></div>
<div id='topic_summary'>
" . ((is_array( $posts ) AND count( $posts )) ? ("
	".$this->__f__002423666c7e99e7723b6e02fcdb2346($posts)."") : ("")) . "
<p class='submit'>
	<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$this->request['t']}", 'public','' ), "", "" ) . "' title='{$this->lang->words['review_topic']}' id='review_topic'>{$this->lang->words['review_topic']}</a>
</p>
</div>";
return $IPBHTML;
}


function __f__002423666c7e99e7723b6e02fcdb2346($posts=array())
{
	$_ips___x_retval = '';
	foreach( $posts as $pid => $data )
	{
		
		$_ips___x_retval .= "
		<div class='post_block topic_summary'>
			" . (($data['member_id']) ? ("
				<h3><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$data['member_id']}", 'public','' ), "{$data['members_seo_name']}", "showuser" ) . "'>{$data['author']}</a>" . $this->registry->getClass('output')->getTemplate('global')->user_popup($data['member_id'],$data['members_seo_name']) . "</h3>
			") : ("
				<h3>{$data['author']}</h3>
			")) . "
			<p class='posted_info'>{$this->lang->words['summary_posted']} {$data['date']}</p>
			<div class='post_body'>
				" . ((isset( $data['_ignored'] ) && $data['_ignored'] == 1) ? ("
					<div class='post'>{$this->lang->words['ignore_first_line']} {$data['members_display_name']}.</div>
				") : ("
					<div class=\"post\">{$data['post']}</div>
				")) . "
			</div>
		</div>
	
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- uploadForm --*/
function uploadForm($post_key="",$type="",$stats=array(),$id="",$forum_id=0) {
$IPBHTML = "";
$IPBHTML .= "<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/swfupload/swfupload.js'></script>
<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/swfupload/plugins/swfupload.swfobject.js'></script>
<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/swfupload/plugins/swfupload.cookies.js'></script>
<script type='text/javascript' src='{$this->settings['public_dir']}js/3rd_party/swfupload/plugins/swfupload.queue.js'></script>
<script type='text/javascript'>
//<![CDATA[
	ipb.lang['used_space'] = \"" . sprintf( $this->lang->words['used_space_js'], "{$stats['max_single_upload_human']}" ) . "\";
//]]>
</script>
" . $this->registry->getClass('output')->addJSModule("attach", "0" ) . "
<h3 class='bar'>{$this->lang->words['upload_title']}</h3>
<!--SKINNOTE: traditional uploader needs this. -->
<div id='attach_error_box' class='message error' style='display:none'></div>
<input type='file' id='nojs_attach_{$id}_1' class='input_upload' name='FILE_UPLOAD' tabindex='1' />
<input type='file' id='nojs_attach_{$id}_2' class='input_upload' name='FILE_UPLOAD' tabindex='1' />
	
<ul id='attachments'><li style='display: none'></li></ul>
<br />
<span id='buttonPlaceholder'></span>
<input type='button' id='add_files_attach_{$id}' class='input_submit' value='{$this->lang->words['attach_selected']}' style='display: none; clear: both' tabindex='1' /> <span class='desc' id='space_info_attach_{$id}'>" . sprintf( $this->lang->words['used_space'], "{$stats['space_used_human']}", "{$stats['total_space_allowed_human']}", "{$stats['max_single_upload_human']}") . "</span>
" . (($this->settings['uploadFormType']) ? ("<div class='message unspecific' style='margin: 15px 15px 0 15px'>
		<h4>{$this->lang->words['attach_files_help']}</h4>
		<p class='desc' id='help_msg'>		
			" . (($this->memberData['member_uploader'] == 'flash') ? ("
				{$this->lang->words['select_several']}<br />
				{$this->lang->words['trouble_uploading']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=usercp&amp;hl=true", 'public','' ), "", "" ) . "' title='{$this->lang->words['switch']}' tabindex='1'>{$this->lang->words['switch_to_basic']}</a>
			") : ("
				<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&amp;module=usercp&amp;hl=true", 'public','' ), "", "" ) . "' title='{$this->lang->words['switch']}' tabindex='1'>{$this->lang->words['switch_to_advanced']}</a>
			")) . "
		</p>
	</div>") : ("")) . "
<script type='text/javascript'>
//<![CDATA[
	// Show the button and info
	$('add_files_attach_{$id}').show();
	$('space_info_attach_{$id}').show();
	
	var useType = 'simple';
	var uploadURL = ipb.vars['base_url'] + \"app=core&module=attach&section=attach&do=attachiFrame&attach_rel_module={$type}&attach_rel_id={$id}&attach_post_key={$post_key}&forum_id={$forum_id}&attach_id=attach_{$id}&fetch_all=1\";
	if( jimAuld.utils.flashsniffer.meetsMinVersion(9) && ( ipb.vars['swfupload_enabled'] && ipb.vars['use_swf_upload'] ) )
	{
		useType = 'swf';
		var uploadURL = \"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=core&module=attach&section=attach&do=attach_upload_process&attach_rel_module={$type}&attach_rel_id={$id}&attach_post_key={$post_key}&forum_id={$forum_id}", 'public','' ), "", "" ) . "\";
		
		$('add_files_attach_{$id}').observe('mouseover', function(e){  } );
	}
	
	ipb.attach.template = \"<li id='ali_[id]' class='attach_row' style='display: none'><div><h4 class='attach_name'>[name]</h4><p class='info'>[info]</p><span class='img_holder'></span><p class='progress_bar'><span style='width: 0%'>0%</span></p><p class='links'><a href='#' class='add_to_post' title='{$this->lang->words['attach_button_title']}'>{$this->lang->words['attach_button']}</a> | <a href='#' class='cancel delete' title='{$this->lang->words['attach_delete_title']}'>{$this->lang->words['attach_delete']}</a></p></div></li>\"; 
	document.observe('dom:loaded', function(){
		ipb.attach.registerUploader( 'attach_{$id}', useType, 'attachments', {
			'upload_url': uploadURL,
			'attach_rel_module': \"{$type}\",
			'attach_rel_id': \"{$id}\",
			'attach_post_key': \"{$post_key}\",
			'forum_id': \"{$forum_id}\",
			'file_size_limit': \"{$stats['max_single_upload']}\"
		} )});
//]]>
</script>";
return $IPBHTML;
}



}

/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>