<?php
/*--------------------------------------------------*/
/* FILE GENERATED BY INVISION POWER BOARD 3         */
/* CACHE FILE: Skin set id: 3               */
/* CACHE FILE: Generated: Sun, 06 Sep 2009 04:32:25 GMT */
/* DO NOT EDIT DIRECTLY - THE CHANGES WILL NOT BE   */
/* WRITTEN TO THE DATABASE AUTOMATICALLY            */
/*--------------------------------------------------*/

class skin_portal_3 {

/**
* Construct
*/
function __construct( ipsRegistry $registry )
{
	/* Make object */
	$this->registry   =  $registry;
	$this->DB         =  $this->registry->DB();
	$this->settings   =& $this->registry->fetchSettings();
	$this->request    =& $this->registry->fetchRequest();
	$this->lang       =  $this->registry->getClass('class_localization');
	$this->member     =  $this->registry->member();
	$this->memberData =& $this->registry->member()->fetchMemberData();
	$this->cache      =  $this->registry->cache();
	$this->caches     =& $this->registry->cache()->fetchCaches();
}
	/* -- affiliates --*/
function affiliates($links="") {
$IPBHTML = "";
$IPBHTML .= "<div class='general_box'>
	<h3><img src='{$this->settings['img_url']}/comment_new.png' alt='{$this->lang->words['icon']}' /> {$this->lang->words['aff_title']}</h3>
	<div>
		{$this->settings['csite_fav_contents']}
	</div>
</div>
<br />";
return $IPBHTML;
}

/* -- articles --*/
function articles($articles) {
$IPBHTML = "";
$IPBHTML .= "" . $this->registry->getClass('output')->addJSModule("topic", "0" ) . "".$this->__f__fe5cebb939246255d78edb3942878d7f($articles)."";
return $IPBHTML;
}


function __f__fe5cebb939246255d78edb3942878d7f($articles)
{
	$_ips___x_retval = '';
	foreach( $articles as $entry )
	{
		
		$_ips___x_retval .= "
	<h2 class='maintitle'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$entry['tid']}", 'public','' ), "{$entry['title_seo']}", "showtopic" ) . "'>{$entry['title']}</a></h2>
	<div class='generic_bar'></div>
	<div class='post_block first hentry no_sidebar' id='announce_id_{$announce['announce_id']}'>
		<div class='post_wrap'>
			" . (($entry['member_id']) ? ("
				<h3>
			") : ("
				<h3 class='guest'>
			")) . "
					" . (($entry['member_id']) ? ("" . (($entry['_online']) ? ("
							" . $this->registry->getClass('output')->getReplacement("user_online") . "
						") : ("
							" . $this->registry->getClass('output')->getReplacement("user_offline") . "
						")) . " &nbsp;
								<address class=\"author vcard\"><a class=\"url fn\" href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$entry['member_id']}", 'public','' ), "{$entry['members_seo_name']}", "showuser" ) . "'>{$entry['members_display_name']}</a>" . $this->registry->getClass('output')->getTemplate('global')->user_popup($entry['member_id']) . "</address>") : ("
						{$entry['members_display_name']}
					")) . "
					 - {$entry['date']} - " . $this->registry->getClass('class_localization')->formatNumber( $entry['posts'] ) . " {$this->lang->words['comments_suffix']}
				</h3>
			<div class='post_body'>
				<div class='post entry-content'>
					{$entry['post']}
					<!--IBF.ATTACHMENT_{$entry['pid']}-->
				</div>
			</div>
			<div class='moderation_bar rounded'>
				" . (($entry['posts']) ? ("{$this->lang->words['read']} " . $this->registry->getClass('class_localization')->formatNumber( $entry['views'] ) . " {$this->lang->words['times_last']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$entry['tid']}&amp;view=getlastpost", 'public','' ), "{$entry['title_seo']}", "showtopic" ) . "'>{$this->lang->words['article_comment']}</a> {$this->lang->words['by']} " . (($entry['last_poster_id']) ? ("<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$entry['last_poster_id']}", 'public','' ), "{$entry['seo_last_name']}", "showuser" ) . "'>{$entry['last_poster_name']}</a>") : ("{$entry['last_poster_name']}")) . "") : ("
					{$this->lang->words['read']} " . $this->registry->getClass('class_localization')->formatNumber( $entry['views'] ) . " {$this->lang->words['times_make']} <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$entry['tid']}&amp;view=getlastpost", 'public','' ), "{$entry['title_seo']}", "showtopic" ) . "'>{$this->lang->words['article_comment']}</a>
				")) . "
				{$bottom_string}
				&nbsp;&nbsp;<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=forums&amp;section=printtopic&amp;client=printer&amp;f={$entry['forum_id']}&amp;t={$entry['tid']}", 'public','' ), "", "" ) . "'>{$this->lang->words['print']}</a>
				<a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=forums&amp;module=extras&amp;section=forward&amp;f={$entry['forum_id']}&amp;t={$entry['tid']}", 'public','' ), "", "" ) . "'>{$this->lang->words['email']}</a>
			</div>
		</div>			
	</div>
	<br />

";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- calendarWrap --*/
function calendarWrap($content="") {
$IPBHTML = "";
$IPBHTML .= "<div class='general_box'>
{$content}
</div>
<br />";
return $IPBHTML;
}

/* -- latestPosts --*/
function latestPosts($posts=array()) {
$IPBHTML = "";

$this->registry->templateStriping['recent_topics'] = array( FALSE, "row1","row2 altrow");
$IPBHTML .= "<div class='general_box'>
	<h3><img src='{$this->settings['img_url']}/comment_new.png' alt='{$this->lang->words['icon']}' /> {$this->lang->words['discuss_title']}</h3>
	<ul class='hfeed'>
				".$this->__f__98c5754a281856fc46a4667e477a2896($posts)."	</ul>
</div>
<br />";
return $IPBHTML;
}


function __f__98c5754a281856fc46a4667e477a2896($posts=array())
{
	$_ips___x_retval = '';
	foreach( $posts as $result )
	{
		
		$_ips___x_retval .= "
			<li class='hentry " .  IPSLib::next( $this->registry->templateStriping["recent_topics"] ) . "'><a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$result['tid']}", 'public','' ), "{$result['title_seo']}", "showtopic" ) . "' rel='bookmark' title='{$this->lang->words['view_topic']}'>{$result['title_display']}</a> {$this->lang->words['recent_by']} <address class=\"author vcard\"><a class=\"url fn\" href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showuser={$result['member_id']}", 'public','' ), "{$result['members_seo_name']}", "showuser" ) . "\" title='{$this->lang->words['view_profile']}'>{$result['members_display_name']}</a>" . $this->registry->getClass('output')->getTemplate('global')->user_popup($result['member_id']) . "</address> <span class='date'>(<abbr class=\"published\" title=\"" . date( 'c', $result['post_date'] ) . "\">{$result['date']}</abbr>)</span>
			<br />{$this->lang->words['recent_read']}: " . $this->registry->getClass('class_localization')->formatNumber( $result['views'] ) . " &nbsp; {$this->lang->words['recent_comments']}: " . $this->registry->getClass('class_localization')->formatNumber( $result['posts'] ) . "</li>
		
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- onlineUsers --*/
function onlineUsers($active) {
$IPBHTML = "";
$IPBHTML .= "<div class='general_box clearfix' id='portal_active_users'>
	<h3><img src='{$this->settings['img_url']}/comment_new.png' alt='{$this->lang->words['icon']}' /> <a href=\"" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "app=members&amp;module=online&amp;section=online", 'public','' ), "", "" ) . "\">{$this->lang->words['online_title']}</a></h3>
	<div>
		<!--<span>" . sprintf( $this->lang->words['online_breakdown'], intval($active['TOTAL']) ) . "</span>-->
		<span class='desc'>" . sprintf( $this->lang->words['online_split'], intval($active['MEMBERS']), intval($active['visitors']) ) . "</span>
		<br /><br />
		<p>
			<span class='name'>" . implode( ",</span> <span class='name'>", $active['NAMES'] ) . "</span>					
		</p>
	</div>
</div>
<br />";
return $IPBHTML;
}

/* -- pollWrapper --*/
function pollWrapper($content="",$tid="") {
$IPBHTML = "";
$IPBHTML .= "<div class='general_box'>
	<h3><img src='{$this->settings['img_url']}/comment_new.png' alt='{$this->lang->words['icon']}' /> <a href='" . $this->registry->getClass('output')->formatUrl( $this->registry->getClass('output')->buildUrl( "showtopic={$tid}", 'public','' ), "", "" ) . "'>{$this->lang->words['poll_title']}</a></h3>
	{$content}
</div>
<br />";
return $IPBHTML;
}

/* -- siteNavigation --*/
function siteNavigation($links=array()) {
$IPBHTML = "";
$IPBHTML .= "<div class='general_box'>
	<h3><img src='{$this->settings['img_url']}/comment_new.png' alt='{$this->lang->words['icon']}' /> {$this->lang->words['links_title']}</h3>
	<ul>
		".$this->__f__62ab40887a0b0ec24c2a0aeda48ad26f($links)."	</ul>
</div>
<br />";
return $IPBHTML;
}


function __f__62ab40887a0b0ec24c2a0aeda48ad26f($links=array())
{
	$_ips___x_retval = '';
	foreach( $links as $link )
	{
		
		$_ips___x_retval .= "
			<li>&bull; <a href=\"{$link[1]}\">{$link[2]}</a><li>		
		
";
	}
	$_ips___x_retval .= '';
	return $_ips___x_retval;
}

/* -- skeletonTemplate --*/
function skeletonTemplate() {
$IPBHTML = "";
$IPBHTML .= "<!--
	SKINNOTE: Remember boxes are also in skin_gallery_portal, skin_blog_portal and skin_downloads_external
	-The striping doesn't add the proper padding like the board index does
	-Calendar doesn't display properly compared to real mini-calendar
	-Poll is kinda ugly
	-Print and Email should be icons.  Note that I also used \"moderation_bar\" class for that row, which isn't necessarily
		semantic, but displays fine - your call on whether to change it
-->
" . $this->registry->getClass('output')->getTemplate('global')->include_lightbox() . "
<div id='portal_articles' class='left'>
	<!--MAIN-->
	 <!--::recent_topics_last_x::-->
	 <!--END MAIN-->
</div>
<div id='index_stats' class='portal left'>
	<!-- LEFT -->
	 <!--::portal_sitenav::-->
	 <!--::online_users_show::-->
	 <!--::blogs_show_last_updated_x::-->
	 <!--::recent_downloads_last_x::-->
	 <!--::gallery_show_random_image::-->
	 <!--::calendar_show_current_month::-->
	 <!--::poll_show_poll::-->
	 <!--::recent_topics_discussions_last_x::-->
	 <!--::portal_affiliates::-->
	 <!--END LEFT-->
</div>
" . $this->registry->getClass('output')->getTemplate('global')->include_highlighter(1) . "
<script type='text/javascript'>
	// Resize images
	$$('.post', '.poll').each( function(elem){
		ipb.global.findImgs( $( elem ) );
	});
</script>";
return $IPBHTML;
}



}

/*--------------------------------------------------*/
/* END OF FILE                                      */
/*--------------------------------------------------*/

?>